{"version":3,"sources":["localStorage.ts","store/actions.ts","store/dispatch.ts","util.ts","components/jack.tsx","components/labelText.tsx","midiMessages.ts","store/reducer.ts","store/store.ts","midi.ts","components/cable.tsx","components/fader.tsx","components/knob.tsx","components/section.tsx","components/toggleSwitch.tsx","components/modules/complexOscillator.tsx","indexedDB.ts","components/modules/dualLoPassGates.tsx","components/modules/envelopeGenerator.tsx","components/modules/modulationOscillator.tsx","components/modules/patchbay.tsx","components/modules/pulser.tsx","components/modules/sequencer.tsx","components/iconButton.tsx","components/icons/downloadIcon.tsx","components/icons/folderIcon.tsx","components/icons/midiIcon.tsx","components/icons/saveIcon.tsx","components/titleInput.tsx","components/modules/topBar.tsx","components/easel.tsx","components/common/util.ts","components/common/Button.tsx","components/common/FocusList.tsx","components/common/Dropdown.tsx","components/modals/midiOutputSelector.tsx","components/common/FocusTrap.tsx","components/modals/modal.tsx","components/modals/downloadModal.tsx","components/modals/fileModal.tsx","components/modals/midiModal.tsx","components/modals/saveModal.tsx","components/modals/appModal.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["setLastEditedProject","id","localStorage","UPDATE_FADER","UPDATE_SWITCH","SET_DRAG_POINT","CONNECT_CV","DISCONNECT_CV","SET_MIDI_INPUT","SET_MIDI_OUTPUT","SET_PATCH","SET_PATCH_NAME","SET_MIDI_SPEED","SET_PATCH_EDITED","CREATE_NEW_PATCH","SHOW_MODAL","HIDE_MODAL","SHOW_SAVE_MODAL","OPEN_SAVED_PATCH","dispatchUpdateFader","module","param","value","type","dispatchUpdateSwitch","dispatchSetMIDIOutput","name","dispatchSetPatchName","dispatchHideModal","dispatchOpenSavedPatch","patch","dispatchCreateNewPatch","CancellationToken","isCancelled","this","encodePatch","bytes","forEachValue","addBytes","connections","connection","start","connectionPoint","end","color","encodeURIComponent","btoa","data","numBytes","i","String","fromCharCode","decodePatch","encoded","atob","decodeURIComponent","offset","out","sequencer","triggerSelect","stages","voltage1","voltage2","voltage3","voltage4","voltage5","pulse1","pulse2","pulse3","pulse4","pulse5","envelope","attack","sustain","decay","modeSelect","pulser","period","periodCV","modOsc","keyboard","waveshape","range","modulationType","frequency","frequencyCV","modulation","modulationCV","complexOsc","polarity","pitch","pitchCV","timbre","timbreCV","timbreKnob","gates","gate2Source","gate1Mode","gate2Mode","level1","level1CV","level2","level2CV","random","triggerSource","current","charCodeAt","readByte","res","length","push","cb","result","Object","keys","sort","Array","isArray","possible","indexOf","toSVGCoordinate","svg","x","y","point","createSVGPoint","matrixTransform","getScreenCTM","inverse","distance","x0","y0","x1","y1","Math","sqrt","pow","cleanPatchName","title","replace","formatLastEditedDate","date","now","then","seconds","isNaN","describePlural","floor","describetime","Date","unit","createPreviewURI","clone","cloneNode","style","document","createElementNS","appendChild","textContent","previewCSS","content","querySelector","setAttribute","bg","insertBefore","firstChild","selector","objs","querySelectorAll","item","remove","text","XMLSerializer","serializeToString","ConnectionPoint","LabelText","props","anchor","alignment","className","filter","e","join","textAnchor","alignmentBaseline","fill","OUTER_RADIUS","mapDispatchToProps","dispatchSetDragPoint","Jack","connect","state","ownProps","arrow","arrowY","transform","ref","rect","getBoundingClientRect","ownerSVGElement","left","width","top","height","cx","cy","r","stroke","x2","y2","d","definitions","messageNames","connectionIds","getMessageName","getMessageByName","find","getMessageTemplateBytes","key","getMessageBytes","getMessageTemplate","template","split","Uint8Array","parseInt","createFaderMessage","saveBuffer","max","min","createSwitchMessage","num","createConnectCVMessage","from","to","msg","outputName","swap","createDisconnectCVMessage","createPatchMessages","easel","clearBuffer","saveIndex","queue","isSave","undefined","rawValue","messageName","startsWith","prefix","set","createSetNameMessage","createSaveMessage","getReadableName","readableNames","initialState","dragPoints","midiSpeed","sendMIDI","interval","lastTime","rateLimit","output","action","sendMIDIMessage","startPoint","endPoint","cvCount","setDragPoint","map","p","makeConnection","existing","startId","endId","takenColors","nextColor","slice","concat","breakConnection","c","defaultModalState","midiAccessPromise","store","createStore","midiOutput","toString","saved","patchEdited","midiInput","modal","modalType","patchToLoad","speed","edited","getAccessAsync","a","navigator","requestMIDIAccess","sysex","listMIDIOutputsAsync","access","outputs","entry","listMIDIInputsAsync","inputs","get","send","messages","onProgress","cancellationToken","Promise","resolve","reject","currentIndex","intervalRef","setInterval","clearInterval","messageInterval","addConnectionChangedListener","handler","addEventListener","removeConnectionChangedListener","removeEventListener","getState","Cable","colorIndex","dragging","onClick","pathString","strokeWidth","strokeLinecap","MAX_VALUE","FADER_HEIGHT","FADER_WIDTH","FaderView","fader","label","g","window","PointerEvent","frameRef","throttled","cancelAnimationFrame","requestAnimationFrame","buttons","eventPoint","clientX","clientY","rectPoint","pointerUpdate","onKeyDown","preventDefault","stopPropagation","tabIndex","role","aria-valuemin","aria-valuemax","aria-valuenow","aria-label","aria-orientation","fillOpacity","rx","opacity","KNOB_RADIUS","Knob","minAngle","PI","maxAngle","angle","innerArcFlag","atan2","cos","sin","KNOB_THICKNESS","Section","children","TOGGLE_WIDTH","ToggleSwitch","topOption","middleOption","bottomOption","twoWay","onChange","TOGGLE_HEIGHT","charCode","which","keyCode","TOGGLE_HANDLE_RADIUS_RATIO","_db","openPromise","ComplexOscillatorView","DualLoPassGates","EnvelopeGenerator","ModulationOscillator","Patchbay","PulseOutput","PressureOutput","PitchOutput","EnvelopeAttackInput","SequentialVoltageOutput","EnvelopeSustainInput","EnvelopeDecayInput","RandomOutput","PulserPeriodInput","EnvelopeGeneratorOutput","ModulationOscFrequencyInput","PulserOutput","ModulationOscModulationInput","ComplexOscPitchInput","ComplexOscTimbreInput","LoPassGate1Input","LoPassGate2Input","Pulser","Sequencer","PATCH_DB_NAME","initDBAsync","request","indexedDB","open","onerror","event","onupgradeneeded","objectStore","createObjectStore","autoIncrement","keyPath","createIndex","unique","onsuccess","lookupEntryAsync","db","transaction","addEntryAsync","add","updateEntryAsync","toStore","lastSavedTime","put","listEntriesAsync","openCursor","allEntries","cursor","continue","savePatchAsync","preview","createdTime","updatePatchAsync","getPatchAsync","IconButton","ev","DownloadIcon","FolderIcon","MidiIcon","SaveIcon","TitleInput","React","currentValue","setCurrentValue","currentTarget","onBlur","blur","dispatchShowModal","TopBar","patchNotSaved","patchName","svgRef","onSaveClicked","saveResult","ModulationCVOutput","PanelInput","Panel1Output","Panel2Output","ComplexOscWaveshapeInput","EnvelopeDetectorOutput","input","console","log","dispatchConnectCV","dispatchDisconnectCV","Easel","dragStart","setDragStart","dragEnd","setDragEnd","initAsync","getDragPoint","svgCoordinate","onPointerDown","dragPoint","onPointerUp","startName","endName","onPointerMove","onPointerLeave","cables","index","viewBox","xmlns","patternUnits","patternTransform","fireClickOnEnter","click","classList","classes","reduce","prev","trim","Button","ariaLabel","ariaHidden","ariaDescribedBy","ariaControls","ariaExpanded","ariaHasPopup","ariaPosInSet","ariaSetSize","ariaSelected","onKeydown","buttonRef","leftIcon","rightIcon","hardDisabled","href","target","disabled","aria-hidden","aria-controls","aria-expanded","aria-haspopup","aria-posinset","aria-setsize","aria-describedby","aria-selected","FocusList","focusableElements","focusList","childTabStopId","onItemReceivedFocus","useUpAndDownArrowKeys","activeElement","focus","element","dispatchEvent","Event","focusable","values","childTabStop","Dropdown","container","items","selectedId","onItemSelected","expanded","setExpanded","selected","contains","relatedTarget","selectedIndex","aria-labelledby","some","MidiOutputSelector","useState","midiOutputs","setMidiOutputs","useEffect","updateMidiOutputsAsync","device","selectedOutput","FocusTrap","onEscape","arrowKeyNavigation","dontStealFocus","includeOutsideTabOrder","stoleFocus","setStoleFocus","getElements","list","node","nodeListToArray","moveFocus","forward","goToEnd","shiftKey","Modal","onCloseClick","actions","dispatchSetMidiSpeed","DownloadModal","selectedSlot","setSelectedSlot","sendingPatch","setSendingPatch","progress","setProgress","setCancellationToken","saveSlots","cancel","outId","inId","createDisconnectAllMessages","token","sendMIDIMessagesAsync","total","round","empty","backgroundImage","dispatchShowSaveModal","FileModal","savedProjects","setSavedProjects","allPatchesAsync","onPatchClick","src","alt","dispatchSetMIDIInput","MidiModal","midiInputs","setMidiInputs","updateMidiInputsAsync","selectedInput","SaveModal","AppModal","modalState","subscribe","timeout","clearTimeout","setTimeout","throttle","location","dispatch","dispatchSetPatchEdited","dispatchSetPatch","lastEdited","savedPatch","hash","parts","encodedPatch","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"mfAAO,SAASA,EAAqBC,GACjCC,aAAY,oBAA0BD,ECDnC,IAAME,EAAe,eACfC,EAAgB,gBAChBC,EAAiB,iBACjBC,EAAa,aACbC,EAAgB,gBAEhBC,EAAiB,iBACjBC,EAAkB,kBAClBC,EAAY,YACZC,EAAiB,iBACjBC,EAAiB,iBACjBC,EAAmB,mBAEnBC,EAAmB,mBAEnBC,EAAa,aACbC,EAAa,aACbC,EAAkB,kBAElBC,EAAmB,mBCIzB,SAASC,EAAoBC,EAAqBC,EAAeC,GACpE,MAAO,CACHC,KAAMpB,EACNiB,SACAC,QACAC,SAUD,SAASE,EAAqBJ,EAAqBC,EAAeC,GACrE,MAAO,CACHC,KAAMnB,EACNgB,SACAC,QACAC,SAyCD,SAASG,EAAsBC,GAClC,MAAO,CACHH,KAAMd,EACNiB,QAWD,SAASC,EAAqBD,GACjC,MAAO,CACHH,KAAMZ,EACNe,QAWD,SAASE,IACZ,MAAO,CACHL,KAAMP,GAIP,SAASa,EAAuBC,GACnC,MAAO,CACHA,QACAP,KAAML,GAyBP,SAASa,IACZ,MAAO,CACHR,KAAMT,G,oBCjJDkB,EAAb,iDACIC,aAAc,EADlB,0CAGI,WACIC,KAAKD,aAAc,MAJ3B,KAQO,SAASE,EAAYL,GACxB,IAAIM,EAAQ,GAEZC,EAAaP,GAAO,SAACR,EAAOc,GAExB,OADAE,EAAShB,EAAOc,GACT,KAL2B,oBAQbN,EAAMS,aARO,IAQtC,2BAA4C,CAAC,IAAlCC,EAAiC,QACxCF,EAASE,EAAWC,MAAMC,gBAAiB,GAC3CJ,EAASE,EAAWC,MAAMxC,GAAI,GAC9BqC,EAASE,EAAWG,IAAID,gBAAiB,GACzCJ,EAASE,EAAWG,IAAI1C,GAAI,GAC5BqC,EAASE,EAAWI,MAAO,IAbO,8BAgBtC,OAAOC,mBAAmBC,KAAKV,IAE/B,SAASE,EAASS,EAAcC,GAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAUC,IAC1Bb,GAASc,OAAOC,aAAcJ,GAAa,EAAJE,EAAU,MAKtD,SAASG,EAAYC,GACxB,IAAMjB,EAAQkB,KAAKC,mBAAmBF,IAElCG,EAAS,EAEPC,EAAMpB,EAuCL,CACHqB,UAAW,CACPC,cAAe,SACfC,OAAQ,SAERC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,OAEZC,SAAU,CACNC,OAAQ,EACRC,QAAS,EACTC,MAAO,EACPf,cAAe,SACfgB,WAAY,UAEhBC,OAAQ,CACJjB,cAAe,SACfgB,WAAY,SACZE,OAAQ,EACRC,SAAU,GAEdC,OAAQ,CACJC,SAAU,SACVC,UAAW,SACXC,MAAO,SACPC,eAAgB,SAChBC,UAAW,EACXC,YAAa,EACbC,WAAY,EACZC,aAAc,GAElBC,WAAY,CACRR,SAAU,SACVC,UAAW,SACXQ,SAAU,SACVC,MAAO,EACPC,QAAS,EACTC,OAAQ,EACRC,SAAU,EACVC,WAAY,GAEhBC,MAAO,CACHC,YAAa,SACbC,UAAW,SACXC,UAAW,SACXC,OAAQ,EACRC,SAAU,EACVC,OAAQ,EACRC,SAAU,GAEdC,OAAQ,CACJC,cAAe,UAEnBjE,YAAa,KApGsB,SAACjB,EAAO0B,GAG3C,IAFA,IAAIyD,EAAU,EAELxD,EAAI,EAAGA,EAAID,EAAUC,IAC1BwD,GAAYrE,EAAMsE,WAAWlD,IAAgB,EAAJP,EACzCO,IAGJ,OAAOiD,KAGXhD,EAAIlB,YAAc,GAQlB,IANA,IAAMoE,EAAW,WACb,IAAMC,EAAMxE,EAAMsE,WAAWlD,GAE7B,OADAA,IACOoD,GAGF3D,EAAIO,EAAQP,EAAIb,EAAMyE,OAAQ5D,GAAK,EAAG,CAC3C,IAAMT,EAAyB,CAC3BC,MAAO,CACHC,gBAAiBiE,IACjB1G,GAAI0G,KAERhE,IAAK,CACDD,gBAAiBiE,IACjB1G,GAAI0G,KAER/D,MAAO+D,KAGXlD,EAAIlB,YAAYuE,KAAKtE,GAGzB,OAAOiB,EA6FJ,SAASpB,EAAaP,EAAciF,GACvC,IADwI,EAClIC,EAAc,GADoH,cAEnHC,OAAOC,KAAKpF,GAAOqF,QAFgG,IAExI,2BAAgD,CAAC,IAAtC/F,EAAqC,QAG5C,GAFA4F,EAAO5F,GAAU,GAEF,gBAAXA,EAAJ,CAH4C,oBAKxB6F,OAAOC,KAAMpF,EAAcV,IAAS+F,QALZ,IAK5C,2BAAgE,CAAC,IAAtD9F,EAAqD,QACtDoF,EAAW3E,EAAcV,GAAQC,GAEvC,IAAI+F,MAAMC,QAAQZ,GAElB,GAAuB,kBAAZA,EAAsB,CAC7B,IAAMa,EAAW,CAAC,MAAO,SAAU,UACnCN,EAAO5F,GAAQC,GAASiG,EAASP,EAAGO,EAASC,QAAQd,GAAU,EAAGrF,EAAQC,EAAOoF,SAGjFO,EAAO5F,GAAQC,GAAS0F,EAAGN,EAAS,EAAGrF,EAAQC,EAAOoF,IAflB,iCAFwF,8BAsBxI,OAAOO,EAGJ,SAASQ,EAAgBC,EAAoBC,EAAWC,GAAY,IAAD,EAChEC,EAAQH,EAAII,iBAGlB,OAFAD,EAAMF,EAAIA,EACVE,EAAMD,EAAIA,EACHC,EAAME,gBAAN,UAAsBL,EAAIM,sBAA1B,aAAsB,EAAoBC,WAG9C,SAASC,EAASC,EAAYC,EAAYC,EAAYC,GACzD,OAAOC,KAAKC,KAAKD,KAAKE,IAAIN,EAAKE,EAAI,GAAKE,KAAKE,IAAIL,EAAKE,EAAI,IAGvD,SAASI,EAAeC,GAC3B,OAAOA,EAAMC,QAAQ,iBAAkB,IAGpC,SAASC,EAAqBC,GACjC,OAMJ,SAAsBC,EAAaC,GAC/B,IAAMC,EAAUF,EAAMC,EACtB,GAAIE,MAAMD,GAAU,MAAO,GAC3B,OAAIA,EAAU,EACH,MACFA,EAAU,GACR,oBACFA,EAAU,GACR,IAAME,EAAeZ,KAAKa,MAAMH,GAAU,UAAY,OACxDA,EAAU,IACR,eACFA,EAAU,KACR,IAAME,EAAeZ,KAAKa,MAAMH,EAAU,IAAK,UAAY,OAC7DA,EAAU,KACR,cACFA,EAAU,MACR,IAAME,EAAeZ,KAAKa,MAAMH,EAAU,GAAK,IAAK,QAAU,OAChEA,EAAU,OACR,IAAME,EAAeZ,KAAKa,MAAMH,EAAU,GAAK,GAAK,IAAK,OAAS,OACpEA,EAAU,QACR,IAAME,EAAeZ,KAAKa,MAAMH,EAAU,GAAK,GAAK,GAAK,IAAK,SAAW,OAEzE,IAAME,EAAeZ,KAAKa,MAAMH,EAAU,GAAK,GAAK,GAAK,KAAM,QAAU,OA5B7EI,CAAaC,KAAKP,MAAQ,IAAMD,EAAO,KAGlD,SAASK,EAAe5H,EAAegI,GACnC,OAAOhI,EAAQ,IAAMgI,GAAiB,GAAThI,EAAa,GAAK,KA2B5C,SAASiI,EAAiB9B,GAC7B,IAAM+B,EAAQ/B,EAAIgC,WAAU,GAEtBC,EAAQC,SAASC,gBAAgB,6BAA8B,SACrEJ,EAAMK,YAAYH,GAClBA,EAAMI,YAAcC,EAEpB,IAAMC,EAAUR,EAAMS,cAAc,kBAEpCT,EAAMU,aAAa,UAAW,gBACvB,OAAPF,QAAO,IAAPA,KAASE,aAAa,YAAa,mBAEnC,IAAMC,EAAKR,SAASC,gBAAgB,6BAA8B,QAClEO,EAAGD,aAAa,IAAK,KACrBC,EAAGD,aAAa,IAAK,KACrBC,EAAGD,aAAa,QAAS,QACzBC,EAAGD,aAAa,SAAU,OAC1BC,EAAGD,aAAa,OAAQ,2BAExBV,EAAMY,aAAaD,EAAIX,EAAMa,YAe7B,IAbA,IAaA,MAb0B,CACtB,eACA,cACA,eACA,cACA,aACA,yBACA,gBACA,mBACA,WACA,eAGJ,eAGI,IAHC,IAAMC,EAAQ,KACTC,EAAOf,EAAMgB,iBAAiBF,GAE3BrH,EAAI,EAAGA,EAAIsH,EAAK1D,OAAQ5D,IAC7BsH,EAAKE,KAAKxH,GAAGyH,SAIrB,IAAMC,GAAO,IAAIC,eAAgBC,kBAAkBrB,GACnD,MAAO,6BAA+B1G,KAAK6H,GAG/C,ICvRYG,EDuRNf,EAAU,2nE,gBElRHgB,GAAY,SAACC,GAA2B,IACzCtD,EAA6CsD,EAA7CtD,EAAGC,EAA0CqD,EAA1CrD,EAAGgD,EAAuCK,EAAvCL,KAAMM,EAAiCD,EAAjCC,OAAQC,EAAyBF,EAAzBE,UAAWC,EAAcH,EAAdG,UACvC,OAAO,uBACHA,UAAW,CAAC,aAAcA,GAAWC,QAAO,SAAAC,GAAC,QAAMA,KAAGC,KAAK,KAC3D5D,EAAGA,EACHC,EAAGA,EACH4D,WAAYN,EACZO,kBAAmBN,EACnBO,KAAK,uBANF,SAOEd,K,gBDdDG,O,6BAAAA,I,mCAAAA,I,6BAAAA,I,qDAAAA,I,qDAAAA,I,+BAAAA,I,+BAAAA,I,+BAAAA,I,+BAAAA,I,mDAAAA,I,4CAAAA,I,0CAAAA,I,8DAAAA,I,gEAAAA,I,gDAAAA,I,kDAAAA,I,wCAAAA,I,wCAAAA,I,4BAAAA,I,8CAAAA,I,gDAAAA,I,4CAAAA,I,yDAAAA,M,KAsCZ,IAAMY,GAAe,GA+ErB,IAAMC,GAAqB,CACvBC,qBF/EG,SAA8BlJ,EAAkCzC,EAAYyH,EAAWC,GAC1F,MAAO,CACHpG,KAAMlB,EACNqC,kBACAzC,KACAyH,IACAC,OE4EKkE,GAAOC,aAZpB,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,eACAC,GAHY,KAWsBL,GAAzBG,EAhFI,SAACd,GAAsB,IACnCtD,EAAwEsD,EAAxEtD,EAAGC,EAAqEqD,EAArErD,EAAGgD,EAAkEK,EAAlEL,KAAM/H,EAA4DoI,EAA5DpI,MAAOF,EAAqDsI,EAArDtI,gBAAiBzC,EAAoC+K,EAApC/K,GAAIgM,EAAgCjB,EAAhCiB,MAAOL,EAAyBZ,EAAzBY,qBAcnDM,EAAS,EAWb,OATIA,EADU,SAAVD,GACS,IAEM,WAAVA,GACI,IAGA,GAGN,qCACH,qBAAGd,UAAU,aAAagB,UAAS,oBAAezE,EAAf,YAAoBC,EAApB,KAAnC,UACI,yBACIyE,IA1BY,SAACA,GACrB,GAAIA,EAAK,CACL,IAAMC,EAAOD,EAAIE,wBACX1E,EAAQJ,EACV4E,EAAIG,gBACJF,EAAKG,KAAOH,EAAKI,MAAQ,EACzBJ,EAAKK,IAAML,EAAKM,OAAS,GAE7Bf,EAAqBlJ,EAAiBzC,GAAM,EAAG2H,EAAMF,EAAGE,EAAMD,KAmB1DiF,GAAI,EACJC,GAAI,EACJC,EAAGpB,GACHD,KAAM7I,EACNmK,OAAO,yBACX,yBACIH,GAAI,EACJC,GAAI,EACJC,EAxCK,GAyCLrB,KAAK,0BACLsB,OAAO,yBACVpC,GACG,eAAC,GAAD,CACIA,KAAMA,EACNjD,EAAG,EACHC,EAAG+D,GACHR,UAAU,WACVD,OAAO,WAEdgB,GACG,qBAAGd,UAAU,aAAb,UACI,uBACI/C,GAAI,EACJC,IAAI,GACJ2E,GAAI,EACJC,GAAIf,EACJa,OAAO,yBACX,uBACIG,EAAC,cAAShB,EAAS,EAAlB,MAAyB,EAAzB,IAA8B,GAA9B,eAAuC,EAAvC,aAA6C,EAA7C,aAAmD,EAAnD,IAAwD,EAAxD,MACDT,KAAK,oCExGvB0B,GAAc,CAChB,CACI,KAAQ,aACR,OAAU,GACV,SAAY,uHACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CAEI,KAAQ,gBACR,OAAU,GACV,SAAY,uHACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,kBACR,OAAU,GACV,SAAY,2GACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,cACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,eACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,oBACR,OAAU,GACV,SAAY,2GACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,oBACR,OAAU,GACV,SAAY,2GACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,UACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,UACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,UACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,gBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,eACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,aACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,WACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,cACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,WACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,WACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,WACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,WACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,WACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,eACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,IAEX,CACI,OAAU,GACV,IAAO,EACP,IAAO,OAInB,CACI,KAAQ,aACR,OAAU,GACV,SAAY,uEACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,MAInB,CACI,KAAQ,WACR,OAAU,GACV,SAAY,uEACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,MAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,eACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,aACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,gBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,eACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,eACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,cACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,kBACR,OAAU,GACV,SAAY,2GACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,eACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,YACR,OAAU,GACV,SAAY,mFACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,gBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,gBACR,OAAU,GACV,SAAY,+FACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,iBACR,OAAU,GACV,SAAY,0EACZ,UAAa,IAEjB,CACI,KAAQ,UACR,OAAU,GACV,SAAY,uEACZ,UAAa,CACT,CACI,OAAU,GACV,IAAO,EACP,IAAO,KAInB,CACI,KAAQ,aACR,OAAU,GACV,SAAY,oEACZ,UAAa,KAIfC,GAAe,CACjB1J,UAAW,CACPC,cAAe,iBACfC,OAAQ,gBAERC,SAAU,WACVC,SAAU,WACVC,SAAU,WACVC,SAAU,WACVC,SAAU,WACVC,OAAQ,YACRC,OAAQ,YACRC,OAAQ,YACRC,OAAQ,YACRC,OAAQ,aAEZC,SAAU,CACNC,OAAQ,UACRC,QAAS,UACTC,MAAO,UACPf,cAAe,gBACfgB,WAAY,cAEhBC,OAAQ,CACJjB,cAAe,eACfgB,WAAY,YACZE,OAAQ,cACRC,SAAU,YAEdC,OAAQ,CACJC,SAAU,iBACVC,UAAW,kBACXC,MAAO,cACPC,eAAgB,YAChBC,UAAW,aACXC,YAAa,gBACbC,WAAY,YACZC,aAAc,gBAElBC,WAAY,CACRR,SAAU,iBACVC,UAAW,eACXQ,SAAU,iBACVC,MAAO,cACPC,QAAS,iBACTC,OAAQ,eACRC,SAAU,kBACVC,WAAY,gBAEhBC,MAAO,CACHC,YAAa,iBACbC,UAAW,eACXC,UAAW,eACXC,OAAQ,iBACRC,SAAU,oBACVC,OAAQ,iBACRC,SAAU,qBAEdC,OAAQ,CACJC,cAAe,kBAIjB6G,GAA6C,CAC/C,wBAA2B,EAC3B,wBAA2B,EAC3B,aAAgB,EAChB,YAAe,EACf,eAAkB,EAClB,YAAe,EACf,aAAgB,EAChB,uBAA0B,GAC1B,mBAAsB,GACtB,aAAgB,GAChB,aAAgB,GAChB,kBAAqB,EACrB,4BAA+B,EAC/B,6BAAgC,EAChC,qBAAwB,EACxB,sBAAyB,EACzB,yBAA4B,EAC5B,iBAAoB,EACpB,iBAAoB,EACpB,WAAc,EACd,oBAAuB,EACvB,qBAAwB,GACxB,mBAAsB,IAGnB,SAASC,GAAelM,EAAgBC,GAC3C,OAAQ+L,GAAqBhM,GAAQC,GAGzC,SAASkM,GAAiB7L,GACtB,OAAOyL,GAAYK,MAAK,SAAAN,GAAC,OAAIA,EAAExL,OAASA,KAQ5C,SAAS+L,GAAwBrM,EAAgBsM,GAE7C,OAAOC,GAPX,SAA4BvM,EAAgBsM,GAExC,OAAOH,GADMD,GAAelM,EAAQsM,IAKnBE,CAAmBxM,EAAQsM,GACZG,UAGpC,SAASF,GAAgBE,GAGrB,IAFA,IAAMzL,EAAQyL,EAASC,MAAM,KACvBrK,EAAM,IAAIsK,WAAW3L,EAAMyE,QACxB5D,EAAI,EAAGA,EAAIb,EAAMyE,OAAQ5D,IACd,MAAZb,EAAMa,KACVQ,EAAIR,GAAK+K,SAAS5L,EAAMa,GAAI,KAEhC,OAAOQ,EAGJ,SAASwK,GAAmB7M,EAAgBsM,EAAapM,GAAoC,IAArB4M,EAAoB,wDACzFzK,EAAMgK,GAAwBrM,EAAQsM,GAW5C,OATApM,EAAQgH,KAAK6F,IAAI,EAAG7F,KAAK8F,IAAI,KAAO9M,IAEpCmC,EAAIA,EAAIoD,OAAS,GAAa,IAARvF,EACtBmC,EAAIA,EAAIoD,OAAS,GAAMvF,GAAS,EAAK,GAEjC4M,IACAzK,EAAIA,EAAIoD,OAAS,GAAK,GAGnBpD,EAGJ,SAAS4K,GAAoBjN,EAAgBsM,EAAapM,GAAyD,IAGlHgN,EAH6FJ,EAAoB,wDAC/GzK,EAAMgK,GAAwBrM,EAAQsM,GAG5C,OAAQpM,GACJ,IAAK,MAAOgN,EAAM,EAAG,MACrB,IAAK,SAAUA,EAAM,EAAG,MACxB,IAAK,SAAUA,EAAM,EASzB,OANA7K,EAAIA,EAAIoD,OAAS,GAAKyH,EAElBJ,IACAzK,EAAIA,EAAIoD,OAAS,GAAK,GAGnBpD,EAGJ,SAAS8K,GAAuBC,EAAcC,GAAiC,IAArBP,EAAoB,wDAC3EQ,EAAMnB,GAAiB,cACvB9J,EAAMkK,GAAgBe,EAAKb,UAE7Bc,EAAa7D,EAAgB0D,GAEjC,IAAqC,IAAjCG,EAAWpH,QAAQ,SAAiB,CACpC,IAAIqH,EAAOJ,EACXA,EAAOC,EACPA,EAAKG,EAYT,OARAnL,EAAI,IAAM4J,GAAcvC,EAAgB0D,IAExC/K,EAAI,IAAM4J,GAAcvC,EAAgB2D,IAEpCP,IACAzK,EAAI,IAAM,GAGPA,EAGJ,SAASoL,GAA0BL,EAAcC,GACpD,IACMhL,EAAMkK,GADAJ,GAAiB,iBACIM,UAIjC,IAAqC,IAFpB/C,EAAgB0D,GAElBjH,QAAQ,SAAiB,CACpC,IAAIqH,EAAOJ,EACXA,EAAOC,EACPA,EAAKG,EAQT,OAJAnL,EAAI,IAAM4J,GAAcvC,EAAgB0D,IAExC/K,EAAI,IAAM4J,GAAcvC,EAAgB2D,IAEjChL,EA+CJ,SAASqL,GAAoBC,EAAcC,EAAsBtN,EAAeuN,GACnF,IAAMC,EAAsB,GAExBF,GACAE,EAAMpI,KA9CE6G,GADAJ,GAAiB,kBACIM,WAiDjC,IAAMsB,OAAuBC,IAAdH,EAEf5M,EAAa0M,GAAO,SAACzN,EAAOc,EAAOhB,EAAQC,EAAOgO,GAC9C,IAAMC,EAAchC,GAAelM,EAAQC,GAQ3C,OANIiO,EAAYC,WAAW,OAASD,EAAYC,WAAW,MACvDL,EAAMpI,KAAKmH,GAAmB7M,EAAQC,EAAOgO,EAAUF,IAGvDD,EAAMpI,KAAKuH,GAAoBjN,EAAQC,EAAOgO,EAAUF,IAErD,KAlB4F,oBAqB9EJ,EAAMxM,aArBwE,IAqBvG,2BAA4C,CAAC,IAAlCC,EAAiC,QACxC0M,EAAMpI,KAAKyH,GAAuB/L,EAAWC,MAAMC,gBAAiBF,EAAWG,IAAID,gBAAiByM,KAtBD,8BAiCvG,OARIzN,GACAwN,EAAMpI,KAtDP,SAA8BpF,GACjC,IACM8N,EAAS7B,GADHJ,GAAiB,cACOM,UAC9BpK,EAAM,IAAIsK,WAAWyB,EAAO3I,OAASnF,EAAKmF,OAAS,GAEzDpD,EAAIgM,IAAID,EAAQ,GAChB,IAAK,IAAIvM,EAAI,EAAGA,EAAIvB,EAAKmF,OAAQ5D,IAC7BQ,EAAI+L,EAAO3I,OAAS5D,GAAKvB,EAAKgF,WAAWzD,GAI7C,OADAQ,EAAIA,EAAIoD,OAAS,GAAK,IACfpD,EA2CQiM,CAAqBhO,IAGhCyN,GACAD,EAAMpI,KAnEP,SAA2BmI,GAC9B,IACMxL,EAAMkK,GADAJ,GAAiB,WACIM,UAIjC,OAFApK,EAAIA,EAAIoD,OAAS,GAAKoI,EAEfxL,EA6DQkM,CAAkBV,IAG1BC,EAGJ,SAASU,GAAgBxO,EAAgBC,GAC5C,OAAOwO,GAAcvC,GAAelM,EAAQC,IAGhD,IAAMwO,GAA2C,CAC7C,eAAkB,yBAClB,cAAiB,mBACjB,SAAY,oBACZ,SAAY,oBACZ,SAAY,oBACZ,SAAY,oBACZ,SAAY,oBACZ,UAAa,oBACb,UAAa,oBACb,UAAa,oBACb,UAAa,oBACb,UAAa,oBACb,QAAW,4BACX,QAAW,2BACX,QAAW,6BACX,cAAiB,wBACjB,WAAc,0BACd,aAAgB,sBAChB,UAAa,cACb,YAAe,gBACf,SAAY,mBACZ,eAAkB,8BAClB,gBAAmB,2BACnB,YAAe,uBACf,UAAa,iCACb,WAAc,2BACd,cAAiB,8BACjB,UAAa,4BACb,aAAgB,gCAChB,eAAkB,+BAClB,aAAgB,mCAChB,eAAkB,2BAClB,YAAe,wBACf,eAAkB,2BAClB,aAAgB,yBAChB,gBAAmB,4BACnB,aAAgB,4BAChB,eAAkB,gBAClB,aAAgB,cAChB,aAAgB,cAChB,eAAkB,eAClB,kBAAqB,kBACrB,eAAkB,eAClB,kBAAqB,kBACrB,cAAiB,+BC/gCfC,GAAsB,CACxBhO,MJiDO,CACH4B,UAAW,CACPC,cAAe,SACfC,OAAQ,SAERC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,OAEZC,SAAU,CACNC,OAAQ,EACRC,QAAS,EACTC,MAAO,EACPf,cAAe,SACfgB,WAAY,UAEhBC,OAAQ,CACJjB,cAAe,SACfgB,WAAY,SACZE,OAAQ,EACRC,SAAU,GAEdC,OAAQ,CACJC,SAAU,SACVC,UAAW,SACXC,MAAO,SACPC,eAAgB,SAChBC,UAAW,EACXC,YAAa,EACbC,WAAY,EACZC,aAAc,GAElBC,WAAY,CACRR,SAAU,SACVC,UAAW,SACXQ,SAAU,SACVC,MAAO,EACPC,QAAS,EACTC,OAAQ,EACRC,SAAU,EACVC,WAAY,GAEhBC,MAAO,CACHC,YAAa,SACbC,UAAW,SACXC,UAAW,SACXC,OAAQ,EACRC,SAAU,EACVC,OAAQ,EACRC,SAAU,GAEdC,OAAQ,CACJC,cAAe,UAEnBjE,YAAa,II7GjBb,KAAM,WACNqO,WAAY,GACZC,UAAW,UA2If,IAAMC,GJfC,SAAmBlJ,EAA4BmJ,GAClD,IAAIC,EAAW9G,KAAKP,MAEpB,OAAO,WACCO,KAAKP,MAAQqH,EAAWD,IAE5BC,EAAW9G,KAAKP,MAChB/B,EAAE,WAAF,eIQSqJ,EAAU,SAACC,EAA4BC,EAAavE,GACjE,GAAKsE,EAEL,OAAQC,EAAO/O,MACX,KAAKpB,EACDoQ,GAAgBF,EAAQpC,GAAmBqC,EAAOlP,OAAQkP,EAAOjP,MAAOiP,EAAOhP,QAC/E,MACJ,KAAKlB,EACDmQ,GAAgBF,EAAQhC,GAAoBiC,EAAOlP,OAAQkP,EAAOjP,MAAOiP,EAAOhP,QAChF,MACJ,KAAKhB,EACDiQ,GAAgBF,EAAQ9B,GAAuB+B,EAAOE,WAAYF,EAAOG,WACzE,MACJ,KAAKlQ,EAGD,IAHJ,EAGQmQ,EAAU,EAHlB,cAI6B3E,EAAMjK,MAAMS,aAJzC,IAII,2BAAkD,CAAC,IAAxCC,EAAuC,SAC1CA,EAAWC,MAAMC,kBAAoB4N,EAAOE,YAAchO,EAAWG,IAAID,kBAAoB4N,EAAOG,UACpGjO,EAAWG,IAAID,kBAAoB4N,EAAOE,YAAchO,EAAWC,MAAMC,kBAAoB4N,EAAOG,WACpGC,KAPZ,8BAWoB,IAAZA,GACAH,GAAgBF,EAAQxB,GAA0ByB,EAAOE,WAAYF,EAAOG,cAIzF,IAGH,SAASE,GAAaZ,EAAyBrN,EAAkCzC,EAAYyH,EAAWC,GACpG,IAD+G,EACzGX,EAAS+I,EAAWa,KAAI,SAAAC,GAAC,sBAASA,MADuE,cAG3Fd,GAH2F,IAG/G,2BAAgC,CAAC,IAAtBnI,EAAqB,QAC5B,GAAIA,EAAMlF,kBAAoBA,GAAmBkF,EAAM3H,KAAOA,EAG1D,OAFA2H,EAAMF,EAAIA,EACVE,EAAMD,EAAIA,EACHX,GAPgG,8BAkB/G,OAPAA,EAAOF,KAAK,CACRpE,kBACAzC,KACAyH,IACAC,MAGGX,EAGX,SAAS8J,GAAeC,EAAwBP,EAA6BQ,EAAiBP,EAA2BQ,GACrH,IAAIxO,EAAwB,CACxBC,gBAAiB8N,EACjBvQ,GAAI+Q,GAGJrO,EAAsB,CACtBD,gBAAiB+N,EACjBxQ,GAAIgR,GAGR,GAAIxO,EAAMC,kBAAoBC,EAAID,iBAC9B,GAAID,EAAMxC,GAAK0C,EAAI1C,GAAI,CACnB,IAAI2O,EAAOnM,EACXA,EAAQE,EACRA,EAAMiM,QAGT,GAAInM,EAAMC,gBAAkBC,EAAID,gBAAiB,CAClD,IAAIkM,EAAOnM,EACXA,EAAQE,EACRA,EAAMiM,EAGV,IAxBoI,EAwB9HsC,EAAyB,GAxBqG,cA0B3GH,GA1B2G,IA0BpI,2BAAmC,CAAC,IAAzBvO,EAAwB,QAC/B,GAAIA,EAAWC,MAAMC,kBAAoBD,EAAMC,iBAC3CF,EAAWC,MAAMxC,KAAOwC,EAAMxC,IAC9BuC,EAAWG,IAAID,kBAAoBC,EAAID,iBACvCF,EAAWG,IAAI1C,KAAO0C,EAAI1C,GACtB,OAAO8Q,EAGfG,EAAY1O,EAAWI,QAAS,GAlCgG,8BAsCpI,IADA,IAAIuO,EAAYD,EAAYrK,OACnB5D,EAAI,EAAGA,EAAIiO,EAAYrK,OAAQ5D,IACpC,IAAKiO,EAAYjO,GAAI,CACjBkO,EAAYlO,EACZ,MAIR,OAAO8N,EAASK,QAAQC,OAAO,CAAC,CAAE5O,QAAOE,MAAKC,MAAOuO,KAGzD,SAASG,GAAgBP,EAAwBP,EAA6BQ,EAAiBP,EAA2BQ,GACtH,OAAOF,EAAS3F,QAAO,SAAAmG,GACnB,OAAIA,EAAE9O,MAAMC,kBAAoB8N,GAAce,EAAE9O,MAAMxC,KAAO+Q,GAAWO,EAAE5O,IAAID,kBAAoB+N,GAAYc,EAAE5O,IAAI1C,KAAOgR,KACvHM,EAAE9O,MAAMC,kBAAoB+N,GAAYc,EAAE9O,MAAMxC,KAAOgR,GAASM,EAAE5O,IAAID,kBAAoB8N,GAAce,EAAE5O,IAAI1C,KAAO+Q,MAMjI,SAASQ,GAAkBjQ,GACvB,MAAO,CACHA,QCzRR,ICAIkQ,GDCWC,GADDC,aDiCP,WAA+D,IAA3C5F,EAA0C,uDAAlC+D,GAAcQ,EAAoB,uCAGjE,OAFAL,GAASlE,EAAM6F,WAAYtB,EAAQvE,GAE3BuE,EAAO/O,MACX,KAAKL,EAID,OAHIoP,EAAOxO,MAAM7B,IACbD,EAAqBsQ,EAAOxO,MAAM7B,GAAG4R,YAElC,2BACA9F,GADP,IAEI+F,MAAOxB,EAAOxO,MACdJ,KAAM4O,EAAOxO,MAAMJ,KACnBI,MAAOsB,EAAYkN,EAAOxO,MAAMA,OAChCiQ,aAAa,IAErB,KAAKrR,EACD,OAAO,2BACAqL,GADP,IAEIjK,MAAOwO,EAAOxO,QAEtB,KAAKhB,EACD,OAAO,2BACAiL,GADP,IAEI+F,WAAO1C,EACP1N,KAAM,WACNI,MJkBL,CACH4B,UAAW,CACPC,cAAe,SACfC,OAAQ,SAERC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,MACRC,OAAQ,OAEZC,SAAU,CACNC,OAAQ,EACRC,QAAS,EACTC,MAAO,EACPf,cAAe,SACfgB,WAAY,UAEhBC,OAAQ,CACJjB,cAAe,SACfgB,WAAY,SACZE,OAAQ,EACRC,SAAU,GAEdC,OAAQ,CACJC,SAAU,SACVC,UAAW,SACXC,MAAO,SACPC,eAAgB,SAChBC,UAAW,EACXC,YAAa,EACbC,WAAY,EACZC,aAAc,GAElBC,WAAY,CACRR,SAAU,SACVC,UAAW,SACXQ,SAAU,SACVC,MAAO,EACPC,QAAS,EACTC,OAAQ,EACRC,SAAU,EACVC,WAAY,GAEhBC,MAAO,CACHC,YAAa,SACbC,UAAW,SACXC,UAAW,SACXC,OAAQ,EACRC,SAAU,EACVC,OAAQ,EACRC,SAAU,GAEdC,OAAQ,CACJC,cAAe,UAEnBjE,YAAa,MI7Eb,KAAKpC,EACD,OAAO,2BACA4L,GADP,IAEIjK,MAAM,2BACCiK,EAAMjK,OADR,kBAEAwO,EAAOlP,OAFP,2BAGM2K,EAAMjK,MAAMwO,EAAOlP,SAHzB,kBAIIkP,EAAOjP,MAAQiH,KAAK8F,IAAI9F,KAAK6F,IAAImC,EAAOhP,MAAO,GAAI,YAIpE,KAAKlB,EACD,OAAO,2BACA2L,GADP,IAEIjK,MAAM,2BACCiK,EAAMjK,OADR,kBAEAwO,EAAOlP,OAFP,2BAGM2K,EAAMjK,MAAMwO,EAAOlP,SAHzB,kBAIIkP,EAAOjP,MAAQiP,EAAOhP,YAIvC,KAAKjB,EACD,OAAO,2BACA0L,GADP,IAEIgE,WAAYY,GACR5E,EAAMgE,WACNO,EAAO5N,gBACP4N,EAAOrQ,GACPqQ,EAAO5I,EACP4I,EAAO3I,KAGnB,KAAKrH,EACD,OAAO,2BACAyL,GADP,IAEIjK,MAAM,2BACCiK,EAAMjK,OADR,IAEDS,YAAauO,GACT/E,EAAMjK,MAAMS,YACZ+N,EAAOE,WACPF,EAAOU,QACPV,EAAOG,SACPH,EAAOW,WAIvB,KAAK1Q,EACD,OAAO,2BACAwL,GADP,IAEIjK,MAAM,2BACCiK,EAAMjK,OADR,IAEDS,YAAa+O,GACTvF,EAAMjK,MAAMS,YACZ+N,EAAOE,WACPF,EAAOU,QACPV,EAAOG,SACPH,EAAOW,WAIvB,KAAKzQ,EACD,OAAO,2BACAuL,GADP,IAEIiG,UAAW1B,EAAO5O,OAE1B,KAAKjB,EACD,OAAO,2BACAsL,GADP,IAEI6F,WAAYtB,EAAO5O,OAE3B,KAAKf,EACD,OAAO,2BACAoL,GADP,IAEIrK,KAAM+G,EAAe6H,EAAO5O,QAEpC,KAAKX,EACD,OAAO,2BACAgL,GADP,IAEIkG,MAAOT,GAAkBlB,EAAO4B,aAExC,KAAKjR,EACD,OAAO,2BACA8K,GADP,IAEIkG,MAAO,CACH1Q,KAAM,OACN4Q,YAAa7B,EAAOxO,SAGhC,KAAKd,EACD,OAAO,2BACA+K,GADP,IAEIkG,WAAO7C,IAEf,KAAKxO,EACD,OAAO,2BACAmL,GADP,IAEIiE,UAAWM,EAAO8B,QAE1B,KAAKvR,EACD,OAAO,2BACAkL,GADP,IAEIgG,YAAazB,EAAO+B,SAIhC,OAAOtG,K,SEpKIuG,K,8EAAf,sBAAAC,EAAA,mFAESd,KAAmBA,GAAoBe,UAAUC,kBAAkB,CAAEC,OAAO,KAFrF,kBAGWjB,IAHX,4C,sBAMO,SAAekB,KAAtB,gC,8CAAO,oCAAAJ,EAAA,sEACkBD,KADlB,OACGM,EADH,OAGGnP,EAA0B,GAH7B,cAIiBmP,EAAOC,SAJxB,IAIH,2BAAWC,EAAyB,QAChCrP,EAAIqD,KAAK,CAACgM,EAAM,GAAIA,EAAM,GAAGpR,OAL9B,uDAOI+B,GAPJ,4C,sBAUA,SAAesP,KAAtB,gC,8CAAO,oCAAAR,EAAA,sEACkBD,KADlB,OACGM,EADH,OAGGnP,EAA0B,GAH7B,cAIiBmP,EAAOI,QAJxB,IAIH,2BAAWF,EAAwB,QAC/BrP,EAAIqD,KAAK,CAACgM,EAAM,GAAIA,EAAM,GAAGpR,OAL9B,uDAOI+B,GAPJ,4C,sBAUA,SAAe8M,GAAtB,qC,8CAAO,WAA+BF,EAAgBjO,GAA/C,iBAAAmQ,EAAA,sEACkBD,KADlB,OACGM,EADH,QAEGnP,EAAMmP,EAAOC,QAAQI,IAAI5C,KAG3B5M,EAAIyP,KAAK9Q,GALV,4C,oEASA,WAAqCiO,EAAgB8C,EAAwBC,EAAuDC,GAApI,iBAAAd,EAAA,sEACkBD,KADlB,UACGM,EADH,OAGGnP,EAAMmP,EAAOC,QAAQI,IAAI5C,GAH5B,0EAMI,IAAIiD,SAAc,SAACC,EAASC,GAC/B,IAAIC,EAAe,EACfC,EAAcC,aAAY,WAC1B,UAAIN,QAAJ,IAAIA,OAAJ,EAAIA,EAAmBpR,YAGnB,OAFA2R,cAAcF,QACdH,IAIJ,GAAIE,IAAiBN,EAAStM,OAA9B,CAcA,IACQuM,GAAYA,EAAWK,EAAcN,EAAStM,QAEtD,UAIA,IACIpD,EAAIyP,KAAKC,EAASM,IAEtB,MAAOpI,GAGH,OAFAuI,cAAcF,QACdF,EAAOnI,GAIXoI,QA9BA,CACIG,cAAcF,GAEd,IACQN,GAAYA,EAAWK,EAAcN,EAAStM,QAEtD,UAIA0M,OAqBLM,UA9CJ,4C,sBAkDA,SAAeC,GAAtB,mC,8CAAO,WAA4CC,GAA5C,SAAAxB,EAAA,sEACkBD,KADlB,cAEI0B,iBAAiB,cAAeD,GAFpC,4C,sBAKA,SAAeE,GAAtB,mC,8CAAO,WAA+CF,GAA/C,SAAAxB,EAAA,sEACkBD,KADlB,cAEI4B,oBAAoB,cAAeH,GAFvC,4C,sBAKA,SAASF,KACZ,OAAQnC,GAAMyC,WAAWnE,WACrB,IAAK,YAAa,OAAO,IACzB,IAAK,OAAQ,OAAO,IACpB,IAAK,SAAU,OAAO,GACtB,IAAK,OAAQ,OAAO,I,UC5FfoE,GAAQ,SAACpJ,GAAuB,IACnC9C,EAAkD8C,EAAlD9C,GAAIC,EAA8C6C,EAA9C7C,GAAIC,EAA0C4C,EAA1C5C,GAAIC,EAAsC2C,EAAtC3C,GAAIgM,EAAkCrJ,EAAlCqJ,WAAYC,EAAsBtJ,EAAtBsJ,SAAUC,EAAYvJ,EAAZuJ,QAE5C,GAAIrM,EAAKE,EAAI,CACT,IAAIwG,EAAO1G,EACXA,EAAKE,EACLA,EAAKwG,EACLA,EAAOzG,EACPA,EAAKE,EACLA,EAAKuG,EAIT,IAAM1B,EAAIjF,EAASC,EAAIC,EAAIC,EAAIC,GACzBmM,EAAU,YAAQtM,EAAR,YAAcC,EAAd,eAAuBC,EAAKF,GAAM,EAAlC,YAAuCI,KAAK8F,IAAI9F,KAAK6F,IAAI,GAAI,IAAMjB,EAAI,IAAK,KAA5E,YAAoF9E,EAAKF,EAAzF,YAA+FG,EAAKF,GAEpH,OAAO,qBAAGgD,UAAW,SAAWmJ,EAAW,YAAc,IAAlD,UACH,uBACInJ,UAAU,WACV+B,EAAGsH,EACHzH,OAAO,uBACPtB,KAAK,OACLgJ,YAAa,GACbC,cAAc,QACdH,QAASA,IAEb,uBACIrH,EAAGsH,EACHzH,OAAM,4BAAuBsH,EAAa,EAApC,KACN5I,KAAK,OACLgJ,YAAa,GACbC,cAAc,QACdH,QAASA,QCxBfI,I,MAAY,MACZC,GAAe,IACfC,GAAc,GA6GpB,IAAMlJ,GAAqB,CACvBxK,uBAGS2T,GAAYhJ,aAbzB,SAAyBC,EAAcC,GAAgB,IAAD,EAClD,OAAKD,EAEE,2BACAC,GADP,IAEI1K,MAAK,UAAGyK,EAAMjK,MAAckK,EAAS5K,eAAhC,aAAE,EAAwC4K,EAAS+I,SAJzC,KAY2BpJ,GAAzBG,EA9GI,SAACd,GAAuB,IACzCpI,EAAuEoI,EAAvEpI,MAAO4J,EAAgExB,EAAhEwB,KAAME,EAA0D1B,EAA1D0B,IAAKsI,EAAqDhK,EAArDgK,MAAO1T,EAA8C0J,EAA9C1J,MAAOF,EAAuC4J,EAAvC5J,OAAQ2T,EAA+B/J,EAA/B+J,MAAO5T,EAAwB6J,EAAxB7J,oBAsDjDqC,GAAU,EAAKlC,EAAQqT,IAAcC,GAE3C,OAAO,qBACHzJ,UAAU,cACVgB,UAAS,oBAAeK,EAAf,aAAwBE,EAAxB,KACTN,IAzDiB,SAAC6I,GAClB,GAAKA,GACDC,OAAOC,aAAc,CACrB,IAUIC,OAA+BhG,EAE7BiG,EAAY,SAAChK,GACX+J,GAAUE,qBAAqBF,GACnCA,EAAWG,uBAAsB,WAC7BH,OAAWhG,EAfG,SAAC/D,GACnB,GAAKA,EAAEmK,QAAP,CACA,IAAMnJ,EAAO4I,EAAE3I,wBAETmJ,EAAajO,EAAgByN,EAAE1I,gBAAkBlB,EAAEqK,QAASrK,EAAEsK,SAC9DC,EAAYpO,EAAgByN,EAAE1I,gBAAkBF,EAAKG,KAAMH,EAAKK,KAEtEvL,EAAoBC,EAAQ2T,GAAS,GAAMU,EAAW9N,EAAIiO,EAAUjO,GAAKiN,IAAiBD,GAAa,IASnGkB,CAAcxK,OAItB4J,EAAEjB,iBAAiB,cAAeqB,GAClCJ,EAAEjB,iBAAiB,cAAeqB,KAkCtCS,UA9Bc,SAACzK,GACD,YAAVA,EAAEqC,KAA+B,eAAVrC,EAAEqC,KAAkC,WAAVrC,EAAEqC,KACnDvM,EAAoBC,EAAQ2T,EAAOzM,KAAK8F,IAAI9M,EAAQ,IAAKqT,KACzDtJ,EAAE0K,iBACF1K,EAAE2K,mBAEa,cAAV3K,EAAEqC,KAAiC,cAAVrC,EAAEqC,KAAiC,aAAVrC,EAAEqC,KACzDvM,EAAoBC,EAAQ2T,EAAOzM,KAAK6F,IAAI7M,EAAQ,IAAK,IACzD+J,EAAE0K,iBACF1K,EAAE2K,mBAEa,QAAV3K,EAAEqC,KACPvM,EAAoBC,EAAQ2T,EAAOJ,IACnCtJ,EAAE0K,iBACF1K,EAAE2K,mBAEa,SAAV3K,EAAEqC,MACPvM,EAAoBC,EAAQ2T,EAAO,GACnC1J,EAAE0K,iBACF1K,EAAE2K,oBAYNC,SAAU,EACVC,KAAK,SACLC,gBAAe,EACfC,gBAAezB,GACf0B,gBAAe/U,EACfgV,aAAY1G,GAAgBxO,EAAQ2T,GACpCwB,mBAAiB,WAXd,UAYH,uBAAMpL,UAAU,iBACZM,KAAM7I,EACN+J,OAAQiI,GACRnI,MAAOoI,EACPnN,EAAGmN,EACHlN,EAAG,EACH6O,YAAY,MACZC,GAAI5B,IACJ9H,OAAO,yBACX,uBAAM5B,UAAU,wBACZM,KAAM7I,EACN+J,OAAQiI,GAAepR,EACvBiJ,MAAOoI,EACPnN,EAAGmN,EACHlN,EAAGnE,EACHiT,GAAI5B,IACJ9H,OAAO,yBACX,yBAAQ5B,UAAU,qBACdM,KAAM7I,EACNkK,EA1FS,GA2FTF,GAAIiI,IACJhI,GAAIrJ,EACJuJ,OAAO,yBACX,uBAAMN,MAAOoI,GAAalI,OAAQiI,GAAclN,EAAE,IAAIC,EAAE,IAAI+O,QAAQ,MACnE1B,GAAS,eAAC,GAAD,CAAWrK,KAAMqK,EAAOtN,EAAGmN,IAAiBlN,EAAGiN,IAAmB3J,OAAO,iBCrGrF0J,GAAY,KACZgC,GAAc,GAgIpB,IAAMhL,GAAqB,CACvBxK,uBAGSyV,GAAO9K,aAbpB,SAAyBC,EAAcC,GAAgB,IAAD,EAClD,OAAKD,EAEE,2BACAC,GADP,IAEI1K,MAAK,UAAGyK,EAAMjK,MAAckK,EAAS5K,eAAhC,aAAE,EAAwC4K,EAAS+I,SAJzC,KAYsBpJ,GAAzBG,EAjII,SAACd,GAAsB,IACnCpI,EAA2DoI,EAA3DpI,MAAO8E,EAAoDsD,EAApDtD,EAAGC,EAAiDqD,EAAjDrD,EAAGrG,EAA8C0J,EAA9C1J,MAAOF,EAAuC4J,EAAvC5J,OAAQ2T,EAA+B/J,EAA/B+J,MAAO5T,EAAwB6J,EAAxB7J,oBAErC0V,EAAW,IAAMvO,KAAKwO,GAAK,IAC3BC,EAAW,IAAMzO,KAAKwO,GAAK,IAC3BE,EAAQH,EAAYvV,EAAQqT,IAAcoC,EAAWF,GA8DrDI,EAAeD,EAAQH,EAAWvO,KAAKwO,GAAK,IAAM,IAExD,OAAO,qBACH3L,UAAU,aACVgB,UAAS,oBAAezE,EAAf,aAAqBC,EAArB,KACTyE,IAjEiB,SAAC6I,GAClB,GAAKA,GACDC,OAAOC,aAAc,CACrB,IAmBIC,OAA+BhG,EAE7BiG,EAAY,SAAChK,GACX+J,GAAUE,qBAAqBF,GACnCA,EAAWG,uBAAsB,WAC7BH,OAAWhG,EAxBG,SAAC/D,GACnB,GAAKA,EAAEmK,QAAP,CACA,IAAMnJ,EAAO4I,EAAE3I,wBAETmJ,EAAajO,EAAgByN,EAAE1I,gBAAkBlB,EAAEqK,QAASrK,EAAEsK,SAC9DC,EAAYpO,EAAgByN,EAAE1I,gBAAkBF,EAAKG,KAAOH,EAAKI,MAAQ,EAAGJ,EAAKK,IAAML,EAAKM,OAAS,GACvGqK,EAAQ1O,KAAK4O,MAAMzB,EAAW9N,EAAIiO,EAAUjO,EAAG8N,EAAW/N,EAAIkO,EAAUlO,GACxEsP,EAAQH,EACRG,GAAmB,EAAV1O,KAAKwO,GAETE,EAAQD,IACbC,GAAmB,EAAV1O,KAAKwO,IAGdE,EAAQH,GAAYG,EAAQD,GAEhC5V,EAAoBC,EAAQ2T,EAAOzM,KAAK8F,IAAIuG,GAAqF,EAA1ErM,KAAK6F,IAAI,GAAM6I,EAAQH,IAAaE,EAAWF,GAAalC,OAS/GkB,CAAcxK,OAItB4J,EAAEjB,iBAAiB,cAAeqB,GAClCJ,EAAEjB,iBAAiB,cAAeqB,KAiCtCY,SAAU,EACVC,KAAK,SACLC,gBAAe,EACfC,gBAAezB,GACf0B,gBAAe/U,EACfgV,aAAY1G,GAAgBxO,EAAQ2T,GACpCe,UAnCc,SAACzK,GACD,YAAVA,EAAEqC,KAA+B,eAAVrC,EAAEqC,KAAkC,WAAVrC,EAAEqC,KACnDvM,EAAoBC,EAAQ2T,EAAOzM,KAAK8F,IAAI9M,EAAQ,IAAKqT,KACzDtJ,EAAE0K,iBACF1K,EAAE2K,mBAEa,cAAV3K,EAAEqC,KAAiC,cAAVrC,EAAEqC,KAAiC,aAAVrC,EAAEqC,KACzDvM,EAAoBC,EAAQ2T,EAAOzM,KAAK6F,IAAI7M,EAAQ,IAAK,IACzD+J,EAAE0K,iBACF1K,EAAE2K,mBAEa,QAAV3K,EAAEqC,KACPvM,EAAoBC,EAAQ2T,EAAOJ,IACnCtJ,EAAE0K,iBACF1K,EAAE2K,mBAEa,SAAV3K,EAAEqC,MACPvM,EAAoBC,EAAQ2T,EAAO,GACnC1J,EAAE0K,iBACF1K,EAAE2K,oBAMH,UAWH,uBACI7K,UAAU,kBACV+B,EAAC,YAAO5E,KAAK6O,IAAIN,GAAYF,GAA5B,YAA2CrO,KAAK8O,IAAIP,GAAYF,GAAhE,cAAiFA,GAAjF,YAAgGA,GAAhG,kBAAqHrO,KAAK6O,IAAIJ,GAAYJ,GAA1I,YAAyJrO,KAAK8O,IAAIL,GAAYJ,IAC/K5J,OAAO,uBACPtB,KAAK,OACLiJ,cAAc,QACdD,YAAa4C,KAEjB,uBACIlM,UAAU,UACV+B,EAAC,YAAO5E,KAAK6O,IAAIN,GAAYF,GAA5B,YAA2CrO,KAAK8O,IAAIP,GAAYF,GAAhE,cAAiFA,GAAjF,YAAgGA,GAAhG,kBAAqHrO,KAAK6O,IAAIJ,GAAYJ,GAA1I,YAAyJrO,KAAK8O,IAAIL,GAAYJ,IAC/K5J,OAAO,yBACPtB,KAAK,OACLiJ,cAAc,QACdD,YAhGW,KAkGf,uBACItJ,UAAU,kBACV+B,EAAC,YAAO5E,KAAK6O,IAAIN,GAAYF,GAA5B,YAA2CrO,KAAK8O,IAAIP,GAAYF,GAAhE,cAAiFA,GAAjF,YAAgGA,GAAhG,cAAiHM,EAAjH,cAAmI3O,KAAK6O,IAAIH,GAASL,GAArJ,YAAoKrO,KAAK8O,IAAIJ,GAASL,IACvL5J,OAAO,uBACPtB,KAAK,OACLiJ,cAAc,QACdD,YAAa4C,KAEjB,uBACIlM,UAAU,UACV+B,EAAC,YAAO5E,KAAK6O,IAAIN,GAAYF,GAA5B,YAA2CrO,KAAK8O,IAAIP,GAAYF,GAAhE,cAAiFA,GAAjF,YAAgGA,GAAhG,cAAiHM,EAAjH,cAAmI3O,KAAK6O,IAAIH,GAASL,GAArJ,YAAoKrO,KAAK8O,IAAIJ,GAASL,IACvL5J,OAAQnK,EACR6I,KAAK,OACLiJ,cAAc,QACdD,YAAa4C,KAEjB,uBAAM5K,MAAOkK,GAAiBhK,OAAQgK,GAAiBjP,GAAG,GAAcC,GAAG,GAAc+O,QAAQ,YC3H5FY,GAAU,SAACtM,GAAkD,IAC9DyB,EAAoDzB,EAApDyB,MAAOE,EAA6C3B,EAA7C2B,OAAQH,EAAqCxB,EAArCwB,KAAME,EAA+B1B,EAA/B0B,IAAKsI,EAA0BhK,EAA1BgK,MAAOvJ,EAAmBT,EAAnBS,KAAM8L,EAAavM,EAAbuM,SAE/C,OAAO,qBAAGpM,UAAU,UAAUgB,UAAS,oBAAeK,EAAf,aAAwBE,EAAxB,KAAhC,UACH,uBACIhF,EAAG,EAAGC,EAAG,EACT8E,MAAOA,EACPE,OAAQA,EACR8H,YAAa,EACbhJ,KAAMA,GAAQ,OACdsB,OAAO,yBACVwK,EACAvC,GAAS,eAAC,GAAD,CAAWtN,EAAG+E,EAAQ,EAAG9E,EAAGgF,EAAS,GAAIhC,KAAMqK,EAAO/J,OAAO,eCQzEuM,I,MAAe,IA4FrB,IAAM7L,GAAqB,CACvBnK,wBAGSiW,GAAe3L,aAb5B,SAAyBC,EAAcC,GAAgB,IAAD,EAClD,OAAKD,EAEE,2BACAC,GADP,IAEI1K,MAAK,UAAGyK,EAAMjK,MAAckK,EAAS5K,eAAhC,aAAE,EAAwC4K,EAAS3K,SAJzC,KAY8BsK,GAAzBG,EA5FI,SAACd,GAA8B,IACnDpI,EAA0HoI,EAA1HpI,MAAO4J,EAAmHxB,EAAnHwB,KAAME,EAA6G1B,EAA7G0B,IAAKpL,EAAwG0J,EAAxG1J,MAAOoW,EAAiG1M,EAAjG0M,UAAWC,EAAsF3M,EAAtF2M,aAAcC,EAAwE5M,EAAxE4M,aAAcxW,EAA0D4J,EAA1D5J,OAAQC,EAAkD2J,EAAlD3J,MAAOwW,EAA2C7M,EAA3C6M,OAAkBrW,GAAyBwJ,EAAnC8M,SAAmC9M,EAAzBxJ,sBAErGqL,EAAK2K,GAEK,WAAVlW,EACAuL,EAAKkL,GAEU,WAAVzW,IACLuL,EAAKkL,IAGT,IAAMxD,EAAU,SAAClJ,GAGb,OAFC,OAADA,QAAC,IAADA,KAAG0K,iBACF,OAAD1K,QAAC,IAADA,KAAG2K,kBACK1U,GACJ,IAAK,SAAU,OAAOE,EAAqBJ,EAAQC,EAAO,OAC1D,IAAK,SAAU,OAAOG,EAAqBJ,EAAQC,EAAO,UAC1D,IAAK,MAAO,OAAOG,EAAqBJ,EAAQC,EAAOwW,EAAS,SAAW,YAanF,OAAO,qBACH1M,UAAU,eACVgB,UAAS,oBAAeK,EAAf,aAAwBE,EAAxB,KACT6H,QAASA,EACTuB,UAbc,SAACzK,GACf,IAAM2M,EAA8B,iBAAX3M,EAAE4M,MAAqB5M,EAAE4M,MAAQ5M,EAAE6M,QAC3C,KAAbF,GAA4C,KAAbA,IAC/B3M,EAAE0K,iBACFxB,MAUJ0B,SAAU,EALP,UAMH,uBAAM9K,UAAU,kBACZM,KAAK,yBACLkB,OA5CU,GA6CVF,MAAO+K,GACPf,GAAIe,GACJzK,OAAO,uBACPrF,EAAG,EACHC,EAAG,IACP,yBACIiF,GAAI4K,GACJ3K,GAAIA,EACJC,EAAGqL,IACH1M,KAAM7I,EACNmK,OAAO,yBAEV2K,GACG,eAAC,GAAD,CACIhQ,EAAG8P,GACH7P,EAAG6P,GACH7M,KAAM+M,EACNxM,UAAU,WAGjByM,GACG,eAAC,GAAD,CACIjQ,EAAG8P,GACH7P,EAAIoQ,GACJpN,KAAMgN,EACNzM,UAAU,WAGjB0M,GACG,eAAC,GAAD,CACIlQ,EAAG8P,GACH7P,EAAGoQ,GACHpN,KAAMiN,EACN1M,UAAU,iBCjB1B,ICxFIkN,GACAC,GDuFE1M,GAAqB,CACvBxK,sBACAK,wBAGS8W,GAAwBxM,aAbrC,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,eACAA,EAAMjK,MAAM0D,YAHA,KAYuCmG,GAAzBG,EApFI,SAACd,GAAuC,IAEzEtF,EAQAsF,EARAtF,MACAC,EAOAqF,EAPArF,QACAF,EAMAuF,EANAvF,SACAT,EAKAgG,EALAhG,SACAY,EAIAoF,EAJApF,OACAC,EAGAmF,EAHAnF,SACAC,EAEAkF,EAFAlF,WACAb,EACA+F,EADA/F,UAEJ,OAAO,gBAAC,GAAD,CAASuH,KAAM,IAAKE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAlD,UACH,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,uBACxD,eAAC,GAAD,CAASxI,KAAM,EAAGE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,WAAzD,SACI,eAACyC,GAAD,CACI7U,MAAM,kCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,KACVE,aAAa,MAEbtW,MAAO0D,EACP6S,QAAQ,EACRzW,OAAQ,aAAcC,MAAO,eAGrC,eAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,WAA1D,SACI,eAACyC,GAAD,CACI7U,MAAM,kCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,IACVE,aAAa,IAEbtW,MAAOmE,EACPoS,QAAQ,EACRzW,OAAQ,aAAcC,MAAO,eAGrC,gBAAC,GAAD,CAASmL,KAAM,IAAKE,IAAK,GAAID,MAAO,IAAKE,OAAQ,IAAKqI,MAAM,SAA5D,UACI,eAAC4B,GAAD,CACIlP,EAAG,GACHC,EAAG,GACHrG,MAAOwE,EACPlD,MAAM,kCACNxB,OAAQ,aACR2T,MAAO,eAEX,eAAC0C,GAAD,CACI7U,MAAM,kCACN8J,IAAK,GACLF,KAAM,GAENlL,MAAO2D,EACP7D,OAAQ,aAAcC,MAAO,cAEjC,uBAAM8J,UAAU,YAAY4B,OAAO,uBAAuB0H,YAAY,IAAIhJ,KAAK,OAAOyB,EAAE,mEACxF,uBAAM/B,UAAU,YAAY4B,OAAO,uBAAuB0H,YAAY,IAAIhJ,KAAK,OAAOyB,EAAE,mHACxF,uBAAM/B,UAAU,YAAY4B,OAAO,uBAAuB0H,YAAY,IAAIhJ,KAAK,OAAOyB,EAAE,0EAE5F,gBAAC,GAAD,CAASV,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAhD,UACI,eAACmI,GAAD,CAAWtI,KAAM,GAAIE,IAAK,GAAIpL,MAAOqE,EAAS/C,MAAM,kCAAkCxB,OAAQ,aAAc2T,MAAO,YACnH,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAOoE,EAAO9C,MAAM,kCAAkCoS,MAAM,QAAQ5T,OAAQ,aAAc2T,MAAO,UAChI,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAOuE,EAAUjD,MAAM,kCAAkCxB,OAAQ,aAAc2T,MAAO,aACrH,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAOsE,EAAQhD,MAAM,kCAAkCoS,MAAM,SAAS5T,OAAQ,aAAc2T,MAAO,oBErEjIwD,GAAkB,SAACvN,GAC5B,OAAO,gBAAC,GAAD,CAASwB,KAAM,KAAME,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAnD,UACH,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,sBACxD,eAAC,GAAD,CAASxI,KAAM,EAAGE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,gBAAzD,SAEA,eAACyC,GAAD,CACQ7U,MAAM,iCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,SACVC,aAAa,iBACbC,aAAa,SAEbxW,OAAQ,QAASC,MAAO,kBAGhC,gBAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,cAA1D,UACI,eAACyC,GAAD,CACI7U,MAAM,iCACN8J,IAAK,EACLF,KAAM,GACNwI,MAAM,SAEN5T,OAAQ,QAASC,MAAO,cAG5B,eAACoW,GAAD,CACI7U,MAAM,iCACN8J,IAAK,EACLF,KAAM,IACNwI,MAAM,SAEN5T,OAAQ,QAASC,MAAO,cAG5B,eAAC,GAAD,CACIqG,EAAG,IACHC,EAAG,GACHgD,KAAM,gBACNM,OAAO,SACPC,UAAU,WAGd,eAAC,GAAD,CACIxD,EAAG,IACHC,EAAG,GACHgD,KAAM,cACNM,OAAO,SACPC,UAAU,WAGd,eAAC,GAAD,CACIxD,EAAG,IACHC,EAAG,GACHgD,KAAM,yBACNM,OAAO,SACPC,UAAU,cAGlB,gBAAC,GAAD,CAASsB,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAhD,UACI,eAACmI,GAAD,CAAWtI,KAAM,GAAIE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,iCAAiCxB,OAAQ,QAAS2T,MAAO,aACvG,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,iCAAiCoS,MAAM,SAAS5T,OAAQ,QAAS2T,MAAO,WACvH,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,iCAAiCxB,OAAQ,QAAS2T,MAAO,aACxG,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,iCAAiCoS,MAAM,SAAS5T,OAAQ,QAAS2T,MAAO,kBCjEtHyD,GAAoB,SAACxN,GAC9B,OAAO,gBAAC,GAAD,CAASwB,KAAM,IAAKE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAlD,UACH,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,uBACxD,eAAC,GAAD,CAASxI,KAAM,EAAGE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,iBAAzD,SACI,eAACyC,GAAD,CACI7U,MAAM,kCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,WACVC,aAAa,SACbC,aAAa,YAEbxW,OAAQ,WAAYC,MAAO,oBAGnC,eAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,cAA1D,SACI,eAACyC,GAAD,CACI7U,MAAM,kCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,YACVC,aAAa,YACbC,aAAa,OAEbxW,OAAQ,WAAYC,MAAO,iBAGnC,gBAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAhD,UACI,eAACmI,GAAD,CAAWtI,KAAM,GAAIE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,kCAAkCoS,MAAM,SAAS5T,OAAQ,WAAY2T,MAAO,WAC1H,eAACD,GAAD,CAAWtI,KAAM,GAAIE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,kCAAkCoS,MAAM,UAAU5T,OAAQ,WAAY2T,MAAO,YAC3H,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,kCAAkCoS,MAAM,QAAQ5T,OAAQ,WAAY2T,MAAO,iBChCzH0D,GAAuB,SAACzN,GACjC,OAAO,gBAAC,GAAD,CAASwB,KAAM,IAAKE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAlD,UACH,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,0BACxD,eAAC,GAAD,CAASxI,KAAM,EAAGE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,WAAzD,SACI,eAACyC,GAAD,CACI7U,MAAM,qCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,KACVE,aAAa,MAEbtW,MAAO,MACPuW,QAAQ,EACRzW,OAAQ,SAAUC,MAAO,eAGjC,gBAAC,GAAD,CAASmL,KAAM,IAAKE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,YAA3D,UACI,eAACyC,GAAD,CACI7U,MAAM,qCACN8J,IAAK,EACLF,KAAM,GAENlL,MAAO,MACPF,OAAQ,SAAUC,MAAO,cAE7B,uBAAM8J,UAAU,YAAY4B,OAAO,uBAAuB0H,YAAY,IAAIhJ,KAAK,OAAOyB,EAAE,mEACxF,uBAAM/B,UAAU,YAAY4B,OAAO,uBAAuB0H,YAAY,IAAIhJ,KAAK,OAAOyB,EAAE,kHACxF,uBAAM/B,UAAU,YAAY4B,OAAO,uBAAuB0H,YAAY,IAAIhJ,KAAK,OAAOyB,EAAE,yEAE5F,eAAC,GAAD,CAASV,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,QAA1D,SACI,eAACyC,GAAD,CACI7U,MAAM,qCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,OACVE,aAAa,MAEbtW,MAAO,MACPuW,QAAQ,EACRzW,OAAQ,SAAUC,MAAO,YAGjC,eAAC,GAAD,CAASmL,KAAM,IAAKE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,aAA5D,SACI,eAACyC,GAAD,CACI7U,MAAM,qCACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,WACVC,aAAa,YACbC,aAAa,YAEbtW,MAAO,MACPF,OAAQ,SAAUC,MAAO,qBAGjC,gBAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAhD,UACI,eAACmI,GAAD,CAAWtI,KAAM,GAAIE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,qCAAqCxB,OAAQ,SAAU2T,MAAO,gBAC5G,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,qCAAqCoS,MAAM,YAAY5T,OAAQ,SAAU2T,MAAO,cAC/H,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,qCAAqCxB,OAAQ,SAAU2T,MAAO,iBAC7G,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,qCAAqCoS,MAAM,aAAa5T,OAAQ,SAAU2T,MAAO,sBC9D/H2D,GAAW,SAAC1N,GACrB,OAAO,gBAAC,GAAD,CAASwB,KAAM,EAAGE,IAAK,IAAKD,MAAO,KAAME,OAAQ,IAAjD,UACH,gBAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,IAA9C,UACI,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,oBACxD,eAACnJ,GAAD,CACInE,EAAG,GACHC,EAAG,GACH/E,MAAM,8BACNF,gBAAiBoI,EAAgB6N,YACjChO,KAAK,UACT,eAACkB,GAAD,CACInE,EAAG,GACHC,EAAG,GACH/E,MAAM,iCACNF,gBAAiBoI,EAAgB8N,eACjC3Y,GAAI,EACJ0K,KAAK,aACT,eAACkB,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,8BACNF,gBAAiBoI,EAAgB+N,YACjClO,KAAK,aAEb,gBAAC,GAAD,CAAS6B,KAAM,IAAKE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,IAAhD,UACI,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,mBAExD,eAAC,GAAD,CAASxI,KAAM,EAAGE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,iBAAzD,SACI,eAACyC,GAAD,CACI7U,MAAM,8BACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,WACVC,aAAa,SACbC,aAAa,YAEbtW,MAAO,MACPF,OAAQ,SAAUC,MAAO,uBAIrC,gBAAC,GAAD,CAASmL,KAAM,IAAKE,IAAK,EAAGD,MAAO,KAAME,OAAQ,IAAjD,UACI,eAACd,GAAD,CACInE,EAAG,GACHC,EAAG,GACH/E,MAAM,qBACNF,gBAAiBoI,EAAgBgO,oBACjC7M,MAAM,QACNhM,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,GACHC,EAAG,GACH/E,MAAM,yBACNF,gBAAiBoI,EAAgBiO,wBACjC9Y,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,GACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,SACNvJ,gBAAiBoI,EAAgBkO,qBACjC/Y,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,QACNvJ,gBAAiBoI,EAAgBmO,mBACjChZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,8BACNF,gBAAiBoI,EAAgBoO,aACjCjZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,OACNvJ,gBAAiBoI,EAAgBqO,kBACjClZ,GAAI,IAER,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,kCACNF,gBAAiBoI,EAAgBsO,wBACjCnZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,iCACNF,gBAAiBoI,EAAgB8N,eACjC3Y,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,OACNvJ,gBAAiBoI,EAAgBuO,8BAGrC,eAACxN,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,sBACNF,gBAAiBoI,EAAgBwO,aACjCrZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,8BACNF,gBAAiBoI,EAAgBoO,aACjCjZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,OACNvJ,gBAAiBoI,EAAgByO,+BAGrC,eAAC1N,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,yBACNF,gBAAiBoI,EAAgBiO,wBACjC9Y,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,iCACNF,gBAAiBoI,EAAgB8N,eACjC3Y,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,OACNvJ,gBAAiBoI,EAAgB0O,uBAGrC,eAAC3N,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,kCACNF,gBAAiBoI,EAAgBsO,wBACjCnZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,8BACNF,gBAAiBoI,EAAgBoO,aACjCjZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,OACNvJ,gBAAiBoI,EAAgB2O,wBAErC,eAAC5N,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,sBACNF,gBAAiBoI,EAAgBwO,aACjCrZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,iCACNF,gBAAiBoI,EAAgB8N,eACjC3Y,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,OACNvJ,gBAAiBoI,EAAgB4O,mBAErC,eAAC7N,GAAD,CACInE,EAAG,KACHC,EAAG,GACH/E,MAAM,kCACNF,gBAAiBoI,EAAgBsO,wBACjCnZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,KACHC,EAAG,GACH/E,MAAM,8BACNF,gBAAiBoI,EAAgBoO,aACjCjZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,KACHC,EAAG,GACH/E,MAAM,qBACNqJ,MAAM,OACNvJ,gBAAiBoI,EAAgB6O,mBAErC,eAAC9N,GAAD,CACInE,EAAG,KACHC,EAAG,GACH/E,MAAM,sBACNF,gBAAiBoI,EAAgBwO,aACjCrZ,GAAI,IACR,eAAC4L,GAAD,CACInE,EAAG,KACHC,EAAG,GACH/E,MAAM,iCACNF,gBAAiBoI,EAAgB8N,eACjC3Y,GAAI,WCpNP2Z,GAAS,SAAC5O,GACnB,OAAO,gBAAC,GAAD,CAASwB,KAAM,IAAKE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAlD,UACH,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,WACxD,eAAC,GAAD,CAASxI,KAAM,EAAGE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,iBAAzD,SACI,eAACyC,GAAD,CACI7U,MAAM,sBACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,WACVC,aAAa,OACbC,aAAa,YAEbtW,MAAO,MACPF,OAAQ,SAAUC,MAAO,oBAGjC,eAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,OAA1D,SACI,eAACyC,GAAD,CACI7U,MAAM,sBACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,YACVC,aAAa,MACbC,aAAa,OAEbtW,MAAO,MACPF,OAAQ,SAAUC,MAAO,iBAGjC,gBAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAhD,UACI,eAACmI,GAAD,CAAWtI,KAAM,GAAIE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,sBAAsBxB,OAAQ,SAAU2T,MAAO,aAC7F,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,sBAAsBoS,MAAM,SAAS5T,OAAQ,SAAU2T,MAAO,kBChC5G8E,GAAY,SAAC7O,GACtB,OAAO,gBAAC,GAAD,CAASwB,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAhD,UACH,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,8BACxD,eAAC,GAAD,CAASxI,KAAM,EAAGE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,iBAAzD,SACI,eAACyC,GAAD,CACI7U,MAAM,yBACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,WACVC,aAAa,SACbC,aAAa,MAEbtW,MAAO,MACPF,OAAQ,YAAaC,MAAO,oBAGpC,eAAC,GAAD,CAASmL,KAAM,IAAKE,IAAK,GAAID,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,SAA3D,SACI,eAACyC,GAAD,CACI7U,MAAM,yBACN8J,IAAK,EACLF,KAAM,GAENkL,UAAU,IACVC,aAAa,IACbC,aAAa,IAEbtW,MAAO,MACPF,OAAQ,YAAaC,MAAO,aAGpC,gBAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,iBAA1D,UACI,eAAC,GAAD,CAAWtN,EAAG,GAAIC,EAAG,GAAIgD,KAAK,MAC9B,eAAC,GAAD,CAAWjD,EAAG,GAAIC,EAAG,GAAIgD,KAAK,MAC9B,eAAC,GAAD,CAAWjD,EAAG,IAAKC,EAAG,GAAIgD,KAAK,MAC/B,eAAC,GAAD,CAAWjD,EAAG,IAAKC,EAAG,GAAIgD,KAAK,MAC/B,eAAC,GAAD,CAAWjD,EAAG,IAAKC,EAAG,GAAIgD,KAAK,MAC/B,eAAC8M,GAAD,CACI7U,MAAM,yBACN8J,IAAK,EACLF,KAAM,GAENlL,MAAO,MACPuW,QAAQ,EACRzW,OAAQ,YAAaC,MAAO,WAEhC,eAACoW,GAAD,CACI7U,MAAM,yBACN8J,IAAK,EACLF,KAAM,GAENlL,MAAO,MACPuW,QAAQ,EACRzW,OAAQ,YAAaC,MAAO,WAEhC,eAACoW,GAAD,CACI7U,MAAM,yBACN8J,IAAK,EACLF,KAAM,IAENlL,MAAO,MACPuW,QAAQ,EACRzW,OAAQ,YAAaC,MAAO,WAEhC,eAACoW,GAAD,CACI7U,MAAM,yBACN8J,IAAK,EACLF,KAAM,IAENlL,MAAO,MACPuW,QAAQ,EACRzW,OAAQ,YAAaC,MAAO,WAEhC,eAACoW,GAAD,CACI7U,MAAM,yBACN8J,IAAK,EACLF,KAAM,IAENlL,MAAO,MACPuW,QAAQ,EACRzW,OAAQ,YAAaC,MAAO,cAGpC,gBAAC,GAAD,CAASmL,KAAM,EAAGE,IAAK,IAAKD,MAAO,IAAKE,OAAQ,IAAKqI,MAAM,2BAA3D,UACI,eAACF,GAAD,CAAWtI,KAAM,GAAIE,IAAK,GAAIpL,MAAO,IAAKsB,MAAM,yBAAyBxB,OAAQ,YAAa2T,MAAO,aACrG,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,KAAMsB,MAAM,yBAAyBxB,OAAQ,YAAa2T,MAAO,aACvG,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,KAAMsB,MAAM,yBAAyBxB,OAAQ,YAAa2T,MAAO,aACvG,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,yBAAyBxB,OAAQ,YAAa2T,MAAO,aACpG,eAACD,GAAD,CAAWtI,KAAM,IAAKE,IAAK,GAAIpL,MAAO,EAAGsB,MAAM,yBAAyBxB,OAAQ,YAAa2T,MAAO,oBN/F1G+E,GAAgB,W,SAePC,K,8EAAf,sBAAAxH,EAAA,0DACQ6F,GADR,yCACoBA,IADpB,cAGSC,KACDA,GAAc,IAAI/E,SAAQ,SAACC,EAASC,GAEhC,IAAMwG,EAAUC,UAAUC,KAAKJ,GAAe,GAE9CE,EAAQG,QAAU,SAAAC,GACd5G,KAGJwG,EAAQK,gBAAkB,SAAAD,GACtB,IACME,EADKN,EAAQhT,OACIuT,kBACnB,UACA,CACIC,eAAe,EACfC,QAAS,OAGjBH,EAAYI,YAAY,OAAQ,OAAQ,CAAEC,QAAQ,IAClDL,EAAYI,YAAY,QAAS,QAAS,CAAEC,QAAQ,IACpDL,EAAYI,YAAY,UAAW,UAAW,CAAEC,QAAQ,IACxDL,EAAYI,YAAY,cAAe,cAAe,CAAEC,QAAQ,IAChEL,EAAYI,YAAY,gBAAiB,gBAAiB,CAAEC,QAAQ,KAGxEX,EAAQY,UAAY,SAAAR,GAChBhC,GAAM4B,EAAQhT,OACduM,EAAQ6E,SA9BxB,kBAmCWC,IAnCX,4C,+BAsCewC,G,iFAAf,WAAgC5a,GAAhC,eAAAsS,EAAA,sEACqBwH,KADrB,cACUe,EADV,yBAGW,IAAIxH,SAAQ,SAACC,EAASC,GACzB,IAEMwG,EAFcc,EAAGC,YAAY,CAAC,WAAY,aAChBT,YAAY,WAChBrH,IAAIhT,GAChC+Z,EAAQG,QAAU,SAAAC,GACd5G,KAEJwG,EAAQY,UAAY,SAAAR,GAChB7G,EAAQyG,EAAQhT,aAX5B,4C,+BAgBegU,G,iFAAf,WAA6BlI,GAA7B,eAAAP,EAAA,sEACqBwH,KADrB,cACUe,EADV,yBAGW,IAAIxH,SAAoB,SAACC,EAASC,GACrC,IAEMwG,EAFcc,EAAGC,YAAY,CAAC,WAAY,aAChBT,YAAY,WAChBW,IAAInI,GAChCkH,EAAQG,QAAU,SAAAC,GACd5G,KAEJwG,EAAQY,UAAY,SAAAR,GAChB7G,EAAQ,2BACDT,GADA,IAEH7S,GAAI+Z,EAAQhT,eAb5B,4C,+BAmBekU,G,iFAAf,WAAgCpI,GAAhC,eAAAP,EAAA,sEACqBwH,KADrB,cACUe,EADV,yBAGW,IAAIxH,SAAQ,SAACC,EAASC,GACzB,IACM8G,EADcQ,EAAGC,YAAY,CAAC,WAAY,aAChBT,YAAY,WACtCa,EAAO,2BACNrI,GADM,IAETsI,cAAe/R,KAAKP,QAElBkR,EAAUM,EAAYe,IAAIF,GAChCnB,EAAQG,QAAU,SAAAC,GACd5G,KAEJwG,EAAQY,UAAY,SAAAR,GAChB7G,EAAQ,2BACD4H,GADA,IAEHlb,GAAI+Z,EAAQhT,eAjB5B,4C,+BAuBesU,K,8EAAf,4BAAA/I,EAAA,sEACqBwH,KADrB,cACUe,EADV,yBAGW,IAAIxH,SAAQ,SAACC,EAASC,GACzB,IAEMwG,EAFcc,EAAGC,YAAY,CAAC,WAAY,aAChBT,YAAY,WAChBiB,aAEtBC,EAA2B,GAEjCxB,EAAQG,QAAU,SAAAC,GACd5G,KAGJwG,EAAQY,UAAY,SAAAR,GAChB,IAAMqB,EAASzB,EAAQhT,OAEnByU,GACAD,EAAW1U,KAAK2U,EAAOna,OACvBma,EAAOC,YAGPnI,EAAQiI,QAtBxB,4C,sBA4BO,SAAeG,GAAtB,uC,8CAAO,WAA8Bja,EAAcI,EAAc8Z,GAA1D,eAAArJ,EAAA,6DACGO,EAAQ,CACVpR,OACAI,MAAOK,EAAYL,GACnB8Z,UACAC,YAAaxS,KAAKP,MAClBsS,cAAe/R,KAAKP,OANrB,SASUkS,GAAclI,GATxB,oF,sBAYA,SAAegJ,GAAtB,mC,8CAAO,WAAgChJ,GAAhC,SAAAP,EAAA,sEACU2I,GAAiBpI,GAD3B,oF,sBAIA,SAAeiJ,GAAtB,mC,8CAAO,WAA6B9b,GAA7B,SAAAsS,EAAA,sEACUsI,GAAiB5a,GAD3B,oF,oEAIA,sBAAAsS,EAAA,sEACU+I,KADV,oF,gCOrJMU,GAAa,SAAChR,GAAqD,IACpEuM,EAAwCvM,EAAxCuM,SAAU/K,EAA8BxB,EAA9BwB,KAAME,EAAwB1B,EAAxB0B,IAAKhE,EAAmBsC,EAAnBtC,MAAO6L,EAAYvJ,EAAZuJ,QAUpC,OAAO,qBACHpI,UAAS,oBAAeK,EAAf,YAAuBE,EAAvB,KACTvB,UAAU,cACVmL,aAAY5N,EACZ6L,QAASA,EACTuB,UAbc,SAACmG,GACA,UAAXA,EAAGvO,MACH6G,IACA0H,EAAGlG,iBACHkG,EAAGjG,oBAUPC,SAAU,EACVC,KAAK,SAPF,UAQH,uBACInJ,OAAO,uBACPN,MAvBc,GAwBdE,OAxBc,GAyBdlB,KAAK,4BAEL,oBAAGU,UAAS,oBAAe,EAAf,IAAoB,EAApB,KAAZ,SACKoL,QCtCJ2E,GAAe,kBAC5B,uBACIhP,EAAE,sFACFH,OAAO,uBACPtB,KAAK,6BCLI0Q,GAAa,kBACtB,uCACI,uBACIjP,EAAE,4LAYFH,OAAO,uBACPtB,KAAK,4BACT,uBACIyB,EAAE,qMAYFH,OAAO,uBACPtB,KAAK,gCC/BJ2Q,GAAW,kBAAM,uCAC1B,yBACI3Q,KAAK,0BACLsB,OAAO,uBACPH,GAAG,KACHC,GAAG,KACHC,EAAE,SAEN,uBACIrB,KAAK,0BACLsB,OAAO,uBACPG,EAAE,gDAGN,yBACIzB,KAAK,0BACLsB,OAAO,uBACPH,GAAG,OACHC,GAAG,KACHC,EAAE,QAEN,yBACIrB,KAAK,0BACLsB,OAAO,uBACPH,GAAG,QACHC,GAAG,QACHC,EAAE,QAEN,yBACIrB,KAAK,0BACLsB,OAAO,uBACPH,GAAG,KACHC,GAAG,OACHC,EAAE,QAEN,yBACIrB,KAAK,0BACLsB,OAAO,uBACPH,GAAG,QACHC,GAAG,QACHC,EAAE,QAEN,yBACIrB,KAAK,0BACLsB,OAAO,uBACPH,GAAG,OACHC,GAAG,KACHC,EAAE,YC9CGuP,GAAW,kBACpB,uBACAnP,EAAE,wVACFH,OAAO,uBACPtB,KAAK,6BCSI6Q,I,MAAa,SAACtR,GAA4B,IAC3C1J,EAA8C0J,EAA9C1J,MAAOkL,EAAuCxB,EAAvCwB,KAAME,EAAiC1B,EAAjC0B,IAAKoL,EAA4B9M,EAA5B8M,SAAUrL,EAAkBzB,EAAlByB,MAAOE,EAAW3B,EAAX2B,OADO,EAER4P,aAFQ,mBAE1CC,EAF0C,KAE5BC,EAF4B,KAiBlD,OAAO,qBAAGtQ,UAAS,oBAAeK,EAAf,YAAuBE,EAAvB,KAA+BvB,UAAU,cAArD,UACH,uBACIsB,MAAOA,EACPE,OAAQA,EACRlB,KAAK,OACLsB,OAAO,yBAEX,gCACIN,MAAOA,EACPE,OAAQA,EAFZ,SAGI,wBACIpL,KAAK,OACLD,WAAuB8N,GAAhBoN,EAA4Blb,EAAQkb,EAC3C1E,SA1BW,SAACmE,GACpBQ,EAAgBR,EAAGS,cAAcpb,QA0BzBqb,OAvBQ,SAACV,GACbO,GAAc1E,EAAS0E,GAC3BC,OAAgBrN,IAsBR0G,UAnBM,SAACmG,GACA,UAAXA,EAAGvO,KAAiBuO,EAAGS,cAAcE,iBCiJjD,IAAMjR,GAAqB,CACvBhK,uBACAkb,kB3BtEG,SAA2B3K,GAC9B,MAAO,CACHA,YACA3Q,KAAMR,I2BoEVc,0BAGSib,GAAShR,aAxBtB,SAAyBC,EAAcC,GACnC,IAAKD,EAAO,MAAO,GAEnB,IAAIgR,GAAiBhR,EAAM+F,MAM3B,OAJI/F,EAAM+F,QACNiL,EAAgBhR,EAAMgG,aAAehG,EAAM+F,MAAMpQ,OAASqK,EAAMrK,MAG7D,2BACAsK,GADP,IAEIgR,UAAWjR,EAAMrK,KACjBoQ,MAAO/F,EAAM+F,MACbhQ,MAAOiK,EAAMjK,MACbib,oBAUuCpR,GAAzBG,EAxJI,SAACd,GAAwB,IAG3CiS,EAFID,EAA4GhS,EAA5GgS,UAAWlL,EAAiG9G,EAAjG8G,MAAOhQ,EAA0FkJ,EAA1FlJ,MAAOib,EAAmF/R,EAAnF+R,cAAepb,EAAoEqJ,EAApErJ,qBAAsBkb,EAA8C7R,EAA9C6R,kBAAmBhb,EAA2BmJ,EAA3BnJ,uBAOnFqb,EAAa,uCAAG,4BAAA3K,EAAA,0DAEdT,EAFc,gCAGKgK,GAAiB,2BAC7BhK,GAD4B,IAE/BhQ,MAAOK,EAAYL,GACnB8Z,QAASrS,EAAiB0T,GAC1Bvb,KAAMsb,KAPI,OAGdG,EAHc,6CAWKxB,GAAeqB,EAAWlb,EAAOyH,EAAiB0T,IAXvD,OAWdE,EAXc,cAclBtb,EAAuBsb,GAdL,4CAAH,qDAkBnB,OAAO,gBAAC,GAAD,CAAS3Q,KAAM,EAAGE,IAAK,EAAGD,MAAO,KAAME,OAAQ,IAA/C,UACH,oBAAGP,IAvBW,SAACA,GACXA,IAAK6Q,EAAS7Q,EAAIG,oBAuBtB,gBAAC,GAAD,CAASC,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,IAA9C,UACI,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,0BACxD,eAAC,GAAD,CACIxI,KAAM,GACNE,IAAK,GACLhE,MAAM,gBACN6L,QAAS,kBAAMsI,EAAkB,SAJrC,SAKI,eAAC,GAAD,MAEJ,eAAC,GAAD,CACIrQ,KAAM,GACNE,IAAK,GACLhE,MAAM,aACN6L,QAAS2I,EAJb,SAKI,eAAC,GAAD,MAEJ,eAAC,GAAD,CACI1Q,KAAM,IACNE,IAAK,GACLhE,MAAM,sBACN6L,QAAS,kBAAMsI,EAAkB,aAJrC,SAKI,eAAC,GAAD,MAEJ,eAAC,GAAD,CACIrQ,KAAM,IACNE,IAAK,GACLhE,MAAM,cACN6L,QAAS,kBAAMsI,EAAkB,SAJrC,SAKI,eAAC,GAAD,MAEJ,eAAC,GAAD,CACIrQ,KAAM,IACNE,IAAK,GACLC,OAAQ,GACRF,MAAO,IACPqL,SAAUnW,EACVL,MAAO0b,IAEX,eAACnR,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,qCACNF,gBAAiBoI,EAAgBsS,mBACjCzS,KAAK,kBAEb,gBAAC,GAAD,CAAS6B,KAAM,IAAKE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,IAAhD,cACI,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,gBACxD,eAACnJ,GAAD,CACInE,EAAG,GACHC,EAAG,GACH/E,MAAM,qBACNF,gBAAiBoI,EAAgBuS,WACjC1S,KAAK,aACT,eAACkB,GAAD,CACInE,EAAG,MACHC,EAAG,GACH/E,MAAM,iCACNF,gBAAiBoI,EAAgBwS,aACjCrd,GAAI,EACJ0K,KAAK,iBACT,eAACkB,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,iCACNF,gBAAiBoI,EAAgByS,aACjC5S,KAAK,oBAEb,gBAAC,GAAD,CAAS6B,KAAM,KAAME,IAAK,EAAGD,MAAO,IAAKE,OAAQ,IAAjD,cACI,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,aAOxD,eAACnJ,GAAD,CACInE,EAAG,GACHC,EAAG,GACH/E,MAAM,qBACNF,gBAAiBoI,EAAgB0S,yBACjC7S,KAAK,iBAEb,gBAAC,GAAD,CAAS6B,KAAM,KAAME,IAAK,EAAGD,MAAO,IAAKE,OAAQ,IAAjD,UACI,eAAC,GAAD,CAASH,KAAM,EAAGE,IAAK,EAAGD,MAAO,IAAKE,OAAQ,GAAIqI,MAAM,gCACvD+H,GACG,qBAAG5Q,UAAU,oBAAb,UACI,eAAC,GAAD,CAAWhB,UAAU,MAAMzD,EAAG,GAAIC,EAAG,GAAIgD,KAAK,YAAYM,OAAO,WACjE,eAAC,GAAD,CAAWE,UAAU,MAAMzD,EAAG,GAAIC,EAAG,GAAIgD,KAAK,SAASM,OAAO,cAGtE,eAACY,GAAD,CACInE,EAAG,IACHC,EAAG,GACH/E,MAAM,yBACNF,gBAAiBoI,EAAgB2S,uBACjC9S,KAAK,yB,8CC1HrB,WAAyBlJ,GAAzB,qBAAA8Q,EAAA,sEACyBI,KADzB,OACUK,EADV,qBAEwBA,GAFxB,IAEI,4BAC0C,KAD/B0K,EAAiB,SACd,GAAGnW,QAAQ,aACjB9F,EAAsBic,EAAM,IAJxC,8BAOIC,QAAQC,IAAR,kBAAuB5K,EAAO1H,KAAK,OAPvC,4C,sBAwLA,IAAMK,GAAqB,CACvBkS,kB5B5JG,SAA2BrN,EAA6BQ,EAAiBP,EAA2BQ,GACvG,MAAO,CACH1P,KAAMjB,EACNkQ,aACAQ,UACAP,WACAQ,U4BuJJxP,wBACAqc,qB5BpJG,SAA8BtN,EAA6BQ,EAAiBP,EAA2BQ,GAC1G,MAAO,CACH1P,KAAMhB,EACNiQ,aACAQ,UACAP,WACAQ,W4BiJK8M,GAAQjS,aAhBrB,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,2BACAC,GADP,IAEI+D,WAAYhE,EAAMgE,WAClBxN,YAAawJ,EAAMjK,MAAMS,cALV,KAeuBoJ,GAAzBG,EApLI,SAACd,GAAuB,IAUzCiS,EATIlN,EAA4F/E,EAA5F+E,WAAYxN,EAAgFyI,EAAhFzI,YAAasb,EAAmE7S,EAAnE6S,kBAAmBC,EAAgD9S,EAAhD8S,qBAAsBrc,EAA0BuJ,EAA1BvJ,sBAD9B,EAGV8a,aAHU,mBAGrCyB,EAHqC,KAG1BC,EAH0B,OAId1B,aAJc,mBAIrC2B,EAJqC,KAI5BC,EAJ4B,KAM5C5B,aAAgB,Y,qCACZ6B,CAAU3c,KACX,IAQH8a,aAAgB,WACZ,IAAM8B,EAAe,SAACC,GAA6B,IAAD,gBAC1BvO,GAD0B,IAC9C,2BAAgC,CAAC,IAAtBnI,EAAqB,QAC5B,GAAIK,EAASqW,EAAc5W,EAAG4W,EAAc3W,EAAGC,EAAMF,EAAGE,EAAMD,IA/B1D,GAgCA,OAAOC,GAH+B,gCAQ5C2W,EAAgB,SAACtC,GACnB,IAAMrU,EAAQJ,EAAgByV,EAAQhB,EAAGvG,QAASuG,EAAGtG,SAC/C6I,EAAYH,EAAazW,GAE3B4W,IACAP,EAAaO,GACbvC,EAAGlG,iBACHkG,EAAGjG,oBAILyI,EAAc,SAACxC,GACjB,GAAK+B,EAAL,CACA,IAAMpW,EAAQJ,EAAgByV,EAAQhB,EAAGvG,QAASuG,EAAGtG,SAC/C6I,EAAYH,EAAazW,GAE/B,GAAI4W,EAAW,CACX,IAAME,EAAY5T,EAAgBkT,EAAWtb,iBACvCic,EAAU7T,EAAgB0T,EAAU9b,kBAEW,IAAhCgc,EAAUnX,QAAQ,aACU,IAA9BoX,EAAQpX,QAAQ,WAG/BsW,EACIG,EAAWtb,gBACXsb,EAAW/d,GACXue,EAAU9b,gBACV8b,EAAUve,IAKtBge,OAAa7O,GACb+O,OAAW/O,KAGTwP,EAAgB,SAAC3C,GACnB,GAAK+B,EAAL,CAEA,IAAMpW,EAAQJ,EAAgByV,EAAQhB,EAAGvG,QAASuG,EAAGtG,SACrDwI,EAAWvW,GACXqU,EAAGlG,iBACHkG,EAAGjG,oBAGD6I,EAAiB,SAAC5C,GACpBgC,OAAa7O,GACb+O,OAAW/O,IAQf,OALA6N,EAAOjJ,iBAAiB,cAAeuK,GACvCtB,EAAOjJ,iBAAiB,YAAayK,GACrCxB,EAAOjJ,iBAAiB,cAAe4K,GAAe,GACtD3B,EAAOjJ,iBAAiB,eAAgB6K,GAEjC,WACH5B,EAAO/I,oBAAoB,cAAeqK,GAC1CtB,EAAO/I,oBAAoB,YAAauK,GACxCxB,EAAO/I,oBAAoB,cAAe0K,GAAe,GACzD3B,EAAO/I,oBAAoB,eAAgB2K,MAEhD,CAACb,EAAWjO,IAwBf,IAtBA,IAAMmB,EAAyB,GACzB4N,EAAS/O,EAAWlJ,OAAStE,EAAYqO,KAAI,SAACW,EAAGwN,GACnD,IAAMtc,EAAQsN,EAAWvC,MAAK,SAAAqD,GAAC,OAAIU,EAAE9O,MAAMC,kBAAoBmO,EAAEnO,iBAAmB6O,EAAE9O,MAAMxC,KAAO4Q,EAAE5Q,MAC/F0C,EAAMoN,EAAWvC,MAAK,SAAAqD,GAAC,OAAIU,EAAE5O,IAAID,kBAAoBmO,EAAEnO,iBAAmB6O,EAAE5O,IAAI1C,KAAO4Q,EAAE5Q,MAC/F,GAAKwC,GAAUE,EAEf,OADAuO,EAAYK,EAAE3O,QAAS,EAChB,eAAC,GAAD,CAEHsF,GAAIzF,EAAOiF,EACXS,GAAI1F,EAAOkF,EACXS,GAAIzF,EAAK+E,EACTW,GAAI1F,EAAKgF,EACT0M,WAAY9C,EAAE3O,MACd2R,QAAS,kBAAMuJ,EACXvM,EAAE9O,MAAMC,gBACR6O,EAAE9O,MAAMxC,GACRsR,EAAE5O,IAAID,gBACN6O,EAAE5O,IAAI1C,MAVL8e,MAYR,GAED5N,EAAYD,EAAYrK,OACnB5D,EAAI,EAAGA,EAAIiO,EAAYrK,OAAQ5D,IACpC,IAAKiO,EAAYjO,GAAI,CACjBkO,EAAYlO,EACZ,MAIR,OAAO,uBAAK+b,QAAQ,eAAeC,MAAM,6BAA6B7S,IA1GjD,SAACA,GACdA,IAAK6Q,EAAS7Q,IAyGf,UACH,gCACI,0BAASnM,GAAG,UACJyH,EAAE,IAAIC,EAAE,IAAI8E,MAAM,IAAIE,OAAO,IAC7BuS,aAAa,iBACbC,iBAAiB,cAHzB,SAKI,uBACIzX,EAAG,EACHC,EAAG,EACH8E,MAAO,EACPE,OAAQ,EACRlB,KAAK,6BAIjB,qBAAGN,UAAU,gBAAgBgB,UAAU,kBAAvC,UACI,eAAC2Q,GAAD,IACA,eAAC,GAAD,IACA,eAAC,GAAD,IACA,eAAC,GAAD,IACA,eAAC,GAAD,IACA,eAACxE,GAAD,IACA,eAAC,GAAD,IACA,eAAC,GAAD,IACEwG,EACD/O,GACGA,EAAWa,KAAI,SAAAC,GAAC,OACZ,yBAAQ1F,UAAU,aAAayB,GAAIiE,EAAEnJ,EAAGmF,GAAIgE,EAAElJ,EAAGmF,EA9JjD,GA8JiE4J,QAAS,OAGjFsH,GACG,eAAC,GAAD,CACI1J,UAAU,EACVpM,GAAI8V,EAAUtW,EACdS,GAAI6V,EAAUrW,EACdS,GAAI8V,EAAUA,EAAQxW,EAAIsW,EAAUtW,EACpCW,GAAI6V,EAAUA,EAAQvW,EAAIqW,EAAUrW,EACpC0M,WAAYlD,a,MCtLzB,SAASiO,GAAiB/T,GAC7B,IAAM2M,EAA8B,iBAAX3M,EAAE4M,MAAqB5M,EAAE4M,MAAQ5M,EAAE6M,QAC3C,KAAbF,GAA4C,KAAbA,IAC/B3M,EAAE0K,iBACF1K,EAAEqR,cAAc2C,SAIjB,SAASC,KAAyD,IAAD,uBAA3CC,EAA2C,yBAA3CA,EAA2C,gBACpE,OAAQA,EACHnU,QAAO,SAAAmG,GAAC,MAAiB,kBAANA,KACnBiO,QAAO,SAACC,EAAMlO,GAAP,OAAakO,EAAKpO,OAAOE,EAAEzD,MAAM,QAAO,IAC/C8C,KAAI,SAAAW,GAAC,OAAIA,EAAEmO,UACXtU,QAAO,SAAAmG,GAAC,QAAMA,KACdjG,KAAK,KCMP,IAAMqU,GAAS,SAAC3U,GAAwB,IAEvC/K,EAyBA+K,EAzBA/K,GACAkL,EAwBAH,EAxBAG,UACAzB,EAuBAsB,EAvBAtB,MACAkW,EAsBA5U,EAtBA4U,UACAC,EAqBA7U,EArBA6U,WACAC,EAoBA9U,EApBA8U,gBACAC,EAmBA/U,EAnBA+U,aACAC,EAkBAhV,EAlBAgV,aACAC,EAiBAjV,EAjBAiV,aACAC,EAgBAlV,EAhBAkV,aACAC,EAeAnV,EAfAmV,YACAC,EAcApV,EAdAoV,aACAlK,EAaAlL,EAbAkL,KACA3B,EAYAvJ,EAZAuJ,QACA8L,EAWArV,EAXAqV,UACA1D,EAUA3R,EAVA2R,OACA2D,EASAtV,EATAsV,UACA5X,EAQAsC,EARAtC,MACAsM,EAOAhK,EAPAgK,MACAuL,EAMAvV,EANAuV,SACAC,EAKAxV,EALAwV,UACAC,EAIAzV,EAJAyV,aACAC,EAGA1V,EAHA0V,KACAC,EAEA3V,EAFA2V,OACA1K,EACAjL,EADAiL,SAIA2K,EACA5V,EADA4V,SAMErB,EAAUD,GACZ,gBACAnU,GALJyV,EAAWA,GAAYH,IAMP,YAUhB,OACI,yBACIxgB,GAAIA,EACJkL,UAAWoU,EACX7V,MAAOA,EACPhB,MAAOA,EACP0D,IAAKkU,EACL/L,QAAUqM,OAA0BxR,EAdzB,SAAC6M,GACZ1H,GAASA,IACTmM,GAAMxL,OAAOgF,KAAKwG,EAAMC,GAAU,SAAU,uBAChD1E,EAAGjG,kBACHiG,EAAGlG,kBAWCD,UAAWuK,GAAajB,GACxBzC,OAAQA,EACRzG,KAAMA,GAAQ,SACdD,SAAUA,IAAa2K,GAAY,EAAI,GACvCA,SAAUH,EACVnK,aAAYsJ,EACZiB,cAAahB,EACbiB,gBAAef,EACfgB,gBAAef,EACfgB,gBAAef,EACfgB,gBAAef,EACfgB,eAAcf,EACdgB,mBAAkBrB,EAClBsB,gBAAehB,EApBnB,SAqBQ,wBAAMjV,UAAU,qBAAhB,UACKoV,GAAY,oBAAGpV,UAAWoV,EAAUM,eAAa,IAClD,uBAAM1V,UAAU,sBAAhB,SACK6J,IAEJwL,GAAa,oBAAGrV,UAAW,SAAWqV,EAAWK,eAAa,UC1FtEQ,GAAY,SAACrW,GAA2B,IAa7CsW,EACAC,EAZAthB,EASA+K,EATA/K,GACAkL,EAQAH,EARAG,UACA+K,EAOAlL,EAPAkL,KACA2J,EAMA7U,EANA6U,WACAD,EAKA5U,EALA4U,UACA4B,EAIAxW,EAJAwW,eACAjK,EAGAvM,EAHAuM,SACAkK,EAEAzW,EAFAyW,oBACAC,EACA1W,EADA0W,sBAwFJ,OACI,sBAAKzhB,GAAIA,EACLkL,UAAWA,EACX+K,KAAMA,EACND,SAAUuL,OAAiBpS,EAAY,EACvC0G,UA9DU,SAACzK,GAAyC,IAAD,EACvD,GAAK,UAACiW,SAAD,aAAC,EAAmBza,OAAzB,CAEA,IAAM8Z,EAAShX,SAASgY,cAClB5C,EAAQuC,EAAkB/Z,QAAQoZ,GAElCiB,EAAQ,SAACC,GACXA,EAAQD,QACJH,GAAqBA,EAAoBI,KAGlC,IAAX9C,GAAgB4B,IAAWY,IAEjB,UAAVlW,EAAEqC,KAA6B,MAAVrC,EAAEqC,KACvBrC,EAAE0K,iBACF1K,EAAE2K,kBAEE2K,EAAOtB,MACPsB,EAAOtB,QAIPsB,EAAOmB,cAAc,IAAIC,MAAM,WAG9B1W,EAAEqC,OAASgU,EAAwB,YAAc,eAClD3C,IAAUuC,EAAkBza,OAAS,GAAK8Z,IAAWY,EACrDK,EAAMN,EAAkB,IAGxBM,EAAMN,EAAkBvC,EAAQ,IAEpC1T,EAAE0K,iBACF1K,EAAE2K,mBAEG3K,EAAEqC,OAASgU,EAAwB,UAAY,cAEhDE,EADU,IAAV7C,GAAe4B,IAAWY,EACpBD,EAAkBA,EAAkBza,OAAS,GAG7Cya,EAAkBhZ,KAAK6F,IAAI4Q,EAAQ,EAAG,KAEhD1T,EAAE0K,iBACF1K,EAAE2K,mBAEa,SAAV3K,EAAEqC,KACPkU,EAAMN,EAAkB,IACxBjW,EAAE0K,iBACF1K,EAAE2K,mBAEa,QAAV3K,EAAEqC,MACPkU,EAAMN,EAAkBA,EAAkBza,OAAS,IACnDwE,EAAE0K,iBACF1K,EAAE2K,sBAUF5J,IAxFU,SAACA,GACf,GAAKA,IAAOmV,EAAZ,CAEAA,EAAYnV,EAEZ,IAAM4V,EAAY5V,EAAI5B,iBAAJ,sDAClB8W,EAAoB,GANmB,oBAQjBU,EAAUC,UARO,IAQvC,2BAA0C,CAAC,IAAhCJ,EAA+B,QACtCP,EAAkBxa,KAAK+a,GAGvBA,EAAQ3X,aAAa,WAAY,MACjC2X,EAAQ3X,aAAa,mBAAoB,SAbN,8BAgBvC,GAAIsX,EAAgB,CAChB,IAAMU,EAAeX,EAAUtX,cAAc,IAAMuX,GAE/CU,GACAA,EAAahY,aAAa,WAAY,QAqE1C2W,cAAahB,EACbvJ,aAAYsJ,EAPhB,SAQKrI,KCzGA4K,GAAW,SAACnX,GAA0B,IAe3CoX,EAbAniB,EASA+K,EATA/K,GACAkL,EAQAH,EARAG,UACA0U,EAOA7U,EAPA6U,WACAD,EAMA5U,EANA4U,UACA1J,EAKAlL,EALAkL,KACAmM,EAIArX,EAJAqX,MACApM,EAGAjL,EAHAiL,SACAqM,EAEAtX,EAFAsX,WACAC,EACAvX,EADAuX,eAV0C,EAaZhG,YAAe,GAbH,mBAatCiG,EAbsC,KAa5BC,EAb4B,KA+BxClD,EAAUD,GAAU,kBAAmBnU,GAEvCuX,EAAWL,EAAM7U,MAAK,SAAA/C,GAAI,OAAIA,EAAKxK,KAAOqiB,MAAeD,EAAM,GA6BrE,OAAO,uBAAKlX,UAAWoU,EAASnT,IA7CL,SAACA,GACnBA,IACLgW,EAAYhW,IA2CyCuQ,OApC1C,SAACtR,GACP+W,GACDI,IAAaJ,EAAUO,SAAStX,EAAEuX,gBAA+BH,GAAY,IAkC9E,UACH,eAAC,GAAD,2BACQC,GADR,IAEIziB,GAAIA,EACJgW,SAAUA,EACVuK,UAAWgC,EAAW,aAAe,eACrCtM,KAAMA,EACN/K,UAAWmU,GAAU,yBAA0BkD,GAAY,WAAYE,EAASvX,WAChFoJ,QAhDkB,WACtBkO,GAAaD,IAgDTnC,UAjCU,SAAChV,GACf,IAAMwX,EAAgBR,EAAM9a,QAAQmb,GAEtB,cAAVrX,EAAEqC,IACEmV,EAAgBR,EAAMxb,OAAS,IAC/B0b,EAAeF,EAAMQ,EAAgB,GAAG5iB,IACxCoL,EAAE0K,iBACF1K,EAAE2K,mBAGS,YAAV3K,EAAEqC,IACHmV,EAAgB,IAChBN,EAAeF,EAAMQ,EAAgB,GAAG5iB,IACxCoL,EAAE0K,iBACF1K,EAAE2K,mBAGS,UAAV3K,EAAEqC,MACP+U,GAAY,GACZpX,EAAE0K,iBACF1K,EAAE2K,oBAcFiK,aAAa,UACbD,aAAcwC,EACd5C,UAAWA,EACXC,WAAYA,KAEf2C,GACG,eAAC,GAAD,CAAWtM,KAAK,UACZ/K,UAAU,mDACVqW,eAAgBc,EAChBQ,kBAAiB7iB,EACjByhB,uBAAuB,EACvBD,oBAjDU,SAACI,GACfA,EAAQ5hB,IAAMoiB,EAAMU,MAAK,SAAAtY,GAAI,OAAIA,EAAKxK,KAAO4hB,EAAQ5hB,OAAKsiB,EAAeV,EAAQ5hB,KA2CjF,SAMQ,qBAAIiW,KAAK,eAAT,SACMmM,EAAMzR,KAAI,SAAAnG,GAAI,OACZ,qBAAkByL,KAAK,eAAvB,SACI,eAAC,GAAD,2BACQzL,GADR,IAEIU,UAAWmU,GAAU,uBAAwB7U,EAAKU,WAClDoJ,QAAS,WACLkO,GAAY,GACZF,EAAe9X,EAAKxK,KAExBmgB,aAAc3V,EAAKxK,KAAOqiB,EAC1BpM,KAAK,aATJzL,EAAKxK,eC5B1C,IAAM0L,GAAqB,CACvB/J,oBACAH,yBAGSuhB,GAAqBlX,aAdlC,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,2BACAC,GADP,IAEI4F,WAAY7F,EAAM6F,aAJH,KAaoCjG,GAAzBG,EAvEH,SAACd,GAAoC,IACxDvJ,EAAsCuJ,EAAtCvJ,sBAAuBmQ,EAAe5G,EAAf4G,WADgC,EAGzB2K,IAAM0G,SAA6B,IAHV,mBAGxDC,EAHwD,KAG3CC,EAH2C,KAK/D5G,IAAM6G,WAAU,WACZ,IAAMC,EAAsB,uCAAG,4BAAA9Q,EAAA,sEACLI,KADK,OACrBE,EADqB,OAE3BsQ,EAAetQ,GAFY,2CAAH,qDAM5B,OADAiB,GAA6BuP,GACtB,WACHpP,GAAgCoP,MAErC,IAEH,IAjB+D,EAiBzDxQ,EAA0B,CAC5B,CACImC,MAAO,OACPtM,MAAO,OACPzI,GAAI,SArBmD,cAyB1CijB,GAzB0C,IAyB/D,2BAAkC,CAAC,IAAxBI,EAAuB,QAC9BzQ,EAAQ/L,KAAK,CACTkO,MAAOsO,EAAO,GACd5a,MAAO4a,EAAO,GACdrjB,GAAI,UAAYqjB,EAAO,MA7BgC,8BAiC/D,IAAIC,EAAiB,OAEjBL,EAAYH,MAAK,SAAA9f,GAAC,OAAIA,EAAE,KAAO2O,OAC/B2R,EAAiB,UAAY3R,GAQjC,OAAO,uBAAKzG,UAAU,cAAf,UACH,sBAAKA,UAAU,oBAAf,0BAGA,eAAC,GAAD,CACIlL,GAAG,cACHsiB,eAXiB,SAACtiB,GACHwB,EAAR,SAAPxB,OAAqCmP,EACdnP,EAAG6N,MAAM,KAAKsD,MAAM,GAAG9F,KAAK,OAUnD+W,MAAOxP,EACPyP,WAAYiB,UCpDXC,I,MAAY,SAACxY,GAA2B,IAW7CoX,EATA7K,EAOAvM,EAPAuM,SACAtX,EAMA+K,EANA/K,GACAkL,EAKAH,EALAG,UACAsY,EAIAzY,EAJAyY,SACAC,EAGA1Y,EAHA0Y,mBACAC,EAEA3Y,EAFA2Y,eACAC,EACA5Y,EADA4Y,uBAR4C,EAaZrH,YAAe,GAbH,mBAazCsH,EAbyC,KAa7BC,EAb6B,KAe1CC,EAAc,WAMhB,OLJD,SAAyCC,GAC5C,IADsE,EAChEvgB,EAAW,GADqD,cAGnDugB,GAHmD,IAGtE,2BAAyB,CAAC,IAAfC,EAAc,QACrBxgB,EAAIqD,KAAKmd,IAJyD,8BAMtE,OAAOxgB,EKPSygB,CACRN,EAAyBxB,EAAU5X,iBAAV,cACzB4X,EAAU5X,iBAAV,qCAgFR,OAAO,sBAAKvK,GAAIA,EACZkL,UAAWmU,GAAU,oBAAqBnU,GAC1CiB,IA5Ec,SAACA,GACVA,IACLgW,EAAYhW,EAEPuX,GAAmBE,GAAezX,EAAIuW,SAAShZ,SAASgY,iBAAkBoC,IAAcld,SACzFub,EAAUR,QAGVkC,GAAc,MAqElBhO,UAjEc,SAACzK,GACf,GAAK+W,EAAL,CAEA,IAAM+B,EAAY,SAACC,EAAkBC,GACjC,IAAMrC,EAAY+B,IAElB,GAAK/B,EAAUnb,OAAf,CAEA,IAAMkY,EAAQiD,EAAUza,QAAQ8D,EAAEsV,QAE9ByD,EACIC,EACArC,EAAUA,EAAUnb,OAAS,GAAG+a,QAE3B7C,IAAUiD,EAAUnb,OAAS,EAClCmb,EAAU,GAAGJ,QAGbI,EAAUjD,EAAQ,GAAG6C,QAIrByC,EACArC,EAAU,GAAGJ,QAEE,IAAV7C,EACLiD,EAAUA,EAAUnb,OAAS,GAAG+a,QAGhCI,EAAU1Z,KAAK6F,IAAI4Q,EAAQ,EAAG,IAAI6C,QAI1CvW,EAAE0K,iBACF1K,EAAE2K,oBAGQ,WAAV3K,EAAEqC,KACF+V,IACApY,EAAE0K,iBACF1K,EAAE2K,mBAEc,QAAV3K,EAAEqC,IACJrC,EAAEiZ,SAAUH,GAAU,GAAO,GAC5BA,GAAU,GAAM,GAEhBT,IACS,cAAVrY,EAAEqC,IACFyW,GAAU,GAAM,GAED,YAAV9Y,EAAEqC,IACPyW,GAAU,GAAO,GAEF,SAAV9Y,EAAEqC,IACPyW,GAAU,GAAO,GAEF,QAAV9Y,EAAEqC,KACPyW,GAAU,GAAM,MASxBlO,UAAW,EAJR,SAKFsB,MC/FIgN,GAAQ,SAACvZ,GAAgD,IAC1DtC,EAAsDsC,EAAtDtC,MAAO8b,EAA+CxZ,EAA/CwZ,aAAcC,EAAiCzZ,EAAjCyZ,QAASlN,EAAwBvM,EAAxBuM,SAAUpM,EAAcH,EAAdG,UAChD,OAAO,uBAAKA,UAAU,kBAAf,UACH,sBAAKA,UAAU,mBAAmBoJ,QAASiQ,IAC3C,sBAAKrZ,UAAW,CAAC,QAASA,GAAWC,QAAO,SAAAmG,GAAC,QAAMA,KAAGjG,KAAK,KAA3D,SACI,gBAAC,GAAD,CAAWmY,SAAUe,EAArB,UACI,uBAAKrZ,UAAU,wBAAf,UACI,sBAAKA,UAAU,cAAf,SACMzC,IAEN,yBAAQA,MAAM,QAAQ6L,QAASiQ,EAAcvO,SAAU,EAAvD,uBAEJ,sBAAK9K,UAAU,gBAAf,SACMoM,OAEH,OAACkN,QAAD,IAACA,OAAD,EAACA,EAAS5d,SACT,sBAAKsE,UAAU,gBAAf,SACKsZ,EAAQ7T,KAAI,SAAAN,GAAW,IACZ0E,EAA8B1E,EAA9B0E,MAAOT,EAAuBjE,EAAvBiE,QAASpJ,EAAcmF,EAAdnF,UACxB,OAAO,eAAC,GAAD,CAEHzC,MAAOsM,EACPA,MAAOA,EACPT,QAASA,EACTpJ,UAAWA,GAJNmF,EAAO0E,qBC4I5C,IAAMrJ,GAAqB,CACvB/J,oBACA8iB,qBpCzDG,SAA8BtS,GACjC,MAAO,CACHA,QACA7Q,KAAMX,KoCyDD+jB,GAAgB7Y,aAjB7B,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,2BACAC,GADP,IAEIlK,MAAOiK,EAAMjK,MACbkb,UAAWjR,EAAMrK,KACjBkQ,WAAY7F,EAAM6F,WAClB5B,UAAWjE,EAAMiE,YAPF,KAgB+BrE,GAAzBG,EApKI,SAACd,GAgB9B,IAhB6D,IACrDpJ,EAAqFoJ,EAArFpJ,kBAAmBE,EAAkEkJ,EAAlElJ,MAAOkb,EAA2DhS,EAA3DgS,UAAWpL,EAAgD5G,EAAhD4G,WAAY5B,EAAoChF,EAApCgF,UAAW0U,EAAyB1Z,EAAzB0Z,qBADR,EAGpBnI,WAAuB,QAHH,mBAGrDqI,EAHqD,KAGvCC,EAHuC,OAIpBtI,YAAe,GAJK,mBAIrDuI,EAJqD,KAIvCC,EAJuC,OAK5BxI,WAAe,GALa,mBAKrDyI,EALqD,KAK3CC,EAL2C,OAMV1I,aANU,mBAMrDlJ,EANqD,KAMlC6R,EANkC,KAQtDC,EAA4B,CAC9B,CACInQ,MAAO,OACP/U,GAAI,OACJyI,MAAO,SAINzF,EAAI,EAAGA,EAAI,GAAIA,IACpBkiB,EAAUre,KAAK,CACXkO,MAAO/R,EAAI,EAAI,KAAOA,EAAI,GAAK,IAAMA,EAAI,GACzCyF,MAAO,cAAgBzF,EAAI,GAC3BhD,GAAI,QAAUgD,IAItB,IA+BMwhB,EAAyB,IAE3BK,GAAgBlT,IAChB6S,EAAQ3d,KAAK,CACTkO,MAAO,SACPT,QAAS,WACDlB,GACAA,EAAkB+R,SAEtBxjB,QAKPkjB,GAAgBlT,GACjB6S,EAAQ3d,KAAK,CACTkO,MAAO,OACPT,QAAS,WACDlB,GAAmBA,EAAkB+R,SACzCL,GAAgB,GAEhB,IAAI5R,EAAWrE,GACXhN,GACA,EACAkb,EACiB,SAAjB4H,EAA0B5W,SAAS4W,EAAa9W,MAAM,KAAKsD,OAAO,GAAG,SAAMhC,GAI1D,SAAjBwV,IACAzR,EhCg2Bb,WACH,IAD0C,EACpCN,EAAU5L,OAAOC,KAAKmG,IAAejC,QAAO,SAAAsC,GAAG,OAA+B,IAA3BA,EAAInG,QAAQ,aAAkBqJ,KAAI,SAAAlD,GAAG,OAAIL,GAAcK,MAC1GsF,EAAS/L,OAAOC,KAAKmG,IAAejC,QAAO,SAAAsC,GAAG,OAA+B,IAA3BA,EAAInG,QAAQ,aAAkBqJ,KAAI,SAAAlD,GAAG,OAAIL,GAAcK,MAEzGyF,EAAW,GAJyB,cAKtBN,GALsB,IAK1C,2BAA6B,CAAC,IAAD,EAAlBwS,EAAkB,sBACNrS,GADM,IACzB,2BAA2B,CAAC,IAAjBsS,EAAgB,QACvBnS,EAASrM,KAAK+H,GAA0BwW,EAAOC,KAF1B,gCALa,8BAW1C,OAAOnS,EgC32BoBoS,GAA8BlU,OAAO8B,IAGpD,IAAMqS,EAAQ,IAAIxjB,EAClBkjB,EAAqBM,G7BrE9B,SAAP,yC6BuEgBC,CAAsB7T,EAAauB,GAAU,SAAC1M,EAASif,GACnDT,EAAY3c,KAAKqd,MAAOlf,EAAUif,EAAS,QAC5CF,GACFzc,MAAK,WACFmc,OAAqB9V,GACrBxN,UAMhB,IAAM6J,EAAO,uBACPma,EAAQ,0BAEd,OAAO,gBAAC,GAAD,CACHld,MAAM,sBACN8b,aAAc5iB,EACd6iB,QAASA,EAHN,WAIDK,GACE,uCACI,eAAC9B,GAAD,IACA,uBAAK7X,UAAU,cAAf,UACI,sBAAKA,UAAU,oBAAf,wBAGA,eAAC,GAAD,CACIlL,GAAG,qBACHsiB,eA9FO,SAACtiB,GACxB4kB,EAAgB5kB,IA8FAoiB,MAAO8C,EACP7C,WAAYsC,OAGpB,uBAAKzZ,UAAU,cAAf,UACI,sBAAKA,UAAU,oBAAf,4BAGA,eAAC,GAAD,CACIlL,GAAG,sBACHsiB,eA9EQ,SAACtiB,GACzBykB,EAAqBzkB,IA8ELoiB,MAtGkB,CAClC,CACIrN,MAAO,YACPtM,MAAO,YACPzI,GAAI,aAER,CACI+U,MAAO,OACPtM,MAAO,OACPzI,GAAI,QAER,CACI+U,MAAO,SACPtM,MAAO,SACPzI,GAAI,UAER,CACI+U,MAAO,OACPtM,MAAO,OACPzI,GAAI,SAoFQqiB,WAAYtS,UAK3B8U,GACG,uBAAK3Z,UAAU,qBAAf,UACI,6DAGA,sBAAKA,UAAU,eAAezB,MAAO,CAACmc,gBAAgB,6BAAD,OAA+Bpa,EAA/B,gBAA2CA,EAA3C,YAAmDuZ,EAAnD,cAAiEY,EAAjE,YAA0EZ,EAA1E,cAAwFY,EAAxF,sB,MCzErE,IAAMja,GAAqB,CACvB/J,oBACAC,yBACAikB,sBrC+CG,SAA+BhkB,GAClC,MAAO,CACHA,QACAP,KAAMN,IqCjDVc,0BAGSgkB,GAAYja,aAtBzB,SAAyBC,EAAcC,GACnC,IAAKD,EAAO,MAAO,GAEnB,IAAIgR,GAAiBhR,EAAM+F,MAM3B,OAJI/F,EAAM+F,QACNiL,EAAgBhR,EAAMgG,aAAehG,EAAM+F,MAAMpQ,OAASqK,EAAMrK,MAG7D,2BACAsK,GADP,IAEI+Q,oBAW0CpR,GAAzBG,EA9EI,SAACd,GAA2B,IAC7CpJ,EAA4GoJ,EAA5GpJ,kBAAmBC,EAAyFmJ,EAAzFnJ,uBAAwBikB,EAAiE9a,EAAjE8a,sBAAuB/jB,EAA0CiJ,EAA1CjJ,uBAAwBgb,EAAkB/R,EAAlB+R,cAD9C,EAEVR,WAA6B,IAFnB,mBAE7CyJ,EAF6C,KAE9BC,EAF8B,KAIpD1J,aAAgB,YvB4Ib,WAAP,iCuB3IQ2J,GAAkBnd,KAAKkd,KACxB,IAsBH,OAAO,eAAC,GAAD,CACHvd,MAAM,gBACN8b,aAAc5iB,EAFX,SAGH,sBAAKuJ,UAAU,yBAAf,SACI,uBAAKA,UAAU,qBAAf,UACI,sBAAKA,UAAU,kCAAkCoJ,QAzBrC,WACpB3S,IACImb,EACA+I,OAAsB1W,GAGtBrN,KAmB+EkU,SAAU,EAAGC,KAAK,SAA7F,gCAGC8P,EAAcpV,KAAI,SAAA9O,GAAK,OACpB,uBAAoBqJ,UAAU,wBAAwBoJ,QAAS,kBAnB1D,SAACzS,GAClBF,IACImb,EACA+I,EAAsBhkB,GAGtBD,EAAuBC,GAasDqkB,CAAarkB,IAAQmU,SAAU,EAAGC,KAAK,SAA5G,UACI,uBAAK/K,UAAU,qBAAf,UACI,sBAAKA,UAAU,mBAAf,SACKrJ,EAAMJ,OAEX,uBAAKyJ,UAAU,mBAAf,yBACiBvC,EAAqB9G,EAAMsZ,qBAGhD,sBAAKjQ,UAAU,sBAAf,SACI,sBAAKib,IAAKtkB,EAAM8Z,QAASyK,IAAI,yBAV3BvkB,EAAM7B,iBC+BpC,IAAM0L,GAAqB,CACvB/J,oBACA0kB,qBtCXG,SAA8B5kB,GACjC,MAAO,CACHH,KAAMf,EACNkB,UsCWK6kB,GAAYza,aAdzB,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,2BACAC,GADP,IAEIgG,UAAWjG,EAAMiG,YAJF,KAa2BrG,GAAzBG,EA5EI,SAACd,GAA2B,IAC7CpJ,EAAuDoJ,EAAvDpJ,kBAAmB0kB,EAAoCtb,EAApCsb,qBAAsBtU,EAAchH,EAAdgH,UADG,EAGhBuK,WAAmC,IAHnB,mBAG7CiK,EAH6C,KAGjCC,EAHiC,KAKpDlK,aAAgB,WACZ,IAAMmK,EAAqB,uCAAG,4BAAAnU,EAAA,sEACLQ,KADK,OACpBC,EADoB,OAE1ByT,EAAczT,GAFY,2CAAH,qDAM3B,OADAc,GAA6B4S,GACtB,WACHzS,GAAgCyS,MAErC,IAEH,IAjBoD,EAiB9C1T,EAAyB,CAC3B,CACIgC,MAAO,OACPtM,MAAO,OACPzI,GAAI,SArBwC,cAyB/BumB,GAzB+B,IAyBpD,2BAAiC,CAAC,IAAvBlD,EAAsB,QAC7BtQ,EAAOlM,KAAK,CACRkO,MAAOsO,EAAO,GACd5a,MAAO4a,EAAO,GACdrjB,GAAI,SAAWqjB,EAAO,MA7BsB,8BAiCpD,IAAIqD,EAAgB,OAEhBH,EAAWzD,MAAK,SAAA9f,GAAC,OAAIA,EAAE,KAAO+O,OAC9B2U,EAAgB,SAAW3U,GAQ/B,OAAO,gBAAC,GAAD,CACHtJ,MAAM,cACN8b,aAAc5iB,EAFX,UAGH,uBAAKuJ,UAAU,cAAf,UACI,sBAAKA,UAAU,oBAAf,yBAGA,eAAC,GAAD,CACIlL,GAAG,aACHsiB,eAdY,SAACtiB,GACFqmB,EAAR,SAAPrmB,OAAoCmP,EACdnP,EAAG6N,MAAM,KAAKsD,MAAM,GAAG9F,KAAK,OAa9C+W,MAAOrP,EACPsP,WAAYqE,OAGpB,eAAC3D,GAAD,UCgBR,IAAMrX,GAAqB,CACvB/J,oBACAC,yBACAE,0BAGS6kB,GAAY9a,aAlBzB,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,2BACAC,GADP,IAEImG,YAAcpG,EAAMkG,MAAyBE,YAC7CL,MAAO/F,EAAM+F,MACbhQ,MAAOiK,EAAMjK,MACbkb,UAAWjR,EAAMrK,OAPF,KAiB2BiK,GAAzBG,EA5EI,SAACd,GAA2B,IAC7CpJ,EAA4GoJ,EAA5GpJ,kBAAmBC,EAAyFmJ,EAAzFnJ,uBAAwBE,EAAiEiJ,EAAjEjJ,uBAAwBoQ,EAAyCnH,EAAzCmH,YAAaL,EAA4B9G,EAA5B8G,MAAOkL,EAAqBhS,EAArBgS,UAAWlb,EAAUkJ,EAAVlJ,MAEpG2iB,EAAyB,CAC3B,CACIzP,MAAO,aACPT,QAAS,WACL3S,IACIuQ,EACAtQ,EAAuBsQ,GAGvBpQ,MAIZ,CACIiT,MAAO,OACPT,QAAQ,WAAD,4BAAE,4BAAAhC,EAAA,yDACL3Q,IAGMqb,EAAStT,SAASM,cAAc,eAElC6H,EANC,gCAOKgK,GAAiB,2BAChBhK,GADe,IAElBhQ,MAAOK,EAAYL,GACnB8Z,QAASrS,EAAiB0T,GAC1Bvb,KAAMsb,KAXT,6CAeKrB,GAAeqB,EAAWlb,EAAOyH,EAAiB0T,IAfvD,OAmBD9K,EACAtQ,EAAuBsQ,GAGvBpQ,IAvBC,4CAAF,kDAAC,KA6BhB,OAAO,eAAC,GAAD,CACHoJ,UAAU,QACVzC,MAAM,gBACN8b,aAAc5iB,EACd6iB,QAASA,EAJN,SAKH,sBAAKtZ,UAAU,qBAAf,yFCrCR,IAAMQ,GAAqB,CACvBxK,uBAGS0lB,GAAW/a,aAbxB,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,2BACAC,GADP,IAEI8a,WAAY/a,EAAMkG,QAJH,KAY0BtG,GAAzBG,EAxBI,SAACd,GAGzB,OAFuBA,EAAf8b,WAEWvlB,MACf,IAAK,WAAY,OAAO,eAACojB,GAAD,IACxB,IAAK,OAAQ,OAAO,eAACoB,GAAD,IACpB,IAAK,OAAQ,OAAO,eAACQ,GAAD,IACpB,IAAK,OAAQ,OAAO,eAACK,GAAD,QCP5BlV,GAAMqV,UxCmIC,SAAkBhgB,EAAgBmJ,GACrC,IAAI8W,EAEJ,OAAO,WACCA,GAASC,aAAaD,GAE1BA,EAAUE,YAAW,WACjBngB,IACAigB,OAAU5X,IACXc,IwC5IKiX,EAAS,WACxB,IAAMpb,EAAQ2F,GAAMyC,WAEd9Q,EAAUlB,EADA4J,EAAMjK,OAItB,GAFAoT,OAAOkS,SAASze,QAAQ,IAAMtF,EAAU,IAAMR,mBAAmBkJ,EAAMrK,OAEnEqK,EAAM+F,MAAO,CAChB,IAAMO,EAAStG,EAAM+F,MAAMhQ,QAAUuB,IAE9B0I,EAAMgG,cAAiBM,GAC7BX,GAAM2V,SzC4GF,SAAgChV,GACnC,MAAO,CACHA,SACA9Q,KAAMV,GyC/GIymB,CAAuBjV,OAGtC,MA8DH,IAAM1G,GAAqB,CAC1B4b,iBzCCM,SAA0BzlB,GAC7B,MAAO,CACHP,KAAMb,EACNoB,UyCHPD,yBACAF,wBAIcmK,gBAhBf,SAAyBC,EAAcC,GACnC,OAAKD,EAEE,2BACAC,GADP,IAEFiG,MAAOlG,EAAMkG,QAJQ,KAeiBtG,GAAzBG,EA5DC,SAACd,GAAqB,IAC7BiH,EAA0EjH,EAA1EiH,MAAOsV,EAAmEvc,EAAnEuc,iBAAkB1lB,EAAiDmJ,EAAjDnJ,uBAAwBF,EAAyBqJ,EAAzBrJ,qBAmCzD,OAjCA4a,IAAM6G,WAAU,YACA,uCAAG,0CAAA7Q,EAAA,2DACXiV,E3CpCEtnB,aAAY,qB2CmCH,gCAIG6b,GAAc/N,SAASwZ,IAJ1B,OAIhBC,EAJgB,oBAOT,QADFC,EAAOxS,OAAOkS,SAASM,YACrB,IAAJA,OAAA,EAAAA,EAAM7gB,SAAU,GAPH,uBAQZ4gB,GACH5lB,EAAuB4lB,GATR,6BAeXE,EAAQD,EAAKtW,MAAM,GAAGtD,MAAM,KAC5B8Z,EAAeD,EAAM,GACrB7lB,EAAQsB,EAAYwkB,GACpB5K,EAAYzZ,mBAAmBokB,EAAM,KAE7B,QAAV,EAAAF,SAAA,eAAY3lB,SAAU8lB,GAAgBH,EAAW/lB,OAASsb,EApB7C,wBAqBhBnb,EAAuB4lB,GArBP,2BAyBjBF,EAAiBzlB,GACjBH,EAAqBqb,GA1BJ,4CAAH,qDA6BfoB,KACE,IAGF,uBAAKjT,UAAU,MAAf,UACC,eAAC4S,GAAD,IACC9L,GAAS,eAAC4U,GAAD,UC7DEgB,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBhf,MAAK,YAAkD,IAA/Cif,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACL,eAAC,IAAMC,WAAP,UACI,eAAC,IAAD,CAAU7W,MAAOA,GAAjB,SACI,eAAC,GAAD,QAGR/H,SAAS6e,eAAe,SAM5BX,O","file":"static/js/main.f27ed999.chunk.js","sourcesContent":["export function setLastEditedProject(id: string) {\n    localStorage[\"LAST_EDITED_PROJECT\"] = id;\n}\n\nexport function getLastEditedProject() {\n    return localStorage[\"LAST_EDITED_PROJECT\"];\n}\n\nexport function setPreferredMidiInput(id: string) {\n    localStorage[\"PREFERRED_MIDI_INPUT\"] = id;\n}\n\nexport function getPreferredMidiInput() {\n    return localStorage[\"PREFERRED_MIDI_INPUT\"];\n}\n\nexport function setPreferredMidiOutput(id: string) {\n    localStorage[\"PREFERRED_MIDI_OUTPUT\"] = id;\n}\n\nexport function getPreferredMidiOutput() {\n    return localStorage[\"PREFERRED_MIDI_OUTPUT\"];\n}","export const UPDATE_FADER = \"UPDATE_FADER\";\nexport const UPDATE_SWITCH = \"UPDATE_SWITCH\";\nexport const SET_DRAG_POINT = \"SET_DRAG_POINT\";\nexport const CONNECT_CV = \"CONNECT_CV\";\nexport const DISCONNECT_CV = \"DISCONNECT_CV\";\n\nexport const SET_MIDI_INPUT = \"SET_MIDI_INPUT\";\nexport const SET_MIDI_OUTPUT = \"SET_MIDI_OUTPUT\";\nexport const SET_PATCH = \"SET_PATCH\";\nexport const SET_PATCH_NAME = \"SET_PATCH_NAME\";\nexport const SET_MIDI_SPEED = \"SET_MIDI_SPEED\";\nexport const SET_PATCH_EDITED = \"SET_PATCH_EDITED\";\n\nexport const CREATE_NEW_PATCH = \"CREATE_NEW_PATCH\";\n\nexport const SHOW_MODAL = \"SHOW_MODAL\";\nexport const HIDE_MODAL = \"HIDE_MODAL\";\nexport const SHOW_SAVE_MODAL = \"SHOW_SAVE_MODAL\";\n\nexport const OPEN_SAVED_PATCH = \"OPEN_SAVED_PATCH\";","// export interface Easel {\n//     sequencer: SequentialVoltageSource;\n//     envelope: EnvelopeGenerator;\n//     pulser: Pulser;\n//     modOsc: ModulationOscillator;\n//     complexOsc: ComplexOscillator;\n//     gates: DualLoPassGate;\n//     random: Random;\n//     connections: boolean[][];\n// }\n\nimport { ConnectionPoint } from \"../components/jack\";\nimport { SavedPatch } from \"../indexedDB\";\nimport { ComplexOscillator, DualLoPassGate, Easel, EnvelopeGenerator, ModulationOscillator, Pulser, Random, SwitchValue, ModalType, MidiMessageSpeed } from \"../types\";\nimport { CONNECT_CV, CREATE_NEW_PATCH, DISCONNECT_CV, HIDE_MODAL, OPEN_SAVED_PATCH, SET_DRAG_POINT, SET_MIDI_INPUT, SET_MIDI_OUTPUT, SET_MIDI_SPEED, SET_PATCH, SET_PATCH_EDITED, SET_PATCH_NAME, SHOW_MODAL, SHOW_SAVE_MODAL, UPDATE_FADER, UPDATE_SWITCH } from \"./actions\";\n\n\nexport function dispatchUpdateFader(module: \"envelope\", param: keyof EnvelopeGenerator, value: number): any;\nexport function dispatchUpdateFader(module: \"pulser\", param: keyof Pulser, value: number): any;\nexport function dispatchUpdateFader(module: \"modOsc\", param: keyof ModulationOscillator, value: number): any;\nexport function dispatchUpdateFader(module: \"complexOsc\", param: keyof ComplexOscillator, value: number): any;\nexport function dispatchUpdateFader(module: \"gates\", param: keyof DualLoPassGate, value: number): any;\nexport function dispatchUpdateFader(module: \"random\", param: keyof Random, value: number): any;\nexport function dispatchUpdateFader(module: keyof Easel, param: string, value: number) {\n    return {\n        type: UPDATE_FADER,\n        module,\n        param,\n        value\n    };\n};\n\nexport function dispatchUpdateSwitch(module: \"envelope\", param: keyof EnvelopeGenerator, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"pulser\", param: keyof Pulser, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"modOsc\", param: keyof ModulationOscillator, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"complexOsc\", param: keyof ComplexOscillator, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"gates\", param: keyof DualLoPassGate, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"random\", param: keyof Random, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: keyof Easel, param: string, value: SwitchValue) {\n    return {\n        type: UPDATE_SWITCH,\n        module,\n        param,\n        value\n    };\n};\n\nexport function dispatchSetDragPoint(connectionPoint: ConnectionPoint, id: number, x: number, y: number) {\n    return {\n        type: SET_DRAG_POINT,\n        connectionPoint,\n        id,\n        x,\n        y\n    }\n}\n\nexport function dispatchConnectCV(startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    return {\n        type: CONNECT_CV,\n        startPoint,\n        startId,\n        endPoint,\n        endId\n    }\n}\n\nexport function dispatchDisconnectCV(startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    return {\n        type: DISCONNECT_CV,\n        startPoint,\n        startId,\n        endPoint,\n        endId\n    }\n}\n\nexport function dispatchSetMIDIInput(name: string) {\n    return {\n        type: SET_MIDI_INPUT,\n        name\n    }\n}\n\nexport function dispatchSetMIDIOutput(name: string) {\n    return {\n        type: SET_MIDI_OUTPUT,\n        name\n    }\n}\n\nexport function dispatchSetPatch(patch: Easel) {\n    return {\n        type: SET_PATCH,\n        patch\n    }\n}\n\nexport function dispatchSetPatchName(name: string) {\n    return {\n        type: SET_PATCH_NAME,\n        name\n    }\n}\n\nexport function dispatchShowModal(modalType: ModalType) {\n    return {\n        modalType,\n        type: SHOW_MODAL\n    }\n}\n\nexport function dispatchHideModal() {\n    return {\n        type: HIDE_MODAL\n    }\n}\n\nexport function dispatchOpenSavedPatch(patch: SavedPatch) {\n    return {\n        patch,\n        type: OPEN_SAVED_PATCH\n    }\n}\n\nexport function dispatchSetMidiSpeed(speed: MidiMessageSpeed) {\n    return {\n        speed,\n        type: SET_MIDI_SPEED\n    }\n}\n\nexport function dispatchSetPatchEdited(edited: boolean) {\n    return {\n        edited,\n        type: SET_PATCH_EDITED\n    }\n}\n\nexport function dispatchShowSaveModal(patch?: SavedPatch) {\n    return {\n        patch,\n        type: SHOW_SAVE_MODAL\n    }\n}\n\nexport function dispatchCreateNewPatch() {\n    return {\n        type: CREATE_NEW_PATCH\n    }\n}","import { getMessageName } from \"./midiMessages\";\nimport { Connection, Easel } from \"./types\";\n\nexport class CancellationToken {\n    isCancelled = false;\n\n    cancel() {\n        this.isCancelled = true;\n    }\n}\n\nexport function encodePatch(patch: Easel) {\n    let bytes = \"\";\n\n    forEachValue(patch, (value, bytes) => {\n        addBytes(value, bytes);\n        return 0;\n    });\n\n    for (const connection of patch.connections) {\n        addBytes(connection.start.connectionPoint, 1);\n        addBytes(connection.start.id, 1);\n        addBytes(connection.end.connectionPoint, 1);\n        addBytes(connection.end.id, 1);\n        addBytes(connection.color, 1);\n    }\n\n    return encodeURIComponent(btoa(bytes));\n\n    function addBytes(data: number, numBytes: number) {\n        for (let i = 0; i < numBytes; i++) {\n            bytes += String.fromCharCode((data >> (i * 8)) & 0xff);\n        }\n    }\n}\n\nexport function decodePatch(encoded: string) {\n    const bytes = atob(decodeURIComponent(encoded));\n\n    let offset = 0;\n\n    const out = forEachValue(emptyPatch(), (value, numBytes) => {\n        let current = 0;\n\n        for (let i = 0; i < numBytes; i++) {\n            current |= (bytes.charCodeAt(offset) << (i * 8))\n            offset++;\n        }\n\n        return current;\n    });\n\n    out.connections = [];\n\n    const readByte = () => {\n        const res = bytes.charCodeAt(offset);\n        offset++;\n        return res;\n    }\n\n    for (let i = offset; i < bytes.length; i += 5) {\n        const connection: Connection = {\n            start: {\n                connectionPoint: readByte(),\n                id: readByte()\n            },\n            end: {\n                connectionPoint: readByte(),\n                id: readByte()\n            },\n            color: readByte()\n        }\n\n        out.connections.push(connection);\n    }\n\n    return out;\n}\n\nexport function emptyPatch(): Easel {\n    return {\n        sequencer: {\n            triggerSelect: \"bottom\",\n            stages: \"bottom\",\n        \n            voltage1: 0,\n            voltage2: 0,\n            voltage3: 0,\n            voltage4: 0,\n            voltage5: 0,\n            pulse1: \"top\",\n            pulse2: \"top\",\n            pulse3: \"top\",\n            pulse4: \"top\",\n            pulse5: \"top\",\n        },\n        envelope: {\n            attack: 0,\n            sustain: 0,\n            decay: 0,\n            triggerSelect: \"bottom\",\n            modeSelect: \"bottom\",\n        },\n        pulser: {\n            triggerSelect: \"bottom\",\n            modeSelect: \"bottom\",\n            period: 0,\n            periodCV: 0,\n        },\n        modOsc: {\n            keyboard: \"bottom\",\n            waveshape: \"bottom\",\n            range: \"bottom\",\n            modulationType: \"bottom\",\n            frequency: 0,\n            frequencyCV: 0,\n            modulation: 0,\n            modulationCV: 0,\n        },\n        complexOsc: {\n            keyboard: \"bottom\",\n            waveshape: \"bottom\",\n            polarity: \"bottom\",\n            pitch: 0,\n            pitchCV: 0,\n            timbre: 0,\n            timbreCV: 0,\n            timbreKnob: 0,\n        },\n        gates: {\n            gate2Source: \"bottom\",\n            gate1Mode: \"bottom\",\n            gate2Mode: \"bottom\",\n            level1: 0,\n            level1CV: 0,\n            level2: 0,\n            level2CV: 0,\n        },\n        random: {\n            triggerSource: \"bottom\",\n        },\n        connections: [],\n    };\n}\n\nexport function throttle(cb: () => void, interval: number) {\n    let timeout: number | undefined;\n\n    return () => {\n        if (timeout) clearTimeout(timeout);\n\n        timeout = setTimeout(() => {\n            cb();\n            timeout = undefined;\n        }, interval) as any;\n    }\n}\n\nexport function rateLimit(cb: (...args: any) => void, interval: number) {\n    let lastTime = Date.now();\n\n    return (...args: any) => {\n        if (Date.now() - lastTime < interval) return;\n\n        lastTime = Date.now();\n        cb(...args);\n    }\n}\n\nexport function forEachValue(patch: Easel, cb: (value: number, bytes: number, module: string, param: string, originalValue: any) => number) {\n    const result: any = {};\n    for (const module of Object.keys(patch).sort()) {\n        result[module] = {};\n\n        if (module === \"connections\") continue;\n\n        for (const param of Object.keys((patch as any)[module]).sort()) {\n            const current = (patch as any)[module][param];\n\n            if (Array.isArray(current)) continue;\n            \n            if (typeof current === \"string\") {\n                const possible = [\"top\", \"bottom\", \"middle\"];\n                result[module][param] = possible[cb(possible.indexOf(current), 1, module, param, current)];\n            }\n            else {\n                result[module][param] = cb(current, 2, module, param, current);\n            }\n        }\n    }\n\n    return result as Easel;\n}\n\nexport function toSVGCoordinate(svg: SVGSVGElement, x: number, y: number) {\n    const point = svg.createSVGPoint();\n    point.x = x;\n    point.y = y;\n    return point.matrixTransform(svg.getScreenCTM()?.inverse());\n}\n\nexport function distance(x0: number, y0: number, x1: number, y1: number) {\n    return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n}\n\nexport function cleanPatchName(title: string) {\n    return title.replace(/[^a-zA-Z0-9 ]/g, \"\");\n}\n\nexport function formatLastEditedDate(date: number) {\n    return describetime(Date.now() / 1000, date / 1000)\n}\n\nfunction describePlural(value: number, unit: string) {\n    return value + \" \" + unit + (value == 1 ? \"\" : \"s\")\n}\nfunction describetime(now: number, then: number) {\n    const seconds = now - then\n    if (isNaN(seconds)) return \"\"\n    if (seconds < 0)\n        return \"now\"\n    else if (seconds < 10)\n        return \"a few seconds ago\"\n    else if (seconds < 60)\n        return \" \" + describePlural(Math.floor(seconds), \"second\") + \" ago\"\n    else if (seconds < 2 * 60)\n        return \"a minute ago\"\n    else if (seconds < 60 * 60)\n        return \" \" + describePlural(Math.floor(seconds / 60), \"minute\") + \" ago\"\n    else if (seconds < 2 * 60 * 60)\n        return \"an hour ago\";\n    else if (seconds < 60 * 60 * 24)\n        return \" \" + describePlural(Math.floor(seconds / 60 / 60), \"hour\") + \" ago\"\n    else if (seconds < 60 * 60 * 24 * 30)\n        return \" \" + describePlural(Math.floor(seconds / 60 / 60 / 24), \"day\") + \" ago\"\n    else if (seconds < 60 * 60 * 24 * 365)\n        return \" \" + describePlural(Math.floor(seconds / 60 / 60 / 24 / 30), \"month\") + \" ago\"\n    else\n        return \" \" + describePlural(Math.floor(seconds / 60 / 60 / 24 / 365), \"year\") + \" ago\"\n}\n\nexport function createPreviewURI(svg: SVGSVGElement) {\n    const clone = svg.cloneNode(true) as SVGSVGElement;\n\n    const style = document.createElementNS(\"http://www.w3.org/2000/svg\", \"style\");\n    clone.appendChild(style);\n    style.textContent = previewCSS;\n\n    const content = clone.querySelector(\".easel-content\");\n\n    clone.setAttribute(\"viewBox\", \"0 0 1588 778\");\n    content?.setAttribute(\"transform\", \"translate(6, 6)\")\n\n    const bg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n    bg.setAttribute(\"x\", \"2\");\n    bg.setAttribute(\"y\", \"2\");\n    bg.setAttribute(\"width\", \"1582\");\n    bg.setAttribute(\"height\", \"750\");\n    bg.setAttribute(\"fill\", \"var(--color-preview-bg)\");\n\n    clone.insertBefore(bg, clone.firstChild)\n\n    const selectorsToRemove = [\n        \".title-input\",\n        \".easel-text\",\n        \".icon-button\",\n        \".jack-arrow\",\n        \".wave-path\",\n        \".easel-fader-bg.filled\",\n        \"foreignObject\",\n        \".knob-fg-outline\",\n        \".knob-bg\",\n        \".drag-point\"\n    ]\n\n    for (const selector of selectorsToRemove) {\n        const objs = clone.querySelectorAll(selector);\n    \n        for (let i = 0; i < objs.length; i++) {\n            objs.item(i).remove();\n        }\n    }\n\n    const text = new XMLSerializer().serializeToString(clone);\n    return \"data:image/svg+xml;base64,\" + btoa(text);\n}\n\nconst previewCSS = `\n* {\n    --color-preview-fg: #1a2c7d;\n    --color-preview-bg: #fff;\n\n    --color-sequencer: var(--color-preview-fg);\n    --color-envelope-generator: var(--color-preview-fg);\n    --color-pulser: var(--color-preview-fg);\n    --color-modulation-oscillator: var(--color-preview-fg);\n    --color-complex-oscillator: var(--color-preview-fg);\n    --color-dual-lo-pass-gate: var(--color-preview-fg);\n    --color-random-voltage: var(--color-preview-fg);\n\n    --color-keyboard-pulse: var(--color-preview-fg);\n    --color-keyboard-pressure: var(--color-preview-fg);\n    --color-keyboard-pitch: var(--color-preview-fg);\n    --color-input: var(--color-preview-fg);\n\n    --color-outline: var(--color-preview-fg);\n    --color-background: var(--color-preview-bg);\n    --color-switch-bg: var(--color-preview-bg);\n    --color-inner-jack: var(--color-preview-bg);\n\n    --color-cable-0: var(--color-preview-bg);\n    --color-cable-1: var(--color-preview-bg);\n    --color-cable-2: var(--color-preview-bg);\n    --color-cable-3: var(--color-preview-bg);\n    --color-cable-4: var(--color-preview-bg);\n    --color-cable-5: var(--color-preview-bg);\n    --color-cable-6: var(--color-preview-bg);\n    --color-cable-7: var(--color-preview-bg);\n    --color-cable-8: var(--color-preview-bg);\n\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\n.easel-text {\n    fill: var(--color-outline);\n    font-size: 14px;\n    user-select: none;\n}\n.section>rect {\n    stroke-width: 8;\n}\n.cable-bg {\n    stroke-width: 20;\n}\n.easel-jack>circle {\n    stroke: none;\n}\n.easel-toggle>circle {\n    fill: var(--color-preview-bg);\n    stroke: none;\n    transform: translate(0, 13px);\n}\n.easel-toggle>rect {\n    transform: translate(0, 13px);\n    stroke-width: 4;\n}\n.easel-toggle-bg {\n    fill: var(--color-preview-fg);\n}\n.knob-fg {\n    stroke: var(--color-preview-bg);\n}\n.knob-bg-outline {\n    stroke-width: 26;\n}\n.easel-knob>path {\n    transform: translate(0, 10px);\n}\n.easel-fader-bg {\n    fill-opacity: 1;\n    stroke-width: 4;\n}\n`","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchSetDragPoint } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\nimport { toSVGCoordinate } from \"../util\";\nimport { LabelText } from \"./labelText\";\nimport \"../styles/jack.css\";\n\nexport enum ConnectionPoint {\n    PulseOutput,\n    PressureOutput,\n    PitchOutput,\n    SequentialVoltageOutput,\n    EnvelopeGeneratorOutput,\n    PulserOutput,\n    RandomOutput,\n    Panel1Output,\n    Panel2Output,\n    EnvelopeDetectorOutput,\n    ModulationCVOutput,\n    PulserPeriodInput,\n    ModulationOscFrequencyInput,\n    ModulationOscModulationInput,\n    ComplexOscPitchInput,\n    ComplexOscTimbreInput,\n    LoPassGate1Input,\n    LoPassGate2Input,\n    PanelInput,\n    EnvelopeAttackInput,\n    EnvelopeSustainInput,\n    EnvelopeDecayInput,\n    ComplexOscWaveshapeInput\n}\n\nexport interface JackProps {\n    x: number;\n    y: number;\n    color: string;\n    connectionPoint: ConnectionPoint;\n    id?: number;\n    arrow?: \"long\" | \"medium\" | \"short\";\n    text?: string;\n\n    dispatchSetDragPoint: (connectionPoint: ConnectionPoint, id: number, x: number, y: number) => void;\n}\n\nconst OUTER_RADIUS = 25;\nconst INNER_RADIUS = 12;\n\nexport const JackImpl = (props: JackProps) => {\n    const { x, y, text, color, connectionPoint, id, arrow, dispatchSetDragPoint } = props;\n\n    const handleCircleRef = (ref: SVGCircleElement) => {\n        if (ref) {\n            const rect = ref.getBoundingClientRect();\n            const point = toSVGCoordinate(\n                ref.ownerSVGElement!,\n                rect.left + rect.width / 2,\n                rect.top + rect.height / 2\n            )\n            dispatchSetDragPoint(connectionPoint, id || 0, point.x, point.y);\n        }\n    }\n\n    let arrowY = 0;\n    if (arrow === \"long\") {\n        arrowY = -OUTER_RADIUS - 78;\n    }\n    else if (arrow === \"medium\") {\n        arrowY = -OUTER_RADIUS - 42;\n    }\n    else {\n        arrowY = -OUTER_RADIUS - 12;\n    }\n\n    return <>\n        <g className=\"easel-jack\" transform={`translate(${x} ${y})`}>        \n            <circle\n                ref={handleCircleRef}\n                cx={0}\n                cy={0}\n                r={OUTER_RADIUS}\n                fill={color}\n                stroke=\"var(--color-outline)\" />\n            <circle \n                cx={0}\n                cy={0}\n                r={INNER_RADIUS}\n                fill=\"var(--color-inner-jack)\"\n                stroke=\"var(--color-outline)\"  />\n            {text && \n                <LabelText\n                    text={text}\n                    x={0}\n                    y={OUTER_RADIUS + 20}\n                    alignment=\"baseline\"\n                    anchor=\"middle\" />\n            }\n            {arrow &&\n                <g className=\"jack-arrow\">\n                    <line\n                        x1={0}\n                        y1={-OUTER_RADIUS}\n                        x2={0}\n                        y2={arrowY}\n                        stroke=\"var(--color-outline)\" />\n                    <path\n                        d={`M 0 ${arrowY - 2} l ${4} ${10} q ${-4} ${-4} ${-8} ${0} Z`}\n                        fill=\"var(--color-outline)\"\n                    />\n                </g>\n            }\n        </g>\n    </>\n}\n\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchSetDragPoint,\n};\n\nexport const Jack = connect(mapStateToProps, mapDispatchToProps)(JackImpl);","import * as React from \"react\";\n\nimport \"../styles/labelText.css\"\n\nexport interface LabelTextProps {\n    className?: string;\n    x: number;\n    y: number;\n    text: string;\n    anchor?: \"start\" | \"middle\" | \"end\"\n    alignment?: \"hanging\" | \"middle\" | \"baseline\"\n}\n\nexport const LabelText = (props: LabelTextProps) => {\n    const { x, y, text, anchor, alignment, className } = props;\n    return <text \n        className={[\"easel-text\", className].filter(e => !!e).join(\" \")}\n        x={x}\n        y={y}\n        textAnchor={anchor}\n        alignmentBaseline={alignment}\n        fill=\"var(--color-outline)\">\n            {text}\n        </text>\n}\n","import { ConnectionPoint } from \"./components/jack\";\nimport { Easel, ParamKind } from \"./types\";\nimport { forEachValue } from \"./util\";\n\nconst definitions = [\n    {\n        \"name\": \"cv_connect\",\n        \"length\": 35,\n        \"template\": \"F0 24 2F 63 76 5F 63 6F 6E 6E 65 63 74 00 2C 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 3F F7 80 00 00\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 13\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 8\n            }\n        ]\n    },\n    {\n        // This one is just cv_connect with a different suffix\n        \"name\": \"cv_disconnect\",\n        \"length\": 35,\n        \"template\": \"f0 24 2f 63 76 5f 63 6f 6e 6e 65 63 74 00 2c 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 00 00 00 00 f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 13\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 8\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_cvsPitch\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 63 6f 5f 63 76 73 50 69 74 63 68 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 14\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 123\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_cvsTimbre\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 66 64 5f 63 6f 5f 63 76 73 54 69 6d 62 72 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 32,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_pitch\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 63 6f 5f 70 69 74 63 68 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_timbre\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 119\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_cvsLevel1\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 31 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 32,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_cvsLevel2\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 32 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 32,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_level1\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 31 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_level2\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 32 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 123\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_eg_a\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 65 67 5f 61 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_eg_d\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 65 67 5f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 120\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_eg_s\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 65 67 5f 73 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 14\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 111\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_cvsFreq\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 46 72 65 71 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_cvsMod\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 4d 6f 64 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 109\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_freq\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 6d 6f 5f 66 72 65 71 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_mod\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 113\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_p_cvs\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 70 5f 63 76 73 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_p_period\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 70 5f 70 65 72 69 6f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_1\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 31 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_2\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 32 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_3\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 33 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_4\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 34 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 123\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_5\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 35 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"kn_co_timbre\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 6b 6e 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"rt_keyDown\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 72 74 5f 6b 65 79 44 6f 77 6e 00 2c 69 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 21,\n                \"min\": 0,\n                \"max\": 28\n            }\n        ]\n    },\n    {\n        \"name\": \"rt_keyUp\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 72 74 5f 6b 65 79 55 70 00 00 00 2c 69 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 21,\n                \"min\": 0,\n                \"max\": 28\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_co_keyboard\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 63 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_co_polarity\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 63 6f 5f 70 6f 6c 61 72 69 74 79 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_co_timbre\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_eg_mode\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 65 67 5f 6d 6f 64 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_eg_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 65 67 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_gate1Mode\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 67 61 74 65 31 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_gate2Mode\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 67 61 74 65 32 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_gate2Source\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 67 61 74 65 32 53 6f 75 72 63 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_keyboard\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 6d 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_mod\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_range\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 6d 6f 5f 72 61 6e 67 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_waveshape\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 73 77 5f 6d 6f 5f 77 61 76 65 73 68 61 70 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_p_mode\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 70 5f 6d 6f 64 65 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_p_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 70 5f 74 72 69 67 67 65 72 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p1\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 31 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p2\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 32 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p3\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 33 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p4\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 34 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p5\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 35 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_stages\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 73 76 73 5f 73 74 61 67 65 73 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 73 76 73 5f 74 72 69 67 67 65 72 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_rv_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 72 76 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"ps_clearBuffer\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 70 73 5f 63 6c 65 61 72 42 75 66 66 65 72 00 2c 00 00 00 f7 ff\",\n        \"arguments\": []\n    },\n    {\n        \"name\": \"ps_save\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 70 73 5f 73 61 76 65 00 00 00 00 2c 69 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 21,\n                \"min\": 0,\n                \"max\": 1\n            }\n        ]\n    },\n    {\n        \"name\": \"ps_setName\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 70 73 5f 73 65 74 4e 61 6d 65 00 2c 69 73 00 00 00 00 01\",\n        \"arguments\": []\n    }\n];\n\nconst messageNames = {\n    sequencer: {\n        triggerSelect: \"sw_svs_trigger\",\n        stages: \"sw_svs_stages\",\n\n        voltage1: \"fd_svs_1\",\n        voltage2: \"fd_svs_2\",\n        voltage3: \"fd_svs_3\",\n        voltage4: \"fd_svs_4\",\n        voltage5: \"fd_svs_5\",\n        pulse1: \"sw_svs_p1\",\n        pulse2: \"sw_svs_p2\",\n        pulse3: \"sw_svs_p3\",\n        pulse4: \"sw_svs_p4\",\n        pulse5: \"sw_svs_p5\",\n    },\n    envelope: {\n        attack: \"fd_eg_a\",\n        sustain: \"fd_eg_d\",\n        decay: \"fd_eg_s\",\n        triggerSelect: \"sw_eg_trigger\",\n        modeSelect: \"sw_eg_mode\",\n    },\n    pulser: {\n        triggerSelect: \"sw_p_trigger\",\n        modeSelect: \"sw_p_mode\",\n        period: \"fd_p_period\",\n        periodCV: \"fd_p_cvs\",\n    },\n    modOsc: {\n        keyboard: \"sw_mo_keyboard\",\n        waveshape: \"sw_mo_waveshape\",\n        range: \"sw_mo_range\",\n        modulationType: \"sw_mo_mod\",\n        frequency: \"fd_mo_freq\",\n        frequencyCV: \"fd_mo_cvsFreq\",\n        modulation: \"fd_mo_mod\",\n        modulationCV: \"fd_mo_cvsMod\",\n    },\n    complexOsc: {\n        keyboard: \"sw_co_keyboard\",\n        waveshape: \"sw_co_timbre\",\n        polarity: \"sw_co_polarity\",\n        pitch: \"fd_co_pitch\",\n        pitchCV: \"fd_co_cvsPitch\",\n        timbre: \"fd_co_timbre\",\n        timbreCV: \"fd_co_cvsTimbre\",\n        timbreKnob: \"kn_co_timbre\",\n    },\n    gates: {\n        gate2Source: \"sw_gate2Source\",\n        gate1Mode: \"sw_gate1Mode\",\n        gate2Mode: \"sw_gate2Mode\",\n        level1: \"fd_dlpg_level1\",\n        level1CV: \"fd_dlpg_cvsLevel1\",\n        level2: \"fd_dlpg_level2\",\n        level2CV: \"fd_dlpg_cvsLevel2\",\n    },\n    random: {\n        triggerSource: \"sw_rv_trigger\",\n    }\n};\n\nconst connectionIds: { [index: string]: number } = {\n    \"SequentialVoltageOutput\": 0,\n    \"EnvelopeGeneratorOutput\": 1,\n    \"PulserOutput\": 2,\n    \"PulseOutput\": 3,\n    \"PressureOutput\": 4,\n    \"PitchOutput\": 5,\n    \"RandomOutput\": 6,\n    \"EnvelopeDetectorOutput\": 10,\n    \"ModulationCVOutput\": 11,\n    \"Panel1Output\": 12,\n    \"Panel2Output\": 13,\n    \"PulserPeriodInput\": 0,\n    \"ModulationOscFrequencyInput\": 1,\n    \"ModulationOscModulationInput\": 2,\n    \"ComplexOscPitchInput\": 3,\n    \"ComplexOscTimbreInput\": 4,\n    \"ComplexOscWaveshapeInput\": 5,\n    \"LoPassGate1Input\": 6,\n    \"LoPassGate2Input\": 7,\n    \"PanelInput\": 8,\n    \"EnvelopeAttackInput\": 9,\n    \"EnvelopeSustainInput\": 10,\n    \"EnvelopeDecayInput\": 11,\n};\n\nexport function getMessageName(module: string, param: string) {\n    return (messageNames as any)[module][param];\n}\n\nfunction getMessageByName(name: string) {\n    return definitions.find(d => d.name === name);\n}\n\nfunction getMessageTemplate(module: string, key: string) {\n    const name = getMessageName(module, key);\n    return getMessageByName(name);\n}\n\nfunction getMessageTemplateBytes(module: string, key: string) {\n    const template = getMessageTemplate(module, key)!;\n    return getMessageBytes(template.template);\n}\n\nfunction getMessageBytes(template: string) {\n    const bytes = template.split(\" \");\n    const out = new Uint8Array(bytes.length);\n    for (let i = 0; i < bytes.length; i++) {\n        if (bytes[i] == \"XX\") continue;\n        out[i] = parseInt(bytes[i], 16);\n    }\n    return out;\n}\n\nexport function createFaderMessage(module: string, key: string, value: number, saveBuffer = false) {\n    const out = getMessageTemplateBytes(module, key);\n\n    value = Math.max(0, Math.min(0x7ff, value));\n\n    out[out.length - 2] = value & 0x7f;\n    out[out.length - 3] = (value >> 7) & 0xf;\n\n    if (saveBuffer) {\n        out[out.length - 6] = 1;\n    }\n\n    return out;\n}\n\nexport function createSwitchMessage(module: string, key: string, value: \"top\" | \"middle\" | \"bottom\", saveBuffer = false) {\n    const out = getMessageTemplateBytes(module, key);\n\n    let num: number;\n    switch (value) {\n        case \"top\": num = 2; break;\n        case \"middle\": num = 1; break;\n        case \"bottom\": num = 0; break;\n    }\n\n    out[out.length - 2] = num;\n\n    if (saveBuffer) {\n        out[out.length - 6] = 1;\n    }\n\n    return out;\n}\n\nexport function createConnectCVMessage(from: number, to: number, saveBuffer = false) {\n    const msg = getMessageByName(\"cv_connect\");\n    const out = getMessageBytes(msg!.template);\n\n    let outputName = ConnectionPoint[from];\n\n    if (outputName.indexOf(\"Input\") !== -1) {\n        let swap = from;\n        from = to;\n        to = swap;\n    }\n\n    // output\n    out[29] = connectionIds[ConnectionPoint[from]]\n    // input\n    out[33] = connectionIds[ConnectionPoint[to]]\n\n    if (saveBuffer) {\n        out[25] = 1;\n    }\n\n    return out;\n}\n\nexport function createDisconnectCVMessage(from: number, to: number) {\n    const msg = getMessageByName(\"cv_disconnect\");\n    const out = getMessageBytes(msg!.template);\n\n    let outputName = ConnectionPoint[from];\n\n    if (outputName.indexOf(\"Input\") !== -1) {\n        let swap = from;\n        from = to;\n        to = swap;\n    }\n\n    // output\n    out[29] = connectionIds[ConnectionPoint[from]]\n    // input\n    out[33] = connectionIds[ConnectionPoint[to]]\n\n    return out;\n}\n\nexport function createClearBufferMessage() {\n    const msg = getMessageByName(\"ps_clearBuffer\");\n    const out = getMessageBytes(msg!.template);\n\n    return out;\n}\n\nexport function createSaveMessage(saveIndex: number) {\n    const msg = getMessageByName(\"ps_save\");\n    const out = getMessageBytes(msg!.template);\n\n    out[out.length - 2] = saveIndex;\n\n    return out;\n}\n\nexport function createSetNameMessage(name: string) {\n    const msg = getMessageByName(\"ps_setName\");\n    const prefix = getMessageBytes(msg!.template);\n    const out = new Uint8Array(prefix.length + name.length + 3);\n\n    out.set(prefix, 0);\n    for (let i = 0; i < name.length; i++) {\n        out[prefix.length + i] = name.charCodeAt(i);\n    }\n\n    out[out.length - 1] = 0xf7;\n    return out;\n}\n\nexport function createDisconnectAllMessages() {\n    const outputs = Object.keys(connectionIds).filter(key => key.indexOf(\"Output\") !== -1).map(key => connectionIds[key]);\n    const inputs = Object.keys(connectionIds).filter(key => key.indexOf(\"Output\") !== -1).map(key => connectionIds[key]);\n\n    const messages = [];\n    for (const outId of outputs) {\n        for (const inId of inputs) {\n            messages.push(createDisconnectCVMessage(outId, inId));\n        }\n    }\n\n    return messages;\n}\n\nexport function createPatchMessages(easel: Easel, clearBuffer: boolean, name?: string, saveIndex?: number) {\n    const queue: Uint8Array[] = [];\n\n    if (clearBuffer) {\n        queue.push(createClearBufferMessage());\n    }\n\n    const isSave = saveIndex !== undefined;\n\n    forEachValue(easel, (value, bytes, module, param, rawValue) => {\n        const messageName = getMessageName(module, param);\n\n        if (messageName.startsWith(\"fd\") || messageName.startsWith(\"kn\")) {\n            queue.push(createFaderMessage(module, param, rawValue, isSave));\n        }\n        else {\n            queue.push(createSwitchMessage(module, param, rawValue, isSave));\n        }\n        return 0;\n    });\n\n    for (const connection of easel.connections) {\n        queue.push(createConnectCVMessage(connection.start.connectionPoint, connection.end.connectionPoint, isSave));\n    }\n\n    if (name) {\n        queue.push(createSetNameMessage(name));\n    }\n\n    if (isSave) {\n        queue.push(createSaveMessage(saveIndex))\n    }\n\n    return queue;\n}\n\nexport function getReadableName(module: string, param: string) {\n    return readableNames[getMessageName(module, param)];\n}\n\nconst readableNames: {[index: string]: string} = {\n    \"sw_svs_trigger\": \"Sequencer Trigger Mode\",\n    \"sw_svs_stages\": \"Sequencer Stages\",\n    \"fd_svs_1\": \"Sequencer Stage 1\",\n    \"fd_svs_2\": \"Sequencer Stage 2\",\n    \"fd_svs_3\": \"Sequencer Stage 3\",\n    \"fd_svs_4\": \"Sequencer Stage 4\",\n    \"fd_svs_5\": \"Sequencer Stage 5\",\n    \"sw_svs_p1\": \"Sequqncer Pulse 1\",\n    \"sw_svs_p2\": \"Sequqncer Pulse 2\",\n    \"sw_svs_p3\": \"Sequencer Pulse 3\",\n    \"sw_svs_p4\": \"Sequencer Pulse 4\",\n    \"sw_svs_p5\": \"Sequencer Pulse 5\",\n    \"fd_eg_a\": \"Envelope Generator Attack\",\n    \"fd_eg_d\": \"Envelope Generator Decay\",\n    \"fd_eg_s\": \"Envelope Generator Sustain\",\n    \"sw_eg_trigger\": \"Envelope Trigger Mode\",\n    \"sw_eg_mode\": \"Envelope Generator Mode\",\n    \"sw_p_trigger\": \"Pulser Trigger Mode\",\n    \"sw_p_mode\": \"Pulser Mode\",\n    \"fd_p_period\": \"Pulser Period\",\n    \"fd_p_cvs\": \"Pulser Period CV\",\n    \"sw_mo_keyboard\": \"Mod Oscillator Key Tracking\",\n    \"sw_mo_waveshape\": \"Mod Oscillator Waveshape\",\n    \"sw_mo_range\": \"Mod Oscillator Range\",\n    \"sw_mo_mod\": \"Mod Oscillator Modulation Type\",\n    \"fd_mo_freq\": \"Mod Oscillator Frequency\",\n    \"fd_mo_cvsFreq\": \"Mod Oscillator Frequency CV\",\n    \"fd_mo_mod\": \"Mod Oscillator Modulation\",\n    \"fd_mo_cvsMod\": \"Mod Oscillator Moduplation CV\",\n    \"sw_co_keyboard\": \"Comp Oscillator Key Tracking\",\n    \"sw_co_timbre\": \"Comp Oscillator Waveshape Switch\",\n    \"sw_co_polarity\": \"Comp Oscillator Polarity\",\n    \"fd_co_pitch\": \"Comp Oscillator Pitch\",\n    \"fd_co_cvsPitch\": \"Comp Oscillator Pitch CV\",\n    \"fd_co_timbre\": \"Comp Oscillator Timbre\",\n    \"fd_co_cvsTimbre\": \"Comp Oscillator Timbre CV\",\n    \"kn_co_timbre\": \"Comp Oscillator Waveshape\",\n    \"sw_gate2Source\": \"Gate 2 Source\",\n    \"sw_gate1Mode\": \"Gate 1 Mode\",\n    \"sw_gate2Mode\": \"Gate 2 Mode\",\n    \"fd_dlpg_level1\": \"Gate 1 Level\",\n    \"fd_dlpg_cvsLevel1\": \"Gate 1 Level CV\",\n    \"fd_dlpg_level2\": \"Gate 2 Level\",\n    \"fd_dlpg_cvsLevel2\": \"Gate 2 Level CV\",\n    \"sw_rv_trigger\": \"Random Voltage Trigger Mode\",\n}\n\nconst paramKinds: {[index: string]: ParamKind} = {\n    \"sw_svs_trigger\": \"three-way\",\n    \"sw_svs_stages\": \"three-way\",\n    \"fd_svs_1\": \"fader\",\n    \"fd_svs_2\": \"fader\",\n    \"fd_svs_3\": \"fader\",\n    \"fd_svs_4\": \"fader\",\n    \"fd_svs_5\": \"fader\",\n    \"sw_svs_p1\": \"two-way\",\n    \"sw_svs_p2\": \"two-way\",\n    \"sw_svs_p3\": \"two-way\",\n    \"sw_svs_p4\": \"two-way\",\n    \"sw_svs_p5\": \"two-way\",\n    \"fd_eg_a\": \"fader\",\n    \"fd_eg_d\": \"fader\",\n    \"fd_eg_s\": \"fader\",\n    \"sw_eg_trigger\": \"three-way\",\n    \"sw_eg_mode\": \"three-way\",\n    \"sw_p_trigger\": \"three-way\",\n    \"sw_p_mode\": \"three-way\",\n    \"fd_p_period\": \"fader\",\n    \"fd_p_cvs\": \"fader\",\n    \"sw_mo_keyboard\": \"two-way\",\n    \"sw_mo_waveshape\": \"three-way\",\n    \"sw_mo_range\": \"two-way\",\n    \"sw_mo_mod\": \"three-way\",\n    \"fd_mo_freq\": \"fader\",\n    \"fd_mo_cvsFreq\": \"fader\",\n    \"fd_mo_mod\": \"fader\",\n    \"fd_mo_cvsMod\": \"fader\",\n    \"sw_co_keyboard\": \"two-way\",\n    \"sw_co_timbre\": \"three-way\",\n    \"sw_co_polarity\": \"two-way\",\n    \"fd_co_pitch\": \"fader\",\n    \"fd_co_cvsPitch\": \"fader\",\n    \"fd_co_timbre\": \"fader\",\n    \"fd_co_cvsTimbre\": \"fader\",\n    \"kn_co_timbre\": \"fader\",\n    \"sw_gate2Source\": \"three-way\",\n    \"sw_gate1Mode\": \"three-way\",\n    \"sw_gate2Mode\": \"three-way\",\n    \"fd_dlpg_level1\": \"fader\",\n    \"fd_dlpg_cvsLevel1\": \"fader\",\n    \"fd_dlpg_level2\": \"fader\",\n    \"fd_dlpg_cvsLevel2\": \"fader\",\n    \"sw_rv_trigger\": \"three-way\",\n}","import { ConnectionPoint } from \"../components/jack\";\nimport { SavedPatch } from \"../indexedDB\";\nimport { setLastEditedProject } from \"../localStorage\";\nimport { sendMIDIMessage } from \"../midi\";\nimport { createConnectCVMessage, createDisconnectCVMessage, createFaderMessage, createSwitchMessage } from \"../midiMessages\";\nimport { Connection, ConnectionJack, Easel, MidiMessageSpeed, ModalState, ModalType } from \"../types\";\nimport { cleanPatchName, decodePatch, emptyPatch, rateLimit } from \"../util\";\nimport { CONNECT_CV, CREATE_NEW_PATCH, DISCONNECT_CV, HIDE_MODAL, OPEN_SAVED_PATCH, SET_DRAG_POINT, SET_MIDI_INPUT, SET_MIDI_OUTPUT, SET_MIDI_SPEED, SET_PATCH, SET_PATCH_EDITED, SET_PATCH_NAME, SHOW_MODAL, SHOW_SAVE_MODAL, UPDATE_FADER, UPDATE_SWITCH } from \"./actions\";\n\nexport interface State {\n    saved?: SavedPatch;\n    patch: Easel;\n    name: string;\n    dragPoints: DragPoint[];\n\n    midiInput?: string;\n    midiOutput?: string;\n    midiSpeed: MidiMessageSpeed;\n\n    modal?: ModalState;\n    patchEdited?: boolean;\n}\n\nexport interface DragPoint {\n    connectionPoint: ConnectionPoint;\n    id: number;\n    x: number;\n    y: number;\n}\n\nconst initialState: State = {\n    patch: emptyPatch(),\n    name: \"Untitled\",\n    dragPoints: [],\n    midiSpeed: \"medium\",\n}\n\nexport function topReducer(state = initialState, action: any): State {\n    sendMIDI(state.midiOutput, action, state);\n    \n    switch (action.type) {\n        case OPEN_SAVED_PATCH:\n            if (action.patch.id) {\n                setLastEditedProject(action.patch.id.toString())\n            }\n            return {\n                ...state,\n                saved: action.patch,\n                name: action.patch.name,\n                patch: decodePatch(action.patch.patch),\n                patchEdited: false\n            };\n        case SET_PATCH:\n            return {\n                ...state,\n                patch: action.patch\n            };\n        case CREATE_NEW_PATCH:\n            return {\n                ...state,\n                saved: undefined,\n                name: \"Untitled\",\n                patch: emptyPatch()\n            };\n        case UPDATE_FADER:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    [action.module]: {\n                        ...state.patch[action.module as keyof Easel],\n                        [action.param]: Math.min(Math.max(action.value, 0), 0x7ff)\n                    }\n                }\n            };\n        case UPDATE_SWITCH:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    [action.module]: {\n                        ...state.patch[action.module as keyof Easel],\n                        [action.param]: action.value\n                    }\n                }\n            };\n        case SET_DRAG_POINT:\n            return {\n                ...state,\n                dragPoints: setDragPoint(\n                    state.dragPoints,\n                    action.connectionPoint,\n                    action.id,\n                    action.x,\n                    action.y\n                )\n            };\n        case CONNECT_CV:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    connections: makeConnection(\n                        state.patch.connections,\n                        action.startPoint,\n                        action.startId,\n                        action.endPoint,\n                        action.endId\n                    )\n                }\n            }\n        case DISCONNECT_CV:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    connections: breakConnection(\n                        state.patch.connections,\n                        action.startPoint,\n                        action.startId,\n                        action.endPoint,\n                        action.endId\n                    )\n                }\n            }\n        case SET_MIDI_INPUT:\n            return {\n                ...state,\n                midiInput: action.name\n            }\n        case SET_MIDI_OUTPUT:\n            return {\n                ...state,\n                midiOutput: action.name\n            }\n        case SET_PATCH_NAME:\n            return {\n                ...state,\n                name: cleanPatchName(action.name)\n            }\n        case SHOW_MODAL:\n            return {\n                ...state,\n                modal: defaultModalState(action.modalType)\n            }\n        case SHOW_SAVE_MODAL:\n            return {\n                ...state,\n                modal: {\n                    type: \"save\",\n                    patchToLoad: action.patch\n                }\n            }\n        case HIDE_MODAL:\n            return {\n                ...state,\n                modal: undefined\n            }\n        case SET_MIDI_SPEED:\n            return {\n                ...state,\n                midiSpeed: action.speed\n            }\n        case SET_PATCH_EDITED:\n            return {\n                ...state,\n                patchEdited: action.edited\n            }\n    }\n\n    return state;\n}\n\nconst sendMIDI = rateLimit((output: string | undefined, action: any, state: State) => {\n    if (!output) return;\n\n    switch (action.type) {\n        case UPDATE_FADER:\n            sendMIDIMessage(output, createFaderMessage(action.module, action.param, action.value));\n            break;\n        case UPDATE_SWITCH:\n            sendMIDIMessage(output, createSwitchMessage(action.module, action.param, action.value));\n            break;\n        case CONNECT_CV:\n            sendMIDIMessage(output, createConnectCVMessage(action.startPoint, action.endPoint))\n            break;\n        case DISCONNECT_CV:\n            // There are duplicates of some connection points, so we only want to send the message\n            // if there is exactly one connection left (the one being disconnected)\n            let cvCount = 0;\n            for (const connection of state.patch.connections) {\n                if (connection.start.connectionPoint === action.startPoint && connection.end.connectionPoint === action.endPoint ||\n                    connection.end.connectionPoint === action.startPoint && connection.start.connectionPoint === action.endPoint) {\n                    cvCount++;\n                }\n            }\n\n            if (cvCount === 1) {\n                sendMIDIMessage(output, createDisconnectCVMessage(action.startPoint, action.endPoint));\n            }\n            break;\n    }\n}, 16)\n\n\nfunction setDragPoint(dragPoints: DragPoint[], connectionPoint: ConnectionPoint, id: number, x: number, y: number) {\n    const result = dragPoints.map(p => ({...p}));\n\n    for (const point of dragPoints) {\n        if (point.connectionPoint === connectionPoint && point.id === id) {\n            point.x = x;\n            point.y = y;\n            return result;\n        }\n    }\n\n    result.push({\n        connectionPoint,\n        id,\n        x,\n        y\n    });\n\n    return result;\n}\n\nfunction makeConnection(existing: Connection[], startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    let start: ConnectionJack = {\n        connectionPoint: startPoint,\n        id: startId\n    }\n\n    let end: ConnectionJack = {\n        connectionPoint: endPoint,\n        id: endId\n    }\n\n    if (start.connectionPoint === end.connectionPoint) {\n        if (start.id > end.id) {\n            let swap = start;\n            start = end;\n            end = swap;\n        }\n    }\n    else if (start.connectionPoint > end.connectionPoint) {\n        let swap = start;\n        start = end;\n        end = swap;\n    }\n\n    const takenColors: boolean[] = [];\n    \n    for (const connection of existing) {\n        if (connection.start.connectionPoint === start.connectionPoint &&\n            connection.start.id === start.id &&\n            connection.end.connectionPoint === end.connectionPoint &&\n            connection.end.id === end.id) {\n                return existing;\n        }\n\n        takenColors[connection.color] = true;\n    }\n\n    let nextColor = takenColors.length;\n    for (let i = 0; i < takenColors.length; i++) {\n        if (!takenColors[i]) {\n            nextColor = i;\n            break;\n        }\n    }\n\n    return existing.slice().concat([{ start, end, color: nextColor }]);\n}\n\nfunction breakConnection(existing: Connection[], startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    return existing.filter(c => {\n        if (c.start.connectionPoint === startPoint && c.start.id === startId && c.end.connectionPoint === endPoint && c.end.id === endId) return false;\n        if (c.start.connectionPoint === endPoint && c.start.id === endId && c.end.connectionPoint === startPoint && c.end.id === startId) return false;\n\n        return true;\n    })\n}\n\nfunction defaultModalState(type: ModalType): ModalState {\n    return {\n        type\n    } as any\n}","import { createStore } from 'redux';\n\nimport { topReducer } from './reducer';\n\nconst store = createStore(topReducer);\nexport default store;","import { CancellationToken } from \"./util\";\nimport store from './store/store';\n\nlet midiAccess: WebMidi.MIDIAccess;\nlet midiAccessPromise: Promise<WebMidi.MIDIAccess>;\n\nasync function getAccessAsync() {\n    if (midiAccess) return midiAccess;\n    if (!midiAccessPromise) midiAccessPromise = navigator.requestMIDIAccess({ sysex: true });\n    return midiAccessPromise;\n}\n\nexport async function listMIDIOutputsAsync() {\n    const access = await getAccessAsync();\n\n    const out: [string, string][] = [];\n    for (const entry of access.outputs) {\n        out.push([entry[0], entry[1].name!]);\n    }\n    return out;\n}\n\nexport async function listMIDIInputsAsync() {\n    const access = await getAccessAsync();\n\n    const out: [string, string][] = [];\n    for (const entry of access.inputs) {\n        out.push([entry[0], entry[1].name!]);\n    }\n    return out;\n}\n\nexport async function sendMIDIMessage(output: string, bytes: Uint8Array) {\n    const access = await getAccessAsync();\n    const out = access.outputs.get(output);\n\n    if (out) {\n        out.send(bytes);\n    }\n}\n\nexport async function sendMIDIMessagesAsync(output: string, messages: Uint8Array[], onProgress?: (current: number, total: number) => void, cancellationToken?: CancellationToken) {\n    const access = await getAccessAsync();\n\n    const out = access.outputs.get(output);\n    if (!out) return;\n\n    return new Promise<void>((resolve, reject) => {\n        let currentIndex = 0;\n        let intervalRef = setInterval(() => {\n            if (cancellationToken?.isCancelled) {\n                clearInterval(intervalRef);\n                resolve();\n                return;\n            }\n\n            if (currentIndex === messages.length) {\n                clearInterval(intervalRef);\n\n                try {\n                    if (onProgress) onProgress(currentIndex, messages.length);\n                }\n                catch {\n                    // ignore\n                }\n\n                resolve();\n                return;\n            }\n            \n            try {\n                if (onProgress) onProgress(currentIndex, messages.length);\n            }\n            catch {\n                // ignore\n            }\n\n            try {\n                out.send(messages[currentIndex]);\n            }\n            catch (e) {\n                clearInterval(intervalRef);\n                reject(e);\n                return;\n            }\n\n            currentIndex ++;\n        }, messageInterval())\n    },)\n}\n\nexport async function addConnectionChangedListener(handler: () => void) {\n    const access = await getAccessAsync();\n    access.addEventListener(\"statechange\", handler);\n}\n\nexport async function removeConnectionChangedListener(handler: () => void) {\n    const access = await getAccessAsync();\n    access.removeEventListener(\"statechange\", handler);\n} \n\nexport function messageInterval() {\n    switch (store.getState().midiSpeed) {\n        case \"very-slow\": return 200;\n        case \"slow\": return 100;\n        case \"medium\": return 50;\n        case \"fast\": return 20;\n    }\n}","import * as React from \"react\";\nimport { distance } from \"../util\";\nimport \"../styles/cable.css\";\n\nexport interface CableProps {\n    dragging?: boolean;\n    x0: number;\n    y0: number;\n    x1: number;\n    y1: number;\n    colorIndex: number;\n    onClick?: () => void;\n}\n\nexport const Cable = (props: CableProps) => {\n    let { x0, y0, x1, y1, colorIndex, dragging, onClick } = props;\n\n    if (x0 < x1) {\n        let swap = x0;\n        x0 = x1;\n        x1 = swap;\n        swap = y0;\n        y0 = y1;\n        y1 = swap;\n    }\n\n\n    const d = distance(x0, y0, x1, y1);\n    const pathString = `M ${x0} ${y0} q ${(x1 - x0) / 2} ${Math.min(Math.max(10, 200 - d / 10), 100)} ${x1 - x0} ${y1 - y0}`;\n\n    return <g className={\"cable\" + (dragging ? \" dragging\" : \"\")}>\n        <path\n            className=\"cable-bg\"\n            d={pathString}\n            stroke=\"var(--color-outline)\"\n            fill=\"none\"\n            strokeWidth={12}\n            strokeLinecap=\"round\"\n            onClick={onClick}\n            />\n        <path\n            d={pathString}\n            stroke={`var(--color-cable-${colorIndex % 9})`}\n            fill=\"none\"\n            strokeWidth={10}\n            strokeLinecap=\"round\"\n            onClick={onClick}\n            />\n    </g>\n}\n","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { getReadableName } from \"../midiMessages\";\nimport { dispatchUpdateFader } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\nimport { toSVGCoordinate } from \"../util\";\nimport { LabelText } from \"./labelText\";\nimport \"../styles/fader.css\";\n\nexport interface FaderProps {\n    color: string;\n    top: number;\n    left: number;\n    value: number;\n    module: string;\n    fader: string;\n    onChange?: (value: number) => void;\n    label?: string;\n\n    dispatchUpdateFader: (module: string, param: string, value: number) => void;\n}\n\nconst MAX_VALUE = 0x7ff;\nconst FADER_HEIGHT = 220;\nconst FADER_WIDTH = 15;\nconst HANDLE_WIDTH = 12;\n\nexport const FaderViewImpl = (props: FaderProps) => {\n    const { color, left, top, label, value, module, fader, dispatchUpdateFader } = props;\n\n    const attachEvents = (g: SVGGElement) => {\n        if (!g) return;\n        if (window.PointerEvent) {\n            const pointerUpdate = (e: PointerEvent) => {\n                if (!e.buttons) return;\n                const rect = g.getBoundingClientRect();\n\n                const eventPoint = toSVGCoordinate(g.ownerSVGElement!, e.clientX, e.clientY);\n                const rectPoint = toSVGCoordinate(g.ownerSVGElement!, rect.left, rect.top);\n\n                dispatchUpdateFader(module, fader, ((1 - ((eventPoint.y - rectPoint.y) / FADER_HEIGHT)) * MAX_VALUE) | 0);\n            }\n\n            let frameRef: number | undefined = undefined;;\n\n            const throttled = (e: PointerEvent) => {\n                if (frameRef) cancelAnimationFrame(frameRef);\n                frameRef = requestAnimationFrame(() => {\n                    frameRef = undefined;\n                    pointerUpdate(e);\n                })\n            }\n\n            g.addEventListener(\"pointerdown\", throttled);\n            g.addEventListener(\"pointermove\", throttled);\n        }\n    }\n\n    const onKeyDown = (e: React.KeyboardEvent) => {\n        if (e.key === \"ArrowUp\" || e.key === \"ArrowRight\" || e.key === \"PageUp\") {\n            dispatchUpdateFader(module, fader, Math.min(value + 100, MAX_VALUE));\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"ArrowDown\" || e.key === \"ArrowLeft\" || e.key === \"PageDown\") {\n            dispatchUpdateFader(module, fader, Math.max(value - 100, 0));\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"End\") {\n            dispatchUpdateFader(module, fader, MAX_VALUE);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"Home\") {\n            dispatchUpdateFader(module, fader, 0);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n\n    const offset = (1 - (value / MAX_VALUE)) * FADER_HEIGHT;\n\n    return <g\n        className=\"easel-fader\"\n        transform={`translate(${left}, ${top})`}\n        ref={attachEvents}\n        onKeyDown={onKeyDown}\n        tabIndex={0}\n        role=\"slider\"\n        aria-valuemin={0}\n        aria-valuemax={MAX_VALUE}\n        aria-valuenow={value}\n        aria-label={getReadableName(module, fader)}\n        aria-orientation=\"vertical\">\n        <rect className=\"easel-fader-bg\"\n            fill={color}\n            height={FADER_HEIGHT}\n            width={FADER_WIDTH / 3}\n            x={FADER_WIDTH / 3}\n            y={0}\n            fillOpacity=\"0.6\"\n            rx={FADER_WIDTH / 6}\n            stroke=\"var(--color-outline)\" />\n        <rect className=\"easel-fader-bg filled\"\n            fill={color}\n            height={FADER_HEIGHT - offset}\n            width={FADER_WIDTH / 3}\n            x={FADER_WIDTH / 3}\n            y={offset}\n            rx={FADER_WIDTH / 6}\n            stroke=\"var(--color-outline)\" />\n        <circle className=\"easel-fader-handle\"\n            fill={color}\n            r={HANDLE_WIDTH}\n            cx={FADER_WIDTH / 3 + FADER_WIDTH / 6}\n            cy={offset}\n            stroke=\"var(--color-outline)\" />\n        <rect width={FADER_WIDTH} height={FADER_HEIGHT} x=\"0\" y=\"0\" opacity=\"0\" />\n        {label && <LabelText text={label} x={FADER_WIDTH / 2} y={FADER_HEIGHT + 50} anchor=\"middle\"/>}\n    </g>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        value: (state.patch as any)[ownProps.module]?.[ownProps.fader],\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n};\n\nexport const FaderView = connect(mapStateToProps, mapDispatchToProps)(FaderViewImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { getReadableName } from \"../midiMessages\";\nimport { dispatchUpdateFader } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\nimport { toSVGCoordinate } from \"../util\";\n\nexport interface KnobProps {\n    color: string;\n    x: number;\n    y: number;\n    value: number;\n    module: string;\n    fader: string;\n    onChange?: (value: number) => void;\n\n    dispatchUpdateFader: (module: string, param: string, value: number) => void;\n}\n\nconst MAX_VALUE = 0x7ff;\nconst KNOB_RADIUS = 25;\nconst KNOB_THICKNESS = 18;\n\nexport const KnobImpl = (props: KnobProps) => {\n    const { color, x, y, value, module, fader, dispatchUpdateFader } = props;\n\n    const minAngle = 135 * Math.PI / 180;\n    const maxAngle = 405 * Math.PI / 180;\n    const angle = minAngle + (value / MAX_VALUE) * (maxAngle - minAngle);\n\n    const attachEvents = (g: SVGGElement) => {\n        if (!g) return;\n        if (window.PointerEvent) {\n            const pointerUpdate = (e: PointerEvent) => {\n                if (!e.buttons) return;\n                const rect = g.getBoundingClientRect();\n\n                const eventPoint = toSVGCoordinate(g.ownerSVGElement!, e.clientX, e.clientY);\n                const rectPoint = toSVGCoordinate(g.ownerSVGElement!, rect.left + rect.width / 2, rect.top + rect.height / 2)\n                let angle = Math.atan2(eventPoint.y - rectPoint.y, eventPoint.x - rectPoint.x);\n                if (angle < minAngle) {\n                    angle += Math.PI * 2\n                }\n                else if (angle > maxAngle) {\n                    angle -= Math.PI * 2\n                }\n\n                if (angle < minAngle || angle > maxAngle) return;\n\n                dispatchUpdateFader(module, fader, Math.min(MAX_VALUE, Math.max(0, (((angle - minAngle) / (maxAngle - minAngle)) * MAX_VALUE)) | 0));\n            }\n\n            let frameRef: number | undefined = undefined;;\n\n            const throttled = (e: PointerEvent) => {\n                if (frameRef) cancelAnimationFrame(frameRef);\n                frameRef = requestAnimationFrame(() => {\n                    frameRef = undefined;\n                    pointerUpdate(e);\n                })\n            }\n\n            g.addEventListener(\"pointerdown\", throttled);\n            g.addEventListener(\"pointermove\", throttled);\n        }\n    }\n\n    const onKeyDown = (e: React.KeyboardEvent) => {\n        if (e.key === \"ArrowUp\" || e.key === \"ArrowRight\" || e.key === \"PageUp\") {\n            dispatchUpdateFader(module, fader, Math.min(value + 100, MAX_VALUE));\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"ArrowDown\" || e.key === \"ArrowLeft\" || e.key === \"PageDown\") {\n            dispatchUpdateFader(module, fader, Math.max(value - 100, 0));\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"End\") {\n            dispatchUpdateFader(module, fader, MAX_VALUE);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"Home\") {\n            dispatchUpdateFader(module, fader, 0);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n    const innerArcFlag = angle - minAngle < Math.PI ? \"0\" : \"1\";\n\n    return <g\n        className=\"easel-knob\"\n        transform={`translate(${x}, ${y})`}\n        ref={attachEvents}\n        tabIndex={0}\n        role=\"slider\"\n        aria-valuemin={0}\n        aria-valuemax={MAX_VALUE}\n        aria-valuenow={value}\n        aria-label={getReadableName(module, fader)}\n        onKeyDown={onKeyDown}>\n        <path\n            className=\"knob-bg-outline\"\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 1 1 ${Math.cos(maxAngle) * KNOB_RADIUS} ${Math.sin(maxAngle) * KNOB_RADIUS}`}\n            stroke=\"var(--color-outline)\"\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS + 2}\n        />\n        <path\n            className=\"knob-bg\"\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 1 1 ${Math.cos(maxAngle) * KNOB_RADIUS} ${Math.sin(maxAngle) * KNOB_RADIUS}`}\n            stroke=\"var(--color-switch-bg)\"\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS}\n        />\n        <path\n            className=\"knob-fg-outline\"\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 ${innerArcFlag} 1 ${Math.cos(angle) * KNOB_RADIUS} ${Math.sin(angle) * KNOB_RADIUS}`}\n            stroke=\"var(--color-outline)\"\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS - 2}\n        />\n        <path\n            className=\"knob-fg\"\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 ${innerArcFlag} 1 ${Math.cos(angle) * KNOB_RADIUS} ${Math.sin(angle) * KNOB_RADIUS}`}\n            stroke={color}\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS - 4}\n        />\n        <rect width={KNOB_RADIUS * 2} height={KNOB_RADIUS * 2} x={-KNOB_RADIUS} y={-KNOB_RADIUS} opacity=\"0\" />\n    </g>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        value: (state.patch as any)[ownProps.module]?.[ownProps.fader],\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n};\n\nexport const Knob = connect(mapStateToProps, mapDispatchToProps)(KnobImpl);","import * as React from \"react\";\nimport { LabelText } from \"./labelText\";\n\nexport interface SectionProps {\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    label?: string;\n    fill?: string;\n}\n\nexport const Section = (props: React.PropsWithChildren<SectionProps>) => {\n    const { width, height, left, top, label, fill, children } = props;\n\n    return <g className=\"section\" transform={`translate(${left}, ${top})`}>\n        <rect\n            x={0} y={0}\n            width={width}\n            height={height}\n            strokeWidth={1}\n            fill={fill || \"none\"}\n            stroke=\"var(--color-outline)\"/>\n        {children}\n        {label && <LabelText x={width / 2} y={height - 10} text={label} anchor=\"middle\"/>}\n    </g>\n}","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { dispatchUpdateSwitch } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\n\nimport { SwitchValue } from \"../types\";\nimport { LabelText } from \"./labelText\";\n\nimport \"../styles/toggleSwitch.css\";\n\nexport interface ToggleSwitchProps {\n    color: string;\n    top: number;\n    left: number;\n\n    topOption?: string;\n    middleOption?: string\n    bottomOption?: string;\n\n    module: string;\n    param: string;\n    twoWay?: boolean;\n\n    value: SwitchValue;\n    onChange: (value: SwitchValue) => void;\n\n\n    dispatchUpdateSwitch: (module: string, param: string, value: SwitchValue) => void;\n}\n\nconst TOGGLE_HEIGHT = 50;\nconst TOGGLE_WIDTH = 20;\nconst TOGGLE_HANDLE_RADIUS_RATIO = 0.75;\n\n\nexport const ToggleSwitchImpl = (props: ToggleSwitchProps) => {\n    const { color, left, top, value, topOption, middleOption, bottomOption, module, param, twoWay, onChange, dispatchUpdateSwitch } = props;\n\n    let cy = TOGGLE_WIDTH / 2;\n\n    if (value === \"middle\") {\n        cy = TOGGLE_HEIGHT / 2;\n    }\n    else if (value === \"bottom\") {\n        cy = TOGGLE_HEIGHT - (TOGGLE_WIDTH / 2);\n    }\n\n    const onClick = (e?: React.MouseEvent) => {\n        e?.preventDefault();\n        e?.stopPropagation();\n        switch (value) {\n            case \"bottom\": return dispatchUpdateSwitch(module, param, \"top\");\n            case \"middle\": return dispatchUpdateSwitch(module, param, \"bottom\");\n            case \"top\": return dispatchUpdateSwitch(module, param, twoWay ? \"bottom\" : \"middle\");\n        }\n    }\n\n    const onKeyDown = (e: React.KeyboardEvent<SVGGElement>) => {\n        const charCode = (typeof e.which == \"number\") ? e.which : e.keyCode;\n        if (charCode === 13 /* enter */ || charCode === 32 /* space */) {\n            e.preventDefault();\n            onClick()\n        }\n    }\n\n\n    return <g\n        className=\"easel-toggle\"\n        transform={`translate(${left}, ${top})`}\n        onClick={onClick}\n        onKeyDown={onKeyDown}\n        tabIndex={0}>\n        <rect className=\"easel-toggle-bg\"\n            fill=\"var(--color-switch-bg)\"\n            height={TOGGLE_HEIGHT}\n            width={TOGGLE_WIDTH}\n            rx={TOGGLE_WIDTH / 2}\n            stroke=\"var(--color-outline)\"\n            x={0}\n            y={0} />\n        <circle\n            cx={TOGGLE_WIDTH / 2}\n            cy={cy}\n            r={TOGGLE_HANDLE_RADIUS_RATIO * TOGGLE_WIDTH / 2}\n            fill={color}\n            stroke=\"var(--color-outline)\"\n            />\n        {topOption &&\n            <LabelText\n                x={TOGGLE_WIDTH + 15}\n                y={TOGGLE_WIDTH / 2}\n                text={topOption}\n                alignment=\"middle\"\n                />\n        }\n        {middleOption &&\n            <LabelText\n                x={TOGGLE_WIDTH + 15}\n                y={(TOGGLE_HEIGHT / 2)}\n                text={middleOption}\n                alignment=\"middle\"\n                />\n        }\n        {bottomOption &&\n            <LabelText\n                x={TOGGLE_WIDTH + 15}\n                y={TOGGLE_HEIGHT - TOGGLE_WIDTH / 2}\n                text={bottomOption}\n                alignment=\"middle\"\n                />\n        }\n    </g>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        value: (state.patch as any)[ownProps.module]?.[ownProps.param],\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateSwitch,\n};\n\nexport const ToggleSwitch = connect(mapStateToProps, mapDispatchToProps)(ToggleSwitchImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchUpdateFader, dispatchUpdateSwitch } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { ComplexOscillator } from \"../../types\";\nimport { FaderView } from \"../fader\";\nimport { Knob } from \"../knob\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface ComplexOscillatorViewProps extends ComplexOscillator {\n}\n\nexport const ComplexOscillatorViewImpl = (props: ComplexOscillatorViewProps) => {\n    const {\n        pitch,\n        pitchCV,\n        polarity,\n        keyboard,\n        timbre,\n        timbreCV,\n        timbreKnob,\n        waveshape\n    } = props;\n    return <Section left={970} top={120} width={305} height={500}>\n        <Section left={0} top={0} width={305} height={30} label=\"COMPLEX OSCILLATOR\" />\n        <Section left={0} top={30} width={175} height={85} label=\"keyboard\">\n            <ToggleSwitch\n                color=\"var(--color-complex-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"on\"\n                bottomOption=\"off\"\n\n                value={keyboard}\n                twoWay={true}\n                module={\"complexOsc\"} param={\"keyboard\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={175} height={85} label=\"polarity\">\n            <ToggleSwitch\n                color=\"var(--color-complex-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"-\"\n                bottomOption=\"+\"\n\n                value={polarity}\n                twoWay={true}\n                module={\"complexOsc\"} param={\"polarity\"}\n            />\n        </Section>\n        <Section left={175} top={30} width={130} height={170} label=\"timbre\">\n            <Knob\n                x={65}\n                y={45}\n                value={timbreKnob}\n                color=\"var(--color-complex-oscillator)\"\n                module={\"complexOsc\"}\n                fader={\"timbreKnob\"} \n            />\n            <ToggleSwitch\n                color=\"var(--color-complex-oscillator)\"\n                top={90}\n                left={20}\n\n                value={waveshape}\n                module={\"complexOsc\"} param={\"waveshape\"}\n            />\n            <path className=\"wave-path\" stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 95 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10\" />\n            <path className=\"wave-path\" stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 110 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10\" />\n            <path className=\"wave-path\" stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 125 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10\" />\n        </Section>\n        <Section left={0} top={200} width={305} height={300}>\n            <FaderView left={30} top={20} value={pitchCV} color=\"var(--color-complex-oscillator)\" module={\"complexOsc\"} fader={\"pitchCV\"} />\n            <FaderView left={105} top={20} value={pitch} color=\"var(--color-complex-oscillator)\" label=\"pitch\" module={\"complexOsc\"} fader={\"pitch\"}/>\n            <FaderView left={180} top={20} value={timbreCV} color=\"var(--color-complex-oscillator)\" module={\"complexOsc\"} fader={\"timbreCV\"}/>\n            <FaderView left={255} top={20} value={timbre} color=\"var(--color-complex-oscillator)\" label=\"timbre\" module={\"complexOsc\"} fader={\"timbre\"}/>\n        </Section>\n    </Section>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...state.patch.complexOsc\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n    dispatchUpdateSwitch\n};\n\nexport const ComplexOscillatorView = connect(mapStateToProps, mapDispatchToProps)(ComplexOscillatorViewImpl);","import { Easel } from \"./types\";\nimport { encodePatch } from \"./util\";\n\nconst PATCH_DB_NAME = \"PATCH_DB\";\nlet _db: IDBDatabase;\nlet openPromise: Promise<IDBDatabase>;\n\nexport interface SavedPatch {\n    name: string;\n    patch: string;\n    createdTime: number;\n    lastSavedTime: number;\n\n    // id is populated by the db\n    id?: number;\n    preview?: string;\n}\n\nasync function initDBAsync() {\n    if (_db) return _db;\n\n    if (!openPromise) {\n        openPromise = new Promise((resolve, reject) => {\n\n            const request = indexedDB.open(PATCH_DB_NAME, 2);\n        \n            request.onerror = event => {\n                reject();\n            };\n        \n            request.onupgradeneeded = event => {\n                const db = request.result;\n                const objectStore = db.createObjectStore(\n                    \"patches\", \n                    {\n                        autoIncrement: true,\n                        keyPath: \"id\"\n                    }\n                );\n                objectStore.createIndex(\"name\", \"name\", { unique: false });\n                objectStore.createIndex(\"patch\", \"patch\", { unique: false });\n                objectStore.createIndex(\"preview\", \"preview\", { unique: false });\n                objectStore.createIndex(\"createdTime\", \"createdTime\", { unique: false });\n                objectStore.createIndex(\"lastSavedTime\", \"lastSavedTime\", { unique: false });\n            };\n        \n            request.onsuccess = event => {\n                _db = request.result;\n                resolve(_db);\n            }\n        });\n    }\n    \n    return openPromise;\n}\n\nasync function lookupEntryAsync(id: number): Promise<SavedPatch | undefined> {\n    const db = await initDBAsync();\n\n    return new Promise((resolve, reject) => {\n        const transaction = db.transaction([\"patches\"], \"readwrite\");\n        const objectStore = transaction.objectStore(\"patches\");\n        const request = objectStore.get(id) as IDBRequest<SavedPatch>;\n        request.onerror = event => {\n            reject();\n        };\n        request.onsuccess = event => {\n            resolve(request.result);\n        };\n    })\n}\n\nasync function addEntryAsync(entry: SavedPatch): Promise<SavedPatch> {\n    const db = await initDBAsync();\n\n    return new Promise<SavedPatch>((resolve, reject) => {\n        const transaction = db.transaction([\"patches\"], \"readwrite\");\n        const objectStore = transaction.objectStore(\"patches\");\n        const request = objectStore.add(entry);\n        request.onerror = event => {\n            reject();\n        };\n        request.onsuccess = event => {\n            resolve({\n                ...entry,\n                id: request.result as number\n            })\n        };\n    })\n}\n\nasync function updateEntryAsync(entry: SavedPatch): Promise<SavedPatch> {\n    const db = await initDBAsync();\n\n    return new Promise((resolve, reject) => {\n        const transaction = db.transaction([\"patches\"], \"readwrite\");\n        const objectStore = transaction.objectStore(\"patches\");\n        const toStore = {\n            ...entry,\n            lastSavedTime: Date.now()\n        };\n        const request = objectStore.put(toStore);\n        request.onerror = event => {\n            reject();\n        };\n        request.onsuccess = event => {\n            resolve({\n                ...toStore,\n                id: request.result as number\n            });\n        };\n    })\n}\n\nasync function listEntriesAsync(): Promise<SavedPatch[]> {\n    const db = await initDBAsync();\n\n    return new Promise((resolve, reject) => {\n        const transaction = db.transaction([\"patches\"], \"readwrite\");\n        const objectStore = transaction.objectStore(\"patches\");\n        const request = objectStore.openCursor();\n\n        const allEntries: SavedPatch[] = [];\n\n        request.onerror = event => {\n            reject();\n        }\n\n        request.onsuccess = event => {\n            const cursor = request.result;\n\n            if (cursor) {\n                allEntries.push(cursor.value)\n                cursor.continue();\n            }\n            else {\n                resolve(allEntries);\n            }\n        }\n    })\n} \n\nexport async function savePatchAsync(name: string, patch: Easel, preview?: string) {\n    const entry = {\n        name,\n        patch: encodePatch(patch),\n        preview,\n        createdTime: Date.now(),\n        lastSavedTime: Date.now()\n    };\n\n    return await addEntryAsync(entry);\n}\n\nexport async function updatePatchAsync(entry: SavedPatch) {\n    return await updateEntryAsync(entry);\n}\n\nexport async function getPatchAsync(id: number): Promise<SavedPatch | undefined> {\n    return await lookupEntryAsync(id);\n}\n\nexport async function allPatchesAsync(): Promise<SavedPatch[]> {\n    return await listEntriesAsync();\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { LabelText } from \"../labelText\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface DualLoPassGatesProps {\n\n}\n\nexport const DualLoPassGates = (props: DualLoPassGatesProps) => {\n    return <Section left={1275} top={120} width={300} height={500}>\n        <Section left={0} top={0} width={300} height={30} label=\"DUAL LO PASS GATE\" />\n        <Section left={0} top={30} width={300} height={85} label=\"gate 2 source\">\n\n        <ToggleSwitch\n                color=\"var(--color-dual-lo-pass-gate)\"\n                top={5}\n                left={85}\n\n                topOption=\"aux in\"\n                middleOption=\"mod oscillator\"\n                bottomOption=\"gate 1\"\n\n                module={\"gates\"} param={\"gate2Source\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={300} height={85} label=\"mode select\">\n            <ToggleSwitch\n                color=\"var(--color-dual-lo-pass-gate)\"\n                top={5}\n                left={35}\n                label=\"gate 1\"\n\n                module={\"gates\"} param={\"gate1Mode\"}\n            />\n\n            <ToggleSwitch\n                color=\"var(--color-dual-lo-pass-gate)\"\n                top={5}\n                left={245}\n                label=\"gate 2\"\n\n                module={\"gates\"} param={\"gate2Mode\"}\n            />\n\n            <LabelText\n                x={150}\n                y={15}\n                text={\"lopass filter\"}\n                anchor=\"middle\"\n                alignment=\"middle\"\n                />\n\n            <LabelText\n                x={150}\n                y={30}\n                text={\"combination\"}\n                anchor=\"middle\"\n                alignment=\"middle\"\n                />\n\n            <LabelText\n                x={150}\n                y={45}\n                text={\"voltage controlled amp\"}\n                anchor=\"middle\"\n                alignment=\"middle\"\n                />\n        </Section>\n        <Section left={0} top={200} width={300} height={300}>\n            <FaderView left={30} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" module={\"gates\"} fader={\"level1CV\"}/>\n            <FaderView left={105} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" label=\"gate 1\" module={\"gates\"} fader={\"level1\"}/>\n            <FaderView left={180} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" module={\"gates\"} fader={\"level2CV\"}/>\n            <FaderView left={255} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" label=\"gate 2\" module={\"gates\"} fader={\"level2\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface EnvelopeGeneratorProps {\n\n}\n\nexport const EnvelopeGenerator = (props: EnvelopeGeneratorProps) => {\n    return <Section left={315} top={120} width={200} height={500}>\n        <Section left={0} top={0} width={200} height={30} label=\"ENVELOPE GENERATOR\" />\n        <Section left={0} top={30} width={200} height={85} label=\"trigger select\">\n            <ToggleSwitch\n                color=\"var(--color-envelope-generator)\"\n                top={5}\n                left={35}\n\n                topOption=\"keyboard\"\n                middleOption=\"pulser\"\n                bottomOption=\"sequencer\"\n\n                module={\"envelope\"} param={\"triggerSelect\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={200} height={85} label=\"mode select\">\n            <ToggleSwitch\n                color=\"var(--color-envelope-generator)\"\n                top={5}\n                left={35}\n\n                topOption=\"sustained\"\n                middleOption=\"transient\"\n                bottomOption=\"self\"\n\n                module={\"envelope\"} param={\"modeSelect\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={200} height={300}>\n            <FaderView left={25} top={20} value={0} color=\"var(--color-envelope-generator)\" label=\"attack\" module={\"envelope\"} fader={\"attack\"}/>\n            <FaderView left={90} top={20} value={0} color=\"var(--color-envelope-generator)\" label=\"sustain\" module={\"envelope\"} fader={\"sustain\"}/>\n            <FaderView left={155} top={20} value={0} color=\"var(--color-envelope-generator)\" label=\"decay\" module={\"envelope\"} fader={\"decay\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface ModulationOscillatorProps {\n\n}\n\nexport const ModulationOscillator = (props: ModulationOscillatorProps) => {\n    return <Section left={665} top={120} width={305} height={500}>\n        <Section left={0} top={0} width={305} height={30} label=\"MODULATION OSCILLATOR\" />\n        <Section left={0} top={30} width={175} height={85} label=\"keyboard\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"on\"\n                bottomOption=\"off\"\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"modOsc\"} param={\"keyboard\"}\n            />\n        </Section>\n        <Section left={175} top={30} width={130} height={85} label=\"waveshape\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={20}\n\n                value={\"top\"}\n                module={\"modOsc\"} param={\"waveshape\"}\n            />\n            <path className=\"wave-path\" stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 10 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10\" />\n            <path className=\"wave-path\" stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 25 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10\" />\n            <path className=\"wave-path\" stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 40 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10\" />\n        </Section>\n        <Section left={0} top={115} width={175} height={85} label=\"range\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"high\"\n                bottomOption=\"low\"\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"modOsc\"} param={\"range\"}\n            />\n        </Section>\n        <Section left={175} top={115} width={130} height={85} label=\"modulation\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={20}\n\n                topOption=\"bal. ext\"\n                middleOption=\"a.m. osc.\"\n                bottomOption=\"f.m. osc.\"\n\n                value={\"top\"}\n                module={\"modOsc\"} param={\"modulationType\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={305} height={300}>\n            <FaderView left={30} top={20} value={0} color=\"var(--color-modulation-oscillator)\" module={\"modOsc\"} fader={\"frequencyCV\"}/>\n            <FaderView left={105} top={20} value={0} color=\"var(--color-modulation-oscillator)\" label=\"frequency\" module={\"modOsc\"} fader={\"frequency\"}/>\n            <FaderView left={180} top={20} value={0} color=\"var(--color-modulation-oscillator)\" module={\"modOsc\"} fader={\"modulationCV\"}/>\n            <FaderView left={255} top={20} value={0} color=\"var(--color-modulation-oscillator)\" label=\"modulation\" module={\"modOsc\"} fader={\"modulation\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { Jack, ConnectionPoint } from \"../jack\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface PatchbayProps {\n\n}\n\nexport const Patchbay = (props: PatchbayProps) => {\n    return <Section left={0} top={620} width={1575} height={120}>\n        <Section left={0} top={0} width={180} height={120}>\n            <Section left={0} top={0} width={180} height={30} label=\"KEYBOARD OUTPUT\" />\n            <Jack\n                x={30}\n                y={65}\n                color=\"var(--color-keyboard-pulse)\"\n                connectionPoint={ConnectionPoint.PulseOutput}\n                text=\"pulse\" />\n            <Jack\n                x={90}\n                y={65}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={0}\n                text=\"pressure\" />\n            <Jack\n                x={150}\n                y={65}\n                color=\"var(--color-keyboard-pitch)\"\n                connectionPoint={ConnectionPoint.PitchOutput}\n                text=\"pitch\" />\n        </Section>\n        <Section left={180} top={0} width={135} height={120}>\n            <Section left={0} top={0} width={135} height={30} label=\"RANDOM VOLTAGE\" />\n\n            <Section left={0} top={30} width={135} height={90} label=\"trigger source\">\n                <ToggleSwitch\n                    color=\"var(--color-random-voltage)\"\n                    top={5}\n                    left={23}\n\n                    topOption=\"keyboard\"\n                    middleOption=\"pulser\"\n                    bottomOption=\"sequencer\"\n\n                    value={\"top\"}\n                    module={\"random\"} param={\"triggerSource\"}\n                />\n            </Section>\n        </Section>\n        <Section left={315} top={0} width={1260} height={120}>\n            <Jack\n                x={32}\n                y={30}\n                color=\"var(--color-input)\"\n                connectionPoint={ConnectionPoint.EnvelopeAttackInput}\n                arrow=\"short\"\n                id={0} />\n            <Jack\n                x={32}\n                y={90}\n                color=\"var(--color-sequencer)\"\n                connectionPoint={ConnectionPoint.SequentialVoltageOutput}\n                id={0} />\n            <Jack\n                x={97}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"medium\"\n                connectionPoint={ConnectionPoint.EnvelopeSustainInput}\n                id={0} />\n            <Jack\n                x={163}\n                y={30}\n                color=\"var(--color-input)\"\n                arrow=\"short\"\n                connectionPoint={ConnectionPoint.EnvelopeDecayInput}\n                id={0} />\n            <Jack\n                x={163}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={0} />\n            <Jack\n                x={239}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.PulserPeriodInput}\n                id={0} />\n\n            <Jack\n                x={313}\n                y={30}\n                color=\"var(--color-envelope-generator)\"\n                connectionPoint={ConnectionPoint.EnvelopeGeneratorOutput}\n                id={0} />\n            <Jack\n                x={313}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={1} />\n            <Jack\n                x={388}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ModulationOscFrequencyInput} />\n\n\n            <Jack\n                x={463}\n                y={30}\n                color=\"var(--color-pulser)\"\n                connectionPoint={ConnectionPoint.PulserOutput}\n                id={1} />\n            <Jack\n                x={463}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={1} />\n            <Jack\n                x={538}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ModulationOscModulationInput} />\n\n\n            <Jack\n                x={613}\n                y={30}\n                color=\"var(--color-sequencer)\"\n                connectionPoint={ConnectionPoint.SequentialVoltageOutput}\n                id={1} />\n            <Jack\n                x={613}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={2} />\n            <Jack\n                x={693}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ComplexOscPitchInput} />\n\n\n            <Jack\n                x={768}\n                y={30}\n                color=\"var(--color-envelope-generator)\"\n                connectionPoint={ConnectionPoint.EnvelopeGeneratorOutput}\n                id={1} />\n            <Jack\n                x={768}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={2} />\n            <Jack\n                x={843}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ComplexOscTimbreInput} />\n\n            <Jack\n                x={918}\n                y={30}\n                color=\"var(--color-pulser)\"\n                connectionPoint={ConnectionPoint.PulserOutput}\n                id={2} />\n            <Jack\n                x={918}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={3} />\n            <Jack\n                x={998}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.LoPassGate1Input} />\n            \n            <Jack\n                x={1073}\n                y={30}\n                color=\"var(--color-envelope-generator)\"\n                connectionPoint={ConnectionPoint.EnvelopeGeneratorOutput}\n                id={2} />\n            <Jack\n                x={1073}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={3} />\n            <Jack\n                x={1148}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.LoPassGate2Input} />\n        \n            <Jack\n                x={1223}\n                y={30}\n                color=\"var(--color-pulser)\"\n                connectionPoint={ConnectionPoint.PulserOutput}\n                id={3} />\n            <Jack\n                x={1223}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={4} />\n            \n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface PulserProps {\n\n}\n\nexport const Pulser = (props: PulserProps) => {\n    return <Section left={515} top={120} width={150} height={500}>\n        <Section left={0} top={0} width={150} height={30} label=\"PULSER\" />\n        <Section left={0} top={30} width={150} height={85} label=\"trigger select\">\n            <ToggleSwitch\n                color=\"var(--color-pulser)\"\n                top={5}\n                left={32}\n\n                topOption=\"keyboard\"\n                middleOption=\"self\"\n                bottomOption=\"sequencer\"\n\n                value={\"top\"}\n                module={\"pulser\"} param={\"triggerSelect\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={150} height={85} label=\"mode\">\n            <ToggleSwitch\n                color=\"var(--color-pulser)\"\n                top={5}\n                left={32}\n\n                topOption=\"triggered\"\n                middleOption=\"off\"\n                bottomOption=\"once\"\n\n                value={\"top\"}\n                module={\"pulser\"} param={\"modeSelect\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={150} height={300}>\n            <FaderView left={30} top={20} value={0} color=\"var(--color-pulser)\" module={\"pulser\"} fader={\"periodCV\"}/>\n            <FaderView left={105} top={20} value={0} color=\"var(--color-pulser)\" label=\"period\" module={\"pulser\"} fader={\"period\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { LabelText } from \"../labelText\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface SequencerProps {\n\n}\n\nexport const Sequencer = (props: SequencerProps) => {\n    return <Section left={0} top={120} width={315} height={500}>\n        <Section left={0} top={0} width={315} height={30} label=\"SEQUENTIAL VOLTAGE SOURCE\" />\n        <Section left={0} top={30} width={175} height={85} label=\"trigger select\">\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={35}\n\n                topOption=\"keyboard\"\n                middleOption=\"pulser\"\n                bottomOption=\"off\"\n\n                value={\"top\"}\n                module={\"sequencer\"} param={\"triggerSelect\"}\n            />\n        </Section>\n        <Section left={175} top={30} width={140} height={85} label=\"stages\">\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={40}\n\n                topOption=\"3\"\n                middleOption=\"4\"\n                bottomOption=\"5\"\n\n                value={\"top\"}\n                module={\"sequencer\"} param={\"stages\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={315} height={85} label=\"pulse sequence\">\n            <LabelText x={25} y={20} text=\"1\" />\n            <LabelText x={80} y={20} text=\"2\" />\n            <LabelText x={135} y={20} text=\"3\" />\n            <LabelText x={190} y={20} text=\"4\" />\n            <LabelText x={245} y={20} text=\"5\" />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={42}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse1\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={97}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse2\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={152}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse3\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={207}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse4\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={262}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse5\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={315} height={300} label=\"sequencer voltage levels\">\n            <FaderView left={52} top={20} value={800} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage1\"}/>\n            <FaderView left={107} top={20} value={1500} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage2\"}/>\n            <FaderView left={162} top={20} value={2500} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage3\"}/>\n            <FaderView left={217} top={20} value={0} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage4\"}/>\n            <FaderView left={272} top={20} value={0} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage5\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport '../styles/iconButton.css';\n\n\nexport interface IconButtonProps {\n    left: number;\n    top: number;\n    title: string;\n    onClick: () => void;\n}\n\nconst ICON_BUTTON_WIDTH = 60;\n\nexport const IconButton = (props: React.PropsWithChildren<IconButtonProps>) => {\n    const { children, left, top, title, onClick } = props;\n    \n    const onKeydown = (ev: React.KeyboardEvent<SVGGElement>) => {\n        if (ev.key === \"Enter\") {\n            onClick();\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n    }\n\n    return <g\n        transform={`translate(${left} ${top})`}\n        className=\"icon-button\"\n        aria-label={title}\n        onClick={onClick}\n        onKeyDown={onKeydown}\n        tabIndex={0}\n        role=\"button\">\n        <rect\n            stroke=\"var(--color-outline)\"\n            width={ICON_BUTTON_WIDTH}\n            height={ICON_BUTTON_WIDTH}\n            fill=\"var(--color-background)\"\n            />\n            <g transform={`translate(${5} ${5})`}>\n                {children}\n            </g>\n    </g>\n}","\nexport const DownloadIcon = () =>\n<path\n    d=\"M 20 2.5 h 10 v 25 h 10 l -15 15 l -15 -15 h 10 v -25 z M 2.5 45 h 45 v 2.5 h -45 z\"     \n    stroke=\"var(--color-outline)\"\n    fill=\"var(--color-background)\" />","export const FolderIcon = () =>\n    <>\n        <path\n            d=\"M 5 7.5\n            a 2.5 2.5 1 0 0 -2.5 2.5\n            v 35\n            a 2.5 2.5 1 0 0 2.5 2.5\n            h 37.5\n            a 2.5 2.5 1 0 0 2.5 -2.5\n            v -30\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            h -20\n            a 2.5 2.5 1 0 1 -2.5 -2.5\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            z\"     \n            stroke=\"var(--color-outline)\"\n            fill=\"var(--color-background)\" />\n        <path\n            d=\"M 10 10\n            a 2.5 2.5 1 0 0 -2.5 2.5\n            l -5 32.5\n            a 2.5 2.5 1 0 0 2.5 2.5\n            h 37.5\n            a 2.5 2.5 1 0 0 2.5 -2.5\n            l 5 -27.5\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            h -20\n            a 2.5 2.5 1 0 1 -2.5 -2.5\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            z\"    \n            stroke=\"var(--color-outline)\"\n            fill=\"var(--color-background)\" />\n    </>","export const MidiIcon = () => <>\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"25\"\n        cy=\"25\"\n        r=\"22.5\"\n    />\n    <path\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        d=\"M 20 5 a 20.5 20.5 1 1 0 10 0 v 2.5 h -10 z\"\n    />\n\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"37.5\"\n        cy=\"25\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"33.83\"\n        cy=\"33.83\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"25\"\n        cy=\"37.5\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"16.16\"\n        cy=\"33.83\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"12.5\"\n        cy=\"25\"\n        r=\"2.5\"\n    />\n</>","\nexport const SaveIcon = () =>\n    <path\n    d=\"M 7.5 2.5 a 5 5 1 0 0 -5 5 v 35 a 5 5 1 0 0 5 5 h 35 a 5 5 1 0 0 5 -5  v -32.5 l -7.5 -7.5 h -32.5 M 10 47.5 v -17.5 a 2.5 2.5 1 0 1 2.5 -2.5 h 25 a 2.5 2.5 1 0 1 2.5 2.5 v 17.5 M 12.5 2.5 v 15 h 25 v -15 M 35 5 v 10 h -7.5 v -10 h 7.75 M 12.5 30 h 25 v 2.5 h -25 v -2.75 M 12.5 35 h 25 v 2.5 h -25 v -2.75 M 12.5 40 h 25 v 2.5 h -25 v -2.75\"     \n    stroke=\"var(--color-outline)\"\n    fill=\"var(--color-background)\" />","import * as React from \"react\";\n\nimport '../styles/titleInput.css';\n\nexport interface TitleInputProps {\n    value: string;\n    left: number;\n    top: number;\n    onChange: (newValue: string) => void;\n    \n    width: number;\n    height: number;\n}\n\nexport const TitleInput = (props: TitleInputProps) => {\n    const { value, left, top, onChange, width, height } = props;\n    const [ currentValue, setCurrentValue ] = React.useState<string | undefined>();\n\n    const onInputChanged = (ev: React.ChangeEvent<HTMLInputElement>) => {\n        setCurrentValue(ev.currentTarget.value);\n    }\n\n    const onBlurEvent = (ev: React.FocusEvent<HTMLInputElement>) => {\n        if (currentValue) onChange(currentValue)\n        setCurrentValue(undefined);\n    }\n\n    const onKeydown = (ev: React.KeyboardEvent<HTMLInputElement>) => {\n        if (ev.key === \"Enter\") ev.currentTarget.blur();\n    }\n\n    return <g transform={`translate(${left} ${top})`} className=\"title-input\">\n        <rect\n            width={width}\n            height={height}\n            fill=\"none\"\n            stroke=\"var(--color-outline)\"\n            />\n        <foreignObject\n            width={width}\n            height={height}>\n            <input\n                type=\"text\"\n                value={currentValue == undefined ? value : currentValue}\n                onChange={onInputChanged}\n                onBlur={onBlurEvent}\n                onKeyDown={onKeydown}\n                />\n        </foreignObject>\n    </g>\n}","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { SavedPatch, savePatchAsync, updatePatchAsync } from \"../../indexedDB\";\nimport { dispatchSetPatchName, dispatchShowModal, dispatchOpenSavedPatch } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Easel, ModalType } from \"../../types\";\nimport { createPreviewURI, encodePatch } from \"../../util\";\nimport { IconButton } from \"../iconButton\";\nimport { DownloadIcon } from \"../icons/downloadIcon\";\nimport { FolderIcon } from \"../icons/folderIcon\";\nimport { MidiIcon } from \"../icons/midiIcon\";\nimport { SaveIcon } from \"../icons/saveIcon\";\nimport { Jack, ConnectionPoint } from \"../jack\";\nimport { LabelText } from \"../labelText\";\nimport { Section } from \"../section\";\nimport { TitleInput } from \"../titleInput\";\n\nexport interface TopBarProps {\n    dispatchSetPatchName: (name: string) => void;\n    dispatchShowModal: (type: ModalType) => void;\n    dispatchOpenSavedPatch: (patch: SavedPatch) => void;\n    patchName: string;\n    saved?: SavedPatch;\n    patch: Easel;\n    patchNotSaved: boolean;\n}\n\nexport const TopBarImpl = (props: TopBarProps) => {\n    const { patchName, saved, patch, patchNotSaved, dispatchSetPatchName, dispatchShowModal, dispatchOpenSavedPatch } = props;\n\n    let svgRef: SVGSVGElement;\n    const handleRef = (ref: SVGGElement) => {\n        if (ref) svgRef = ref.ownerSVGElement!\n    }\n\n    const onSaveClicked = async () => {\n        let saveResult: SavedPatch;\n        if (saved) {\n            saveResult = await updatePatchAsync({\n                ...saved,\n                patch: encodePatch(patch),\n                preview: createPreviewURI(svgRef),\n                name: patchName\n            });\n        }\n        else {\n            saveResult = await savePatchAsync(patchName, patch, createPreviewURI(svgRef));\n        }\n\n        dispatchOpenSavedPatch(saveResult);\n    }\n\n\n    return <Section left={0} top={0} width={1575} height={120}>\n        <g ref={handleRef} />\n        <Section left={0} top={0} width={840} height={120}>\n            <Section left={0} top={0} width={840} height={30} label=\"EASEL PROGRAM MANAGER\" />\n            <IconButton\n                left={15}\n                top={45}\n                title=\"Saved Patches\"\n                onClick={() => dispatchShowModal(\"file\")}>\n                <FolderIcon />\n            </IconButton>\n            <IconButton\n                left={90}\n                top={45}\n                title=\"Save Patch\"\n                onClick={onSaveClicked}>\n                <SaveIcon />\n            </IconButton>\n            <IconButton\n                left={165}\n                top={45}\n                title=\"Send patch to easel\"\n                onClick={() => dispatchShowModal(\"download\")}>\n                <DownloadIcon />\n            </IconButton>\n            <IconButton\n                left={240}\n                top={45}\n                title=\"Midi Config\"\n                onClick={() => dispatchShowModal(\"midi\")}>\n                <MidiIcon />\n            </IconButton>\n            <TitleInput\n                left={315}\n                top={45}\n                height={60}\n                width={410}\n                onChange={dispatchSetPatchName}\n                value={patchName}\n                />\n            <Jack\n                x={785}\n                y={65}\n                color=\"var(--color-modulation-oscillator)\"\n                connectionPoint={ConnectionPoint.ModulationCVOutput}\n                text=\"mod cv out\" />\n        </Section>\n        <Section left={840} top={0} width={305} height={120}>-\n            <Section left={0} top={0} width={305} height={30} label=\"EXTERNAL CV\" />\n            <Jack\n                x={55}\n                y={65}\n                color=\"var(--color-input)\"\n                connectionPoint={ConnectionPoint.PanelInput}\n                text=\"to panel\" />\n            <Jack\n                x={152.5}\n                y={65}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.Panel1Output}\n                id={0}\n                text=\"from panel 1\" />\n            <Jack\n                x={250}\n                y={65}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.Panel2Output}\n                text=\"from panel 2\" />\n        </Section>\n        <Section left={1145} top={0} width={130} height={120}>-\n            <Section left={0} top={0} width={130} height={30} label=\"COMP OSC\" />\n            {/* <path \n                d=\"M 65 65 h 45 a 5 5 1 0 1 5 5 v 60 a 5 5 1 0 1 -5 5 h -40 a 5 5 1 0 0 -5 5 v 30\"\n                stroke=\"var(--color-outline)\"\n                strokeDasharray=\"3 3\"\n                fill=\"none\"\n            /> */}\n            <Jack\n                x={65}\n                y={65}\n                color=\"var(--color-input)\"\n                connectionPoint={ConnectionPoint.ComplexOscWaveshapeInput}\n                text=\"waveshape\" />\n        </Section>\n        <Section left={1275} top={0} width={300} height={120}>\n            <Section left={0} top={0} width={300} height={30} label=\"PRE AMP / ENVELOPE DETECTOR\" />\n            {patchNotSaved &&\n                <g transform=\"translate(15, 45)\">\n                    <LabelText className=\"big\" x={90} y={28} text=\"Patch not\" anchor=\"middle\" />\n                    <LabelText className=\"big\" x={90} y={50} text=\"saved!\" anchor=\"middle\" />\n                </g>\n            }\n            <Jack\n                x={250}\n                y={65}\n                color=\"var(--color-sequencer)\"\n                connectionPoint={ConnectionPoint.EnvelopeDetectorOutput}\n                text=\"env det out\" />\n        </Section>\n    </Section>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    let patchNotSaved = !state.saved;\n\n    if (state.saved) {\n        patchNotSaved = state.patchEdited || state.saved.name !== state.name;\n    }\n\n    return {\n        ...ownProps,\n        patchName: state.name,\n        saved: state.saved,\n        patch: state.patch,\n        patchNotSaved\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchSetPatchName,\n    dispatchShowModal,\n    dispatchOpenSavedPatch\n};\n\nexport const TopBar = connect(mapStateToProps, mapDispatchToProps)(TopBarImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { listMIDIOutputsAsync } from \"../midi\";\nimport { dispatchConnectCV, dispatchSetMIDIOutput, dispatchDisconnectCV } from \"../store/dispatch\";\nimport { DragPoint, State } from \"../store/reducer\";\nimport { Connection } from \"../types\";\nimport { distance, toSVGCoordinate } from \"../util\";\nimport { Cable } from \"./cable\";\nimport { ConnectionPoint } from \"./jack\";\nimport { ComplexOscillatorView } from \"./modules/complexOscillator\";\nimport { DualLoPassGates } from \"./modules/dualLoPassGates\";\nimport { EnvelopeGenerator } from \"./modules/envelopeGenerator\";\nimport { ModulationOscillator } from \"./modules/modulationOscillator\";\nimport { Patchbay } from \"./modules/patchbay\";\nimport { Pulser } from \"./modules/pulser\";\nimport { Sequencer } from \"./modules/sequencer\";\nimport { TopBar } from \"./modules/topBar\";\n\nexport interface EaselProps {\n    dragPoints: DragPoint[];\n    connections: Connection[];\n    dispatchConnectCV: (startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) => void;\n    dispatchDisconnectCV: (startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) => void;\n    dispatchSetMIDIOutput: (name: string) => void;\n}\n\nconst DRAG_RADIUS = 25;\n\nasync function initAsync(dispatchSetMIDIOutput: (name: string) => void) {\n    const inputs = await listMIDIOutputsAsync();\n    for (const input of inputs) {\n        if (input[1].indexOf(\"iProgram\") !== -1) {\n            dispatchSetMIDIOutput(input[0]);\n        }\n    }\n    console.log(`INPUTS: ${inputs.join(\",\")}`)\n}\n\nexport const EaselImpl = (props: EaselProps) => {\n    const { dragPoints, connections, dispatchConnectCV, dispatchDisconnectCV, dispatchSetMIDIOutput } = props;\n\n    const [dragStart, setDragStart] = React.useState<DragPoint>();\n    const [dragEnd, setDragEnd] = React.useState<DOMPoint>();\n\n    React.useEffect(() => {\n        initAsync(dispatchSetMIDIOutput);\n    }, [])\n\n    let svgRef: SVGSVGElement;\n\n    const handleSVGRef = (ref: SVGSVGElement) => {\n        if (ref) svgRef = ref;\n    }\n\n    React.useEffect(() => {\n        const getDragPoint = (svgCoordinate: DOMPoint) => {\n            for (const point of dragPoints) {\n                if (distance(svgCoordinate.x, svgCoordinate.y, point.x, point.y) <= DRAG_RADIUS) {\n                    return point;\n                }\n            }\n        }\n\n        const onPointerDown = (ev: PointerEvent) => {\n            const point = toSVGCoordinate(svgRef, ev.clientX, ev.clientY);\n            const dragPoint = getDragPoint(point);\n\n            if (dragPoint) {\n                setDragStart(dragPoint);\n                ev.preventDefault();\n                ev.stopPropagation();\n            }\n        }\n\n        const onPointerUp = (ev: PointerEvent) => {\n            if (!dragStart) return;\n            const point = toSVGCoordinate(svgRef, ev.clientX, ev.clientY);\n            const dragPoint = getDragPoint(point);\n\n            if (dragPoint) {\n                const startName = ConnectionPoint[dragStart!.connectionPoint];\n                const endName = ConnectionPoint[dragPoint.connectionPoint];\n                \n                const startIsInput = startName.indexOf(\"Input\") !== -1;\n                const endIsInput = endName.indexOf(\"Input\") !== -1;\n\n                if (startIsInput !== endIsInput) {\n                    dispatchConnectCV(\n                        dragStart!.connectionPoint,\n                        dragStart!.id,\n                        dragPoint.connectionPoint,\n                        dragPoint.id\n                    )\n                }\n            }\n\n            setDragStart(undefined);\n            setDragEnd(undefined);\n        }\n\n        const onPointerMove = (ev: PointerEvent) => {\n            if (!dragStart) return;\n\n            const point = toSVGCoordinate(svgRef, ev.clientX, ev.clientY);\n            setDragEnd(point);\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n\n        const onPointerLeave = (ev: PointerEvent) => {\n            setDragStart(undefined);\n            setDragEnd(undefined);\n        }\n\n        svgRef.addEventListener(\"pointerdown\", onPointerDown);\n        svgRef.addEventListener(\"pointerup\", onPointerUp);\n        svgRef.addEventListener(\"pointermove\", onPointerMove, true);\n        svgRef.addEventListener(\"pointerleave\", onPointerLeave);\n        \n        return () => {\n            svgRef.removeEventListener(\"pointerdown\", onPointerDown);\n            svgRef.removeEventListener(\"pointerup\", onPointerUp);\n            svgRef.removeEventListener(\"pointermove\", onPointerMove, true);\n            svgRef.removeEventListener(\"pointerleave\", onPointerLeave);\n        }\n    }, [dragStart, dragPoints]);\n\n    const takenColors: boolean[] = [];\n    const cables = dragPoints.length ? connections.map((c, index) => {\n        const start = dragPoints.find(p => c.start.connectionPoint === p.connectionPoint && c.start.id === p.id);\n        const end = dragPoints.find(p => c.end.connectionPoint === p.connectionPoint && c.end.id === p.id);\n        if (!start || !end) return undefined;\n        takenColors[c.color] = true;\n        return <Cable\n            key={index}\n            x0={start!.x}\n            y0={start!.y}\n            x1={end!.x}\n            y1={end!.y}\n            colorIndex={c.color}\n            onClick={() => dispatchDisconnectCV(\n                c.start.connectionPoint,\n                c.start.id,\n                c.end.connectionPoint,\n                c.end.id\n            )} />\n    }) : []\n\n    let nextColor = takenColors.length;\n    for (let i = 0; i < takenColors.length; i++) {\n        if (!takenColors[i]) {\n            nextColor = i;\n            break;\n        }\n    }\n\n    return <svg viewBox=\"0 0 1580 770\" xmlns=\"http://www.w3.org/2000/svg\" ref={handleSVGRef}>\n        <defs>\n            <pattern id=\"stripes\"\n                    x=\"0\" y=\"0\" width=\"8\" height=\"8\"\n                    patternUnits=\"userSpaceOnUse\"\n                    patternTransform=\"rotate(-45)\" >\n\n                <rect\n                    x={0}\n                    y={0}\n                    width={1}\n                    height={8}\n                    fill=\"var(--color-outline)\" />\n\n            </pattern>\n        </defs>\n        <g className=\"easel-content\" transform=\"translate(2, 2)\">\n            <TopBar />\n            <Sequencer />\n            <EnvelopeGenerator />\n            <Pulser />\n            <ModulationOscillator />\n            <ComplexOscillatorView />\n            <DualLoPassGates />\n            <Patchbay />\n            { cables }\n            {dragPoints && \n                dragPoints.map(p => \n                    <circle className=\"drag-point\" cx={p.x} cy={p.y} r={DRAG_RADIUS} opacity={0} />\n                )\n            }\n            {dragStart &&\n                <Cable\n                    dragging={true}\n                    x0={dragStart.x}\n                    y0={dragStart.y}\n                    x1={dragEnd ? dragEnd.x : dragStart.x}\n                    y1={dragEnd ? dragEnd.y : dragStart.y}\n                    colorIndex={nextColor}\n                    />\n            }\n\n        </g>\n    </svg>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        dragPoints: state.dragPoints,\n        connections: state.patch.connections\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchConnectCV,\n    dispatchSetMIDIOutput,\n    dispatchDisconnectCV\n};\n\nexport const Easel = connect(mapStateToProps, mapDispatchToProps)(EaselImpl);","export interface ControlProps {\n    id?: string;\n    className?: string;\n    ariaLabel?: string;\n    ariaHidden?: boolean;\n    ariaDescribedBy?: string;\n    role?: string;\n}\n\nexport interface ContainerProps extends React.PropsWithChildren<ControlProps> {\n}\n\nexport function fireClickOnEnter(e: React.KeyboardEvent<HTMLElement>) {\n    const charCode = (typeof e.which == \"number\") ? e.which : e.keyCode;\n    if (charCode === 13 /* enter */ || charCode === 32 /* space */) {\n        e.preventDefault();\n        e.currentTarget.click();\n    }\n}\n\nexport function classList(...classes: (string | undefined | boolean)[]) {\n    return (classes\n        .filter(c => typeof c === \"string\") as string[])\n        .reduce((prev, c) => prev.concat(c.split(\" \")), [] as string[])\n        .map(c => c.trim())\n        .filter(c => !!c)\n        .join(\" \");\n}\n\nexport function nodeListToArray<U extends Node>(list: NodeListOf<U>): U[] {\n    const out: U[] = [];\n\n    for (const node of list) {\n        out.push(node);\n    }\n    return out;\n}","import * as React from \"react\";\nimport { classList, ControlProps, fireClickOnEnter } from \"./util\";\n\nexport interface ButtonViewProps extends ControlProps {\n    buttonRef?: (ref: HTMLButtonElement) => void;\n    title: string;\n    label?: string | JSX.Element;\n    leftIcon?: string;\n    rightIcon?: string;\n    disabled?: boolean;     // Disables the button in an accessible-friendly way.\n    hardDisabled?: boolean; // Disables the button and prevents clicks. Not recommended. Use `disabled` instead.\n    href?: string;\n    target?: string;\n    tabIndex?: number;\n    style?: React.CSSProperties;\n\n    /** Miscellaneous aria pass-through props */\n    ariaControls?: string;\n    ariaExpanded?: boolean;\n    ariaHasPopup?: string;\n    ariaPosInSet?: number;\n    ariaSetSize?: number;\n    ariaSelected?: boolean;\n}\n\n\nexport interface ButtonProps extends ButtonViewProps {\n    onClick: () => void;\n    onBlur?: () => void;\n    onKeydown?: (e: React.KeyboardEvent) => void;\n}\n\nexport const Button = (props: ButtonProps) => {\n    const {\n        id,\n        className,\n        style,\n        ariaLabel,\n        ariaHidden,\n        ariaDescribedBy,\n        ariaControls,\n        ariaExpanded,\n        ariaHasPopup,\n        ariaPosInSet,\n        ariaSetSize,\n        ariaSelected,\n        role,\n        onClick,\n        onKeydown,\n        onBlur,\n        buttonRef,\n        title,\n        label,\n        leftIcon,\n        rightIcon,\n        hardDisabled,\n        href,\n        target,\n        tabIndex\n    } = props;\n\n    let {\n        disabled\n    } = props;\n\n    disabled = disabled || hardDisabled;\n\n\n    const classes = classList(\n        \"common-button\",\n        className,\n        disabled && \"disabled\"\n    );\n\n    let clickHandler = (ev: React.MouseEvent) => {\n        if (onClick) onClick();\n        if (href) window.open(href, target || \"_blank\", \"noopener,noreferrer\")\n        ev.stopPropagation();\n        ev.preventDefault();\n    }\n\n    return (\n        <button\n            id={id}\n            className={classes}\n            style={style}\n            title={title}\n            ref={buttonRef}\n            onClick={!disabled ? clickHandler : undefined}\n            onKeyDown={onKeydown || fireClickOnEnter}\n            onBlur={onBlur}\n            role={role || \"button\"}\n            tabIndex={tabIndex || (disabled ? -1 : 0)}\n            disabled={hardDisabled}\n            aria-label={ariaLabel}\n            aria-hidden={ariaHidden}\n            aria-controls={ariaControls}\n            aria-expanded={ariaExpanded}\n            aria-haspopup={ariaHasPopup as any}\n            aria-posinset={ariaPosInSet}\n            aria-setsize={ariaSetSize}\n            aria-describedby={ariaDescribedBy}\n            aria-selected={ariaSelected}>\n                <span className=\"common-button-flex\">\n                    {leftIcon && <i className={leftIcon} aria-hidden={true}/>}\n                    <span className=\"common-button-label\">\n                        {label}\n                    </span>\n                    {rightIcon && <i className={\"right \" + rightIcon} aria-hidden={true}/>}\n                </span>\n        </button>\n    );\n}","import * as React from \"react\";\nimport { ContainerProps } from \"./util\";\n\nexport interface FocusListProps extends ContainerProps {\n    role: string;\n    childTabStopId?: string;\n    useUpAndDownArrowKeys?: boolean;\n    onItemReceivedFocus?: (item: HTMLElement) => void;\n}\n\n/**\n * A list of focusable items that represents a single tab stop in the tab order. The\n * children of the list can be navigated between using the arrow keys. Any child with\n * a tabindex other than -1 will be included in the list.\n *\n * If childTabStopId is specified, then the tab stop will be placed on the child with\n * the given id instead of the outer div.\n */\nexport const FocusList = (props: FocusListProps) => {\n    const {\n        id,\n        className,\n        role,\n        ariaHidden,\n        ariaLabel,\n        childTabStopId,\n        children,\n        onItemReceivedFocus,\n        useUpAndDownArrowKeys\n    } = props;\n\n    let focusableElements: HTMLElement[];\n    let focusList: HTMLDivElement;\n\n    const handleRef = (ref: HTMLDivElement) => {\n        if (!ref || focusList) return;\n\n        focusList = ref;\n\n        const focusable = ref.querySelectorAll(`[tabindex]:not([tabindex=\"-1\"]),[data-isfocusable]`);\n        focusableElements = [];\n\n        for (const element of focusable.values()) {\n            focusableElements.push(element as HTMLElement);\n\n            // Remove them from the tab order, menu items are navigable using the arrow keys\n            element.setAttribute(\"tabindex\", \"-1\");\n            element.setAttribute(\"data-isfocusable\", \"true\");\n        }\n\n        if (childTabStopId) {\n            const childTabStop = focusList.querySelector(\"#\" + childTabStopId);\n\n            if (childTabStop) {\n                childTabStop.setAttribute(\"tabindex\", \"0\");\n            }\n        }\n    }\n\n    const onKeyDown = (e: React.KeyboardEvent<HTMLElement>) => {\n        if  (!focusableElements?.length) return;\n\n        const target = document.activeElement as HTMLElement;\n        const index = focusableElements.indexOf(target);\n\n        const focus = (element: HTMLElement) => {\n            element.focus();\n            if (onItemReceivedFocus) onItemReceivedFocus(element);\n        }\n\n        if (index === -1 && target !== focusList) return;\n\n        if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (target.click) {\n                target.click();\n            }\n            else {\n                // SVG Elements\n                target.dispatchEvent(new Event(\"click\"));\n            }\n        }\n        else if (e.key === (useUpAndDownArrowKeys ? \"ArrowDown\" : \"ArrowRight\")) {\n            if (index === focusableElements.length - 1 || target === focusList) {\n                focus(focusableElements[0]);\n            }\n            else {\n                focus(focusableElements[index + 1]);\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === (useUpAndDownArrowKeys ? \"ArrowUp\" : \"ArrowLeft\")) {\n            if (index === 0 || target === focusList) {\n                focus(focusableElements[focusableElements.length - 1]);\n            }\n            else {\n                focus(focusableElements[Math.max(index - 1, 0)]);\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"Home\") {\n            focus(focusableElements[0]);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === \"End\") {\n            focus(focusableElements[focusableElements.length - 1]);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n    return (\n        <div id={id}\n            className={className}\n            role={role}\n            tabIndex={childTabStopId ? undefined : 0}\n            onKeyDown={onKeyDown}\n            ref={handleRef}\n            aria-hidden={ariaHidden}\n            aria-label={ariaLabel}>\n            {children}\n        </div>\n    );\n}","import * as React from \"react\";\nimport \"../../styles/dropdown.css\";\n\nimport { classList, ControlProps } from \"./util\";\nimport { Button, ButtonViewProps } from \"./Button\";\nimport { FocusList } from \"./FocusList\";\n\nexport interface DropdownItem extends ButtonViewProps {\n    id: string;\n    role?: \"option\" | undefined;\n}\n\nexport interface DropdownProps extends ControlProps {\n    id: string;\n    selectedId: string;\n    items: DropdownItem[];\n    onItemSelected: (id: string) => void;\n    tabIndex?: number;\n}\n\nexport const Dropdown = (props: DropdownProps) => {\n    const {\n        id,\n        className,\n        ariaHidden,\n        ariaLabel,\n        role,\n        items,\n        tabIndex,\n        selectedId,\n        onItemSelected\n    } = props;\n\n    const [ expanded, setExpanded ] = React.useState(false);\n\n    let container: HTMLDivElement;\n\n    const handleContainerRef = (ref: HTMLDivElement) => {\n        if (!ref) return;\n        container = ref;\n    }\n\n    const onMenuButtonClick = () => {\n        setExpanded(!expanded);\n    }\n\n    const onBlur = (e: React.FocusEvent) => {\n        if (!container) return;\n        if (expanded && !container.contains(e.relatedTarget as HTMLElement)) setExpanded(false);\n    }\n\n    const classes = classList(\"common-dropdown\", className);\n\n    const selected = items.find(item => item.id === selectedId) || items[0];\n    const onItemFocused = (element: HTMLElement) => {\n        if (element.id && items.some(item => item.id === element.id)) onItemSelected(element.id);\n    }\n\n    const onKeyDown = (e: React.KeyboardEvent) => {\n        const selectedIndex = items.indexOf(selected)\n\n        if (e.key === \"ArrowDown\") {\n            if (selectedIndex < items.length - 1) {\n                onItemSelected(items[selectedIndex + 1].id);\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n        else if (e.key === \"ArrowUp\") {\n            if (selectedIndex > 0) {\n                onItemSelected(items[selectedIndex - 1].id);\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n        else if (e.key === \"Enter\") {\n            setExpanded(true);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n    return <div className={classes} ref={handleContainerRef} onBlur={onBlur}>\n        <Button\n            {...selected}\n            id={id}\n            tabIndex={tabIndex}\n            rightIcon={expanded ? \"chevron-up\" : \"chevron-down\"}\n            role={role}\n            className={classList(\"common-dropdown-button\", expanded && \"expanded\", selected.className)}\n            onClick={onMenuButtonClick}\n            onKeydown={onKeyDown}\n            ariaHasPopup=\"listbox\"\n            ariaExpanded={expanded}\n            ariaLabel={ariaLabel}\n            ariaHidden={ariaHidden}\n            />\n        {expanded &&\n            <FocusList role=\"listbox\"\n                className=\"common-menu-dropdown-pane common-dropdown-shadow\"\n                childTabStopId={selectedId}\n                aria-labelledby={id}\n                useUpAndDownArrowKeys={true}\n                onItemReceivedFocus={onItemFocused}>\n                    <ul role=\"presentation\">\n                        { items.map(item =>\n                            <li key={item.id} role=\"presentation\">\n                                <Button\n                                    {...item}\n                                    className={classList(\"common-dropdown-item\", item.className)}\n                                    onClick={() => {\n                                        setExpanded(false);\n                                        onItemSelected(item.id);\n                                    }}\n                                    ariaSelected={item.id === selectedId}\n                                    role=\"option\"/>\n                            </li>\n                        )}\n                    </ul>\n            </FocusList>\n        }\n    </div>\n}","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { addConnectionChangedListener, listMIDIOutputsAsync, removeConnectionChangedListener } from \"../../midi\";\nimport { dispatchHideModal, dispatchSetMIDIOutput } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Dropdown, DropdownItem } from \"../common/Dropdown\";\n\nexport interface MidiOutputSelectorProps {\n    dispatchSetMIDIOutput: (id?: string) => void;\n    midiOutput?: string;\n}\n\nconst MidiOutputSelectorImpl = (props: MidiOutputSelectorProps) => {\n    const { dispatchSetMIDIOutput, midiOutput } = props;\n\n    const [midiOutputs, setMidiOutputs] = React.useState<[string, string][]>([]);\n\n    React.useEffect(() => {\n        const updateMidiOutputsAsync = async () => {\n            const outputs = await listMIDIOutputsAsync();\n            setMidiOutputs(outputs);\n        }\n\n        addConnectionChangedListener(updateMidiOutputsAsync);\n        return () => {\n            removeConnectionChangedListener(updateMidiOutputsAsync);\n        }\n    }, []);\n\n    const outputs: DropdownItem[] = [\n        {\n            label: \"None\",\n            title: \"None\",\n            id: \"None\"\n        }\n    ]\n\n    for (const device of midiOutputs) {\n        outputs.push({\n            label: device[1],\n            title: device[1],\n            id: \"output-\" + device[0]\n        })\n    }\n\n    let selectedOutput = \"None\";\n\n    if (midiOutputs.some(i => i[0] === midiOutput)) {\n        selectedOutput = \"output-\" + midiOutput;\n    }\n\n    const onOutputSelected = (id: string) => {\n        if (id === \"None\") dispatchSetMIDIOutput(undefined);\n        else dispatchSetMIDIOutput(id.split(\"-\").slice(1).join(\"-\"));\n    }\n\n    return <div className=\"modal-field\">\n        <div className=\"modal-field-label\">\n            Midi output:\n        </div>\n        <Dropdown\n            id=\"midi-output\"\n            onItemSelected={onOutputSelected}\n            items={outputs}\n            selectedId={selectedOutput}\n        />\n    </div>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        midiOutput: state.midiOutput,\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n    dispatchSetMIDIOutput\n};\n\nexport const MidiOutputSelector = connect(mapStateToProps, mapDispatchToProps)(MidiOutputSelectorImpl);","import * as React from \"react\";\nimport { classList, nodeListToArray } from \"./util\";\n\nexport interface FocusTrapProps extends React.PropsWithChildren<{}> {\n    onEscape: () => void;\n    id?: string;\n    className?: string;\n    arrowKeyNavigation?: boolean;\n    dontStealFocus?: boolean;\n    includeOutsideTabOrder?: boolean;\n}\n\nexport const FocusTrap = (props: FocusTrapProps) => {\n    const {\n        children,\n        id,\n        className,\n        onEscape,\n        arrowKeyNavigation,\n        dontStealFocus,\n        includeOutsideTabOrder\n    } = props;\n\n    let container: HTMLDivElement;\n\n    const [stoleFocus, setStoleFocus] = React.useState(false);\n\n    const getElements = () => {\n        const all = nodeListToArray(\n            includeOutsideTabOrder ? container.querySelectorAll(`[tabindex]`) :\n            container.querySelectorAll(`[tabindex]:not([tabindex=\"-1\"])`)\n        );\n\n        return all as HTMLElement[];\n    }\n\n    const handleRef = (ref: HTMLDivElement) => {\n        if (!ref) return;\n        container = ref;\n\n        if (!dontStealFocus && !stoleFocus && !ref.contains(document.activeElement) && getElements().length) {\n            container.focus();\n\n            // Only steal focus once\n            setStoleFocus(true);\n        }\n    }\n\n    const onKeyDown = (e: React.KeyboardEvent) => {\n        if (!container) return;\n\n        const moveFocus = (forward: boolean, goToEnd: boolean) => {\n            const focusable = getElements();\n\n            if (!focusable.length) return;\n\n            const index = focusable.indexOf(e.target as HTMLElement);\n\n            if (forward) {\n                if (goToEnd) {\n                    focusable[focusable.length - 1].focus();\n                }\n                else if (index === focusable.length - 1) {\n                    focusable[0].focus();\n                }\n                else {\n                    focusable[index + 1].focus();\n                }\n            }\n            else {\n                if (goToEnd) {\n                    focusable[0].focus();\n                }\n                else if (index === 0) {\n                    focusable[focusable.length - 1].focus();\n                }\n                else {\n                    focusable[Math.max(index - 1, 0)].focus();\n                }\n            }\n\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        if (e.key === \"Escape\") {\n            onEscape();\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else  if (e.key === \"Tab\") {\n            if (e.shiftKey) moveFocus(false, false);\n            else moveFocus(true, false);\n        }\n        else if (arrowKeyNavigation) {\n            if (e.key === \"ArrowDown\") {\n                moveFocus(true, false);\n            }\n            else if (e.key === \"ArrowUp\") {\n                moveFocus(false, false);\n            }\n            else if (e.key === \"Home\") {\n                moveFocus(false, true);\n            }\n            else if (e.key === \"End\") {\n                moveFocus(true, true);\n            }\n        }\n    }\n\n    return <div id={id}\n        className={classList(\"common-focus-trap\", className)}\n        ref={handleRef}\n        onKeyDown={onKeyDown}\n        tabIndex={-1}>\n        {children}\n    </div>\n}","import * as React from \"react\";\n\n\nimport \"../../styles/modal.css\";\nimport { Button } from \"../common/Button\";\nimport { FocusTrap } from \"../common/FocusTrap\";\n\nexport interface ModalAction {\n    label: string;\n    className?: string;\n    onClick: () => void;\n}\n\nexport interface ModalProps {\n    title: string\n    onCloseClick: () => void;\n    className?: string;\n    actions?: ModalAction[]\n}\n\nexport const Modal = (props: React.PropsWithChildren<ModalProps>) => {\n    const { title, onCloseClick, actions, children, className } = props;\n    return <div className=\"modal-container\">\n        <div className=\"modal-background\" onClick={onCloseClick} />\n        <div className={[\"modal\", className].filter(c => !!c).join(\" \")}>\n            <FocusTrap onEscape={onCloseClick}>\n                <div className=\"modal-title-container\">\n                    <div className=\"modal-title\">\n                        { title }\n                    </div>\n                    <button title=\"Close\" onClick={onCloseClick} tabIndex={0}></button>\n                </div>\n                <div className=\"modal-content\">\n                    { children }\n                </div>\n                { !!actions?.length &&\n                    <div className=\"modal-actions\">\n                        {actions.map(action => {\n                            const { label, onClick, className } = action;\n                            return <Button\n                                key={action.label}\n                                title={label}\n                                label={label}\n                                onClick={onClick}\n                                className={className} />\n                        })}\n                    </div>\n                }\n            </FocusTrap>\n        </div>\n    </div>\n}","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { sendMIDIMessagesAsync } from \"../../midi\";\nimport { createDisconnectAllMessages, createPatchMessages } from \"../../midiMessages\";\nimport { dispatchHideModal, dispatchSetMidiSpeed } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Easel, MidiMessageSpeed } from \"../../types\";\nimport { CancellationToken } from \"../../util\";\nimport { Dropdown, DropdownItem } from \"../common/Dropdown\";\nimport { MidiOutputSelector } from \"./midiOutputSelector\";\nimport { Modal, ModalAction } from \"./modal\";\n\nexport interface DownloadModalProps {\n    dispatchHideModal: () => void;\n    dispatchSetMidiSpeed: (speed: MidiMessageSpeed) => void;\n    patch: Easel;\n    patchName: string;\n    midiOutput?: string;\n    midiSpeed: MidiMessageSpeed;\n}\n\nexport const DownloadModalImpl = (props: DownloadModalProps) => {\n    const { dispatchHideModal, patch, patchName, midiOutput, midiSpeed, dispatchSetMidiSpeed } = props;\n    \n    const [selectedSlot, setSelectedSlot] = React.useState<string>(\"None\");\n    const [sendingPatch, setSendingPatch] = React.useState(false);\n    const [progress, setProgress] = React.useState(0);\n    const [cancellationToken, setCancellationToken] = React.useState<CancellationToken>();\n\n    const saveSlots: DropdownItem[] = [\n        {\n            label: \"None\",\n            id: \"None\",\n            title: \"None\"\n        }\n    ];\n\n    for (let i = 0; i < 24; i++) {\n        saveSlots.push({\n            label: i < 9 ? \"0\" + (i + 1) : \"\" + (i + 1),\n            title: \"Save Slot \" + (i + 1),\n            id: \"slot-\" + i\n        })\n    }\n\n    const onSaveSlotSelected = (id: string) => {\n        setSelectedSlot(id);\n    }\n\n    const messageSpeeds: DropdownItem[] = [\n        {\n            label: \"Very Slow\",\n            title: \"Very Slow\",\n            id: \"very-slow\"\n        },\n        {\n            label: \"Slow\",\n            title: \"Slow\",\n            id: \"slow\"\n        },\n        {\n            label: \"Medium\",\n            title: \"Medium\",\n            id: \"medium\"\n        },\n        {\n            label: \"Fast\",\n            title: \"Fast\",\n            id: \"fast\"\n        }\n    ];\n\n    const onMidiSpeedSelected = (id: string) => {\n        dispatchSetMidiSpeed(id as MidiMessageSpeed);\n    }\n\n    const actions: ModalAction[] = [];\n\n    if (sendingPatch || midiOutput) {\n        actions.push({\n            label: \"Cancel\",\n            onClick: () => {\n                if (cancellationToken) {\n                    cancellationToken.cancel();\n                }\n                dispatchHideModal();\n            }\n        });\n    }\n\n    if (!sendingPatch && midiOutput) {\n        actions.push({\n            label: \"Send\",\n            onClick: () => {\n                if (cancellationToken) cancellationToken.cancel();\n                setSendingPatch(true);\n                \n                let messages = createPatchMessages(\n                    patch,\n                    true,\n                    patchName,\n                    selectedSlot !== \"None\" ? parseInt(selectedSlot.split(\"-\").slice(-1)[0]) : undefined\n                );\n\n                // Disconnect any connections that might have been made\n                if (selectedSlot === \"None\") {\n                    messages = createDisconnectAllMessages().concat(messages);\n                }\n\n                const token = new CancellationToken();\n                setCancellationToken(token);\n\n                sendMIDIMessagesAsync(midiOutput!, messages, (current, total) => {\n                    setProgress(Math.round((current / total) * 100));\n                }, token)\n                .then(() => {\n                    setCancellationToken(undefined);\n                    dispatchHideModal();\n                });\n            }\n        });\n    }\n\n    const fill = \"var(--color-outline)\"\n    const empty = \"var(--color-background)\"\n\n    return <Modal\n        title=\"Send patch to easel\"\n        onCloseClick={dispatchHideModal}\n        actions={actions}>\n        {!sendingPatch &&\n            <>\n                <MidiOutputSelector />\n                <div className=\"modal-field\">\n                    <div className=\"modal-field-label\">\n                        Save slot:\n                    </div>\n                    <Dropdown\n                        id=\"download-save-slot\"\n                        onItemSelected={onSaveSlotSelected}\n                        items={saveSlots}\n                        selectedId={selectedSlot}\n                    />\n                </div>\n                <div className=\"modal-field\">\n                    <div className=\"modal-field-label\">\n                        Message speed:\n                    </div>\n                    <Dropdown\n                        id=\"download-midi-speed\"\n                        onItemSelected={onMidiSpeedSelected}\n                        items={messageSpeeds}\n                        selectedId={midiSpeed}\n                    />\n                </div>\n            </>\n        }\n        {sendingPatch &&\n            <div className=\"progress-bar-outer\">\n                <div>\n                    Sending patch to easel...\n                </div>\n                <div className=\"progress-bar\" style={{backgroundImage: `linear-gradient(to right, ${fill} 0%, ${fill} ${progress}%, ${empty} ${progress}%, ${empty} 100%)`}} />\n            </div>\n        }\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        patch: state.patch,\n        patchName: state.name,\n        midiOutput: state.midiOutput,\n        midiSpeed: state.midiSpeed\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n    dispatchSetMidiSpeed\n};\n\nexport const DownloadModal = connect(mapStateToProps, mapDispatchToProps)(DownloadModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { allPatchesAsync, SavedPatch } from \"../../indexedDB\";\nimport { dispatchHideModal, dispatchOpenSavedPatch, dispatchShowSaveModal, dispatchCreateNewPatch } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { formatLastEditedDate } from \"../../util\";\nimport { Modal } from \"./modal\";\n\nimport \"../../styles/fileModal.css\";\n\nexport interface FileModalProps {\n    dispatchHideModal: () => void;\n    dispatchCreateNewPatch: () => void;\n    dispatchOpenSavedPatch: (patch: SavedPatch) => void;\n    dispatchShowSaveModal: (patch?: SavedPatch) => void;\n    patchNotSaved: boolean;\n}\n\nexport const FileModalImpl = (props: FileModalProps) => {\n    const { dispatchHideModal, dispatchOpenSavedPatch, dispatchShowSaveModal, dispatchCreateNewPatch, patchNotSaved } = props;\n    const [savedProjects, setSavedProjects] = React.useState<SavedPatch[]>([]);\n\n    React.useEffect(() => {\n        allPatchesAsync().then(setSavedProjects)\n    }, [])\n\n    const onNewPatchClick = () => {\n        dispatchHideModal();\n        if (patchNotSaved) {\n            dispatchShowSaveModal(undefined);\n        }\n        else {\n            dispatchCreateNewPatch();\n        }\n    }\n\n    const onPatchClick = (patch: SavedPatch) => {\n        dispatchHideModal();\n        if (patchNotSaved) {\n            dispatchShowSaveModal(patch);\n        }\n        else {\n            dispatchOpenSavedPatch(patch);\n        }\n    }\n\n    return <Modal\n        title=\"Saved patches\"\n        onCloseClick={dispatchHideModal}>\n        <div className=\"saved-patches-scroller\">\n            <div className=\"saved-patches-list\">\n                <div className=\"saved-patch-list-item new-patch\" onClick={onNewPatchClick} tabIndex={0} role=\"button\">\n                    Create empty patch\n                </div>\n                {savedProjects.map(patch => \n                    <div key={patch.id} className=\"saved-patch-list-item\" onClick={() => onPatchClick(patch)} tabIndex={0} role=\"button\">\n                        <div className=\"saved-patch-detail\">\n                            <div className=\"saved-patch-name\">\n                                {patch.name}\n                            </div>\n                            <div className=\"saved-patch-time\">\n                                Last edited {formatLastEditedDate(patch.lastSavedTime)}\n                            </div>\n                        </div>\n                        <div className=\"saved-patch-preview\">\n                            <img src={patch.preview} alt=\"Preview of patch\" />\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    let patchNotSaved = !state.saved;\n\n    if (state.saved) {\n        patchNotSaved = state.patchEdited || state.saved.name !== state.name;\n    }\n\n    return {\n        ...ownProps,\n        patchNotSaved\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n    dispatchOpenSavedPatch,\n    dispatchShowSaveModal,\n    dispatchCreateNewPatch\n};\n\nexport const FileModal = connect(mapStateToProps, mapDispatchToProps)(FileModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { addConnectionChangedListener, listMIDIInputsAsync, removeConnectionChangedListener } from \"../../midi\";\nimport { dispatchHideModal, dispatchSetMIDIInput } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Dropdown, DropdownItem } from \"../common/Dropdown\";\nimport { MidiOutputSelector } from \"./midiOutputSelector\";\nimport { Modal } from \"./modal\";\n\nexport interface MidiModalProps {\n    dispatchHideModal: () => void;\n    dispatchSetMIDIInput: (id?: string) => void;\n    midiInput?: string;\n}\n\nexport const MidiModalImpl = (props: MidiModalProps) => {\n    const { dispatchHideModal, dispatchSetMIDIInput, midiInput } = props;\n\n    const [midiInputs, setMidiInputs] = React.useState<[string, string][]>([]);\n\n    React.useEffect(() => {\n        const updateMidiInputsAsync = async () => {\n            const inputs = await listMIDIInputsAsync();\n            setMidiInputs(inputs);\n        }\n\n        addConnectionChangedListener(updateMidiInputsAsync);\n        return () => {\n            removeConnectionChangedListener(updateMidiInputsAsync);\n        }\n    }, []);\n\n    const inputs: DropdownItem[] = [\n        {\n            label: \"None\",\n            title: \"None\",\n            id: \"None\"\n        }\n    ]\n\n    for (const device of midiInputs) {\n        inputs.push({\n            label: device[1],\n            title: device[1],\n            id: \"input-\" + device[0]\n        })\n    }\n\n    let selectedInput = \"None\";\n\n    if (midiInputs.some(i => i[0] === midiInput)) {\n        selectedInput = \"input-\" + midiInput;\n    }\n\n    const onInputSelected = (id: string) => {\n        if (id === \"None\") dispatchSetMIDIInput(undefined);\n        else dispatchSetMIDIInput(id.split(\"-\").slice(1).join(\"-\"));\n    }\n\n    return <Modal\n        title=\"Midi config\"\n        onCloseClick={dispatchHideModal}>\n        <div className=\"modal-field\">\n            <div className=\"modal-field-label\">\n                Midi input:\n            </div>\n            <Dropdown\n                id=\"midi-input\"\n                onItemSelected={onInputSelected}\n                items={inputs}\n                selectedId={selectedInput}\n            />\n        </div>\n        <MidiOutputSelector />\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        midiInput: state.midiInput\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n    dispatchSetMIDIInput\n};\n\nexport const MidiModal = connect(mapStateToProps, mapDispatchToProps)(MidiModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { SavedPatch, savePatchAsync, updatePatchAsync } from \"../../indexedDB\";\nimport { dispatchHideModal, dispatchOpenSavedPatch, dispatchCreateNewPatch } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Easel, SaveModalState } from \"../../types\";\nimport { createPreviewURI, encodePatch } from \"../../util\";\nimport { Modal, ModalAction } from \"./modal\";\n\nexport interface SaveModalProps {\n    dispatchHideModal: () => void;\n    dispatchCreateNewPatch: () => void;\n    dispatchOpenSavedPatch: (patch: SavedPatch) => void;\n    patchToLoad: SavedPatch;\n    saved?: SavedPatch;\n    patchName: string;\n    patch: Easel;\n}\n\nexport const SaveModalImpl = (props: SaveModalProps) => {\n    const { dispatchHideModal, dispatchOpenSavedPatch, dispatchCreateNewPatch, patchToLoad, saved, patchName, patch } = props;\n\n    const actions: ModalAction[] = [\n        {\n            label: \"Don't Save\",\n            onClick: () => {\n                dispatchHideModal();\n                if (patchToLoad) {\n                    dispatchOpenSavedPatch(patchToLoad);\n                }\n                else {\n                    dispatchCreateNewPatch();\n                }\n            }\n        },\n        {\n            label: \"Save\",\n            onClick: async () => {\n                dispatchHideModal();\n\n\n                const svgRef = document.querySelector(\".App > svg\") as SVGSVGElement;\n\n                if (saved) {\n                    await updatePatchAsync({\n                        ...saved,\n                        patch: encodePatch(patch),\n                        preview: createPreviewURI(svgRef),\n                        name: patchName\n                    });\n                }\n                else {\n                    await savePatchAsync(patchName, patch, createPreviewURI(svgRef));\n                }\n\n                \n                if (patchToLoad) {\n                    dispatchOpenSavedPatch(patchToLoad);\n                }\n                else {\n                    dispatchCreateNewPatch();\n                }\n            }\n        }\n    ]\n\n    return <Modal\n        className=\"small\"\n        title=\"Unsaved patch\"\n        onCloseClick={dispatchHideModal}\n        actions={actions}>\n        <div className=\"modal-text-content\">\n            Your patch has unsaved changes. Do you want to save before continuing?\n        </div>\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        patchToLoad: (state.modal as SaveModalState).patchToLoad,\n        saved: state.saved,\n        patch: state.patch,\n        patchName: state.name\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n    dispatchOpenSavedPatch,\n    dispatchCreateNewPatch\n};\n\nexport const SaveModal = connect(mapStateToProps, mapDispatchToProps)(SaveModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchUpdateFader } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { ModalState } from \"../../types\";\nimport { DownloadModal } from \"./downloadModal\";\nimport { FileModal } from \"./fileModal\";\nimport { MidiModal } from \"./midiModal\";\nimport { SaveModal } from \"./saveModal\";\n\nexport interface AppModalProps {\n    modalState: ModalState;\n}\n\nexport const AppModalImpl = (props: AppModalProps) => {\n    const { modalState } = props;\n\n    switch (modalState.type) {\n        case \"download\": return <DownloadModal />\n        case \"file\": return <FileModal />\n        case \"midi\": return <MidiModal />\n        case \"save\": return <SaveModal />\n    }\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        modalState: state.modal\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n};\n\nexport const AppModal = connect(mapStateToProps, mapDispatchToProps)(AppModalImpl);","import React from 'react';\nimport './App.css';\nimport './styles/colors.css';\nimport { Easel } from './components/easel';\nimport store from './store/store';\nimport { decodePatch, encodePatch, throttle } from './util';\nimport { dispatchSetPatch, dispatchSetPatchEdited, dispatchOpenSavedPatch, dispatchSetPatchName } from './store/dispatch';\nimport { State } from './store/reducer';\nimport { connect } from 'react-redux';\nimport { ModalState } from './types';\nimport { AppModal } from './components/modals/appModal';\nimport { getLastEditedProject } from './localStorage';\nimport { getPatchAsync, SavedPatch } from './indexedDB';\n\nstore.subscribe(throttle(() => {\n\tconst state = store.getState();\n\tconst current = state.patch;\n\tconst encoded = encodePatch(current);\n\twindow.location.replace(\"#\" + encoded + \"&\" + encodeURIComponent(state.name));\n\n\tif (state.saved) {\n\t\tconst edited = state.saved.patch !== encoded;\n\n\t\tif (!!(state.patchEdited) !== edited) {\n\t\t\tstore.dispatch(dispatchSetPatchEdited(edited));\n\t\t}\n\t}\n}, 500))\n\ninterface AppProps {\n\tmodal?: ModalState\n\tdispatchSetPatch: (patch: any) => void;\n\tdispatchOpenSavedPatch: (patch: SavedPatch) => void;\n\tdispatchSetPatchName: (name: string) => void;\n}\n\nconst AppImpl = (props: AppProps) => {\n\tconst { modal, dispatchSetPatch, dispatchOpenSavedPatch, dispatchSetPatchName } = props;\n\n\tReact.useEffect(() => {\n\t\tconst initAsync = async () => {\n\t\t\tconst lastEdited = getLastEditedProject();\n\t\t\tlet savedPatch: SavedPatch | undefined;\n\t\t\tif (lastEdited) {\n\t\t\t\tsavedPatch = await getPatchAsync(parseInt(lastEdited));\n\t\t\t}\n\t\t\tconst hash = window.location.hash;\n\t\t\tif (hash?.length <= 2) {\n\t\t\t\tif (savedPatch) {\n\t\t\t\t\tdispatchOpenSavedPatch(savedPatch);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst parts = hash.slice(1).split(\"&\");\n\t\t\tconst encodedPatch = parts[0];\n\t\t\tconst patch = decodePatch(encodedPatch);\n\t\t\tconst patchName = decodeURIComponent(parts[1]);\n\n\t\t\tif (savedPatch?.patch === encodedPatch && savedPatch.name === patchName) {\n\t\t\t\tdispatchOpenSavedPatch(savedPatch);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchSetPatch(patch);\n\t\t\tdispatchSetPatchName(patchName);\n\t\t}\n\n\t\tinitAsync();\n\t}, []);\n\t\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Easel />\n\t\t\t{modal && <AppModal />}\n\t\t</div>\n\t);\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n\t\tmodal: state.modal\n    }\n}\n\nconst mapDispatchToProps = {\n\tdispatchSetPatch,\n\tdispatchOpenSavedPatch,\n\tdispatchSetPatchName\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppImpl);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}