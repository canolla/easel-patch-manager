{"version":3,"sources":["midi.ts","store/actions.ts","store/dispatch.ts","util.ts","components/jack.tsx","components/cable.tsx","components/labelText.tsx","components/fader.tsx","components/knob.tsx","components/section.tsx","components/toggleSwitch.tsx","components/modules/complexOscillator.tsx","components/modules/dualLoPassGates.tsx","components/modules/envelopeGenerator.tsx","components/modules/modulationOscillator.tsx","components/modules/patchbay.tsx","components/modules/pulser.tsx","components/modules/sequencer.tsx","components/iconButton.tsx","components/icons/downloadIcon.tsx","components/icons/folderIcon.tsx","components/icons/midiIcon.tsx","components/icons/saveIcon.tsx","components/titleInput.tsx","components/modules/topBar.tsx","components/easel.tsx","midiMessages.ts","store/reducer.ts","store/store.ts","components/modals/modal.tsx","components/modals/downloadModal.tsx","components/modals/fileModal.tsx","components/modals/midiModal.tsx","components/modals/saveModal.tsx","components/modals/appModal.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["midiAccessPromise","getAccessAsync","a","navigator","requestMIDIAccess","sysex","listMIDIDevicesAsync","access","out","outputs","entry","push","name","sendMIDIMessage","output","bytes","get","send","UPDATE_FADER","UPDATE_SWITCH","SET_DRAG_POINT","CONNECT_CV","DISCONNECT_CV","SET_MIDI_INPUT","SET_MIDI_OUTPUT","SET_PATCH","SET_PATCH_NAME","SHOW_MODAL","HIDE_MODAL","dispatchUpdateFader","module","param","value","type","dispatchUpdateSwitch","dispatchHideModal","forEachValue","patch","cb","result","Object","keys","sort","current","Array","isArray","possible","indexOf","toSVGCoordinate","svg","x","y","point","createSVGPoint","matrixTransform","getScreenCTM","inverse","distance","x0","y0","x1","y1","Math","sqrt","pow","cleanPatchName","title","replace","ConnectionPoint","Cable","props","colorIndex","onClick","swap","d","pathString","min","max","stroke","fill","strokeWidth","strokeLinecap","LabelText","text","anchor","alignment","className","textAnchor","alignmentBaseline","OUTER_RADIUS","mapDispatchToProps","dispatchSetDragPoint","connectionPoint","id","Jack","connect","state","ownProps","color","arrow","arrowY","transform","ref","rect","getBoundingClientRect","ownerSVGElement","left","width","top","height","cx","cy","r","x2","y2","FADER_HEIGHT","FADER_WIDTH","FaderView","fader","label","offset","g","window","PointerEvent","frameRef","undefined","throttled","e","cancelAnimationFrame","requestAnimationFrame","buttons","eventPoint","clientX","clientY","rectPoint","pointerUpdate","addEventListener","fillOpacity","rx","opacity","MAX_VALUE","KNOB_RADIUS","Knob","minAngle","PI","maxAngle","angle","innerArcFlag","atan2","cos","sin","KNOB_THICKNESS","Section","children","TOGGLE_WIDTH","ToggleSwitch","topOption","middleOption","bottomOption","twoWay","onChange","TOGGLE_HEIGHT","TOGGLE_HANDLE_RADIUS_RATIO","ComplexOscillatorView","complexOsc","pitch","pitchCV","polarity","keyboard","timbre","timbreCV","timbreKnob","waveshape","DualLoPassGates","EnvelopeGenerator","ModulationOscillator","Patchbay","PulseOutput","PressureOutput","PitchOutput","EnvelopeAttackInput","SequentialVoltageOutput","EnvelopeSustainInput","EnvelopeDecayInput","RandomOutput","PulserPeriodInput","EnvelopeGeneratorOutput","ModulationOscFrequencyInput","PulserOutput","ModulationOscModulationInput","ComplexOscPitchInput","ComplexOscTimbreInput","LoPassGate1Input","LoPassGate2Input","Pulser","Sequencer","IconButton","aria-label","onKeyDown","ev","key","preventDefault","stopPropagation","tabIndex","DownloadIcon","FolderIcon","MidiIcon","SaveIcon","TitleInput","React","currentValue","setCurrentValue","currentTarget","onBlur","blur","dispatchSetPatchName","dispatchShowModal","modalType","TopBar","patchName","ModulationCVOutput","PanelInput","Panel1Output","Panel2Output","ComplexOscWaveshapeInput","EnvelopeDetectorOutput","dispatchSetMIDIOutput","inputs","input","console","log","join","dispatchConnectCV","startPoint","startId","endPoint","endId","dispatchDisconnectCV","Easel","dragPoints","connections","svgRef","dragStart","setDragStart","dragEnd","setDragEnd","initAsync","getDragPoint","svgCoordinate","onPointerDown","dragPoint","onPointerUp","startName","endName","onPointerMove","onPointerLeave","removeEventListener","takenColors","cables","length","map","c","index","start","find","p","end","nextColor","i","viewBox","xmlns","patternUnits","patternTransform","definitions","messageNames","sequencer","triggerSelect","stages","voltage1","voltage2","voltage3","voltage4","voltage5","pulse1","pulse2","pulse3","pulse4","pulse5","envelope","attack","sustain","decay","modeSelect","pulser","period","periodCV","modOsc","range","modulationType","frequency","frequencyCV","modulation","modulationCV","gates","gate2Source","gate1Mode","gate2Mode","level1","level1CV","level2","level2CV","random","triggerSource","connectionIds","getMessageName","getMessageByName","getMessageTemplateBytes","getMessageBytes","getMessageTemplate","template","split","Uint8Array","parseInt","createFaderMessage","createSwitchMessage","num","createConnectCVMessage","from","to","initialState","sendMIDI","interval","lastTime","Date","now","rateLimit","action","cvCount","connection","createDisconnectCVMessage","setDragPoint","makeConnection","existing","slice","concat","breakConnection","filter","defaultModalState","store","createStore","midiOutput","midiInput","modal","Modal","onCloseClick","actions","DownloadModal","FileModal","MidiModal","SaveModal","AppModal","modalState","subscribe","timeout","clearTimeout","setTimeout","throttle","getState","location","addBytes","encodeURIComponent","btoa","data","numBytes","String","fromCharCode","encodePatch","dispatchSetPatch","useEffect","hash","encoded","atob","decodeURIComponent","charCodeAt","readByte","res","decodePatch","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8dd22f11.chunk.js","sourcesContent":["let midiAccess: WebMidi.MIDIAccess;\nlet midiAccessPromise: Promise<WebMidi.MIDIAccess>;\n\nasync function getAccessAsync() {\n    if (midiAccess) return midiAccess;\n    if (!midiAccessPromise) midiAccessPromise = navigator.requestMIDIAccess({ sysex: true });\n    return midiAccessPromise;\n}\n\nexport async function listMIDIDevicesAsync() {\n    const access = await getAccessAsync();\n\n    const out: [string, string][] = [];\n    for (const entry of access.outputs) {\n        out.push([entry[0], entry[1].name!]);\n    }\n    return out;\n}\n\nexport async function sendMIDIMessage(output: string, bytes: Uint8Array) {\n    const access = await getAccessAsync();\n    const out = access.outputs.get(output);\n\n    if (out) {\n        out.send(bytes);\n    }\n}\n\nexport async function sendMIDIMessagesAsync(output: string, messages: Uint8Array[], onProgress?: (current: number, total: number) => void) {\n    const access = await getAccessAsync();\n\n    const out = access.outputs.get(output);\n    if (!out) return;\n\n    return new Promise<void>((resolve, reject) => {\n        let currentIndex = 0;\n        let intervalRef = setInterval(() => {\n            if (currentIndex === messages.length) {\n                clearInterval(intervalRef);\n\n                try {\n                    if (onProgress) onProgress(currentIndex, messages.length);\n                }\n                catch {\n                    // ignore\n                }\n\n                resolve();\n                return;\n            }\n            \n            try {\n                if (onProgress) onProgress(currentIndex, messages.length);\n            }\n            catch {\n                // ignore\n            }\n\n            try {\n                out.send(messages[currentIndex]);\n            }\n            catch (e) {\n                clearInterval(intervalRef);\n                reject(e);\n                return;\n            }\n\n            currentIndex ++;\n        }, 20)\n    },)\n}","export const UPDATE_FADER = \"UPDATE_FADER\";\nexport const UPDATE_SWITCH = \"UPDATE_SWITCH\";\nexport const SET_DRAG_POINT = \"SET_DRAG_POINT\";\nexport const CONNECT_CV = \"CONNECT_CV\";\nexport const DISCONNECT_CV = \"DISCONNECT_CV\";\n\nexport const SET_MIDI_INPUT = \"SET_MIDI_INPUT\";\nexport const SET_MIDI_OUTPUT = \"SET_MIDI_OUTPUT\";\nexport const SET_PATCH = \"SET_PATCH\";\nexport const SET_PATCH_NAME = \"SET_PATCH_NAME\";\n\nexport const SHOW_MODAL = \"SHOW_MODAL\";\nexport const HIDE_MODAL = \"HIDE_MODAL\";","// export interface Easel {\n//     sequencer: SequentialVoltageSource;\n//     envelope: EnvelopeGenerator;\n//     pulser: Pulser;\n//     modOsc: ModulationOscillator;\n//     complexOsc: ComplexOscillator;\n//     gates: DualLoPassGate;\n//     random: Random;\n//     connections: boolean[][];\n// }\n\nimport { ConnectionPoint } from \"../components/jack\";\nimport { ComplexOscillator, DualLoPassGate, Easel, EnvelopeGenerator, ModulationOscillator, Pulser, Random, SwitchValue, ModalType } from \"../types\";\nimport { CONNECT_CV, DISCONNECT_CV, HIDE_MODAL, SET_DRAG_POINT, SET_MIDI_INPUT, SET_MIDI_OUTPUT, SET_PATCH, SET_PATCH_NAME, SHOW_MODAL, UPDATE_FADER, UPDATE_SWITCH } from \"./actions\";\n\n\nexport function dispatchUpdateFader(module: \"envelope\", param: keyof EnvelopeGenerator, value: number): any;\nexport function dispatchUpdateFader(module: \"pulser\", param: keyof Pulser, value: number): any;\nexport function dispatchUpdateFader(module: \"modOsc\", param: keyof ModulationOscillator, value: number): any;\nexport function dispatchUpdateFader(module: \"complexOsc\", param: keyof ComplexOscillator, value: number): any;\nexport function dispatchUpdateFader(module: \"gates\", param: keyof DualLoPassGate, value: number): any;\nexport function dispatchUpdateFader(module: \"random\", param: keyof Random, value: number): any;\nexport function dispatchUpdateFader(module: keyof Easel, param: string, value: number) {\n    return {\n        type: UPDATE_FADER,\n        module,\n        param,\n        value\n    };\n};\n\nexport function dispatchUpdateSwitch(module: \"envelope\", param: keyof EnvelopeGenerator, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"pulser\", param: keyof Pulser, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"modOsc\", param: keyof ModulationOscillator, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"complexOsc\", param: keyof ComplexOscillator, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"gates\", param: keyof DualLoPassGate, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: \"random\", param: keyof Random, value: SwitchValue): any;\nexport function dispatchUpdateSwitch(module: keyof Easel, param: string, value: SwitchValue) {\n    return {\n        type: UPDATE_SWITCH,\n        module,\n        param,\n        value\n    };\n};\n\nexport function dispatchSetDragPoint(connectionPoint: ConnectionPoint, id: number, x: number, y: number) {\n    return {\n        type: SET_DRAG_POINT,\n        connectionPoint,\n        id,\n        x,\n        y\n    }\n}\n\nexport function dispatchConnectCV(startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    return {\n        type: CONNECT_CV,\n        startPoint,\n        startId,\n        endPoint,\n        endId\n    }\n}\n\nexport function dispatchDisconnectCV(startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    return {\n        type: DISCONNECT_CV,\n        startPoint,\n        startId,\n        endPoint,\n        endId\n    }\n}\n\nexport function dispatchSetMIDIInput(name: string) {\n    return {\n        type: SET_MIDI_INPUT,\n        name\n    }\n}\n\nexport function dispatchSetMIDIOutput(name: string) {\n    return {\n        type: SET_MIDI_OUTPUT,\n        name\n    }\n}\n\nexport function dispatchSetPatch(patch: Easel) {\n    return {\n        type: SET_PATCH,\n        patch\n    }\n}\n\nexport function dispatchSetPatchName(name: string) {\n    return {\n        type: SET_PATCH_NAME,\n        name\n    }\n}\n\nexport function dispatchShowModal(modalType: ModalType) {\n    return {\n        modalType,\n        type: SHOW_MODAL\n    }\n}\n\nexport function dispatchHideModal() {\n    return {\n        type: HIDE_MODAL\n    }\n}","import { getMessageName } from \"./midiMessages\";\nimport { Connection, Easel } from \"./types\";\n\nexport function encodePatch(patch: Easel) {\n    let bytes = \"\";\n\n    forEachValue(patch, (value, bytes) => {\n        addBytes(value, bytes);\n        return 0;\n    });\n\n    for (const connection of patch.connections) {\n        addBytes(connection.start.connectionPoint, 1);\n        addBytes(connection.start.id, 1);\n        addBytes(connection.end.connectionPoint, 1);\n        addBytes(connection.end.id, 1);\n        addBytes(connection.color, 1);\n    }\n\n    return encodeURIComponent(btoa(bytes));\n\n    function addBytes(data: number, numBytes: number) {\n        for (let i = 0; i < numBytes; i++) {\n            bytes += String.fromCharCode((data >> (i * 8)) & 0xff);\n        }\n    }\n}\n\nexport function decodePatch(encoded: string) {\n    const bytes = atob(decodeURIComponent(encoded));\n\n    let offset = 0;\n\n    const out = forEachValue(emptyPatch(), (value, numBytes) => {\n        let current = 0;\n\n        for (let i = 0; i < numBytes; i++) {\n            current |= (bytes.charCodeAt(offset) << (i * 8))\n            offset++;\n        }\n\n        return current;\n    });\n\n    out.connections = [];\n\n    const readByte = () => {\n        const res = bytes.charCodeAt(offset);\n        offset++;\n        return res;\n    }\n\n    for (let i = offset; i < bytes.length; i += 5) {\n        const connection: Connection = {\n            start: {\n                connectionPoint: readByte(),\n                id: readByte()\n            },\n            end: {\n                connectionPoint: readByte(),\n                id: readByte()\n            },\n            color: readByte()\n        }\n\n        out.connections.push(connection);\n    }\n\n    return out;\n}\n\nexport function emptyPatch(): Easel {\n    return {\n        sequencer: {\n            triggerSelect: \"bottom\",\n            stages: \"bottom\",\n        \n            voltage1: 0,\n            voltage2: 0,\n            voltage3: 0,\n            voltage4: 0,\n            voltage5: 0,\n            pulse1: \"top\",\n            pulse2: \"top\",\n            pulse3: \"top\",\n            pulse4: \"top\",\n            pulse5: \"top\",\n        },\n        envelope: {\n            attack: 0,\n            sustain: 0,\n            decay: 0,\n            triggerSelect: \"bottom\",\n            modeSelect: \"bottom\",\n        },\n        pulser: {\n            triggerSelect: \"bottom\",\n            modeSelect: \"bottom\",\n            period: 0,\n            periodCV: 0,\n        },\n        modOsc: {\n            keyboard: \"bottom\",\n            waveshape: \"bottom\",\n            range: \"bottom\",\n            modulationType: \"bottom\",\n            frequency: 0,\n            frequencyCV: 0,\n            modulation: 0,\n            modulationCV: 0,\n        },\n        complexOsc: {\n            keyboard: \"bottom\",\n            waveshape: \"bottom\",\n            polarity: \"bottom\",\n            pitch: 0,\n            pitchCV: 0,\n            timbre: 0,\n            timbreCV: 0,\n            timbreKnob: 0,\n        },\n        gates: {\n            gate2Source: \"bottom\",\n            gate1Mode: \"bottom\",\n            gate2Mode: \"bottom\",\n            level1: 0,\n            level1CV: 0,\n            level2: 0,\n            level2CV: 0,\n        },\n        random: {\n            triggerSource: \"bottom\",\n        },\n        connections: [],\n    };\n}\n\nexport function throttle(cb: () => void, interval: number) {\n    let timeout: number | undefined;\n\n    return () => {\n        if (timeout) clearTimeout(timeout);\n\n        timeout = setTimeout(() => {\n            cb();\n            timeout = undefined;\n        }, interval) as any;\n    }\n}\n\nexport function rateLimit(cb: (...args: any) => void, interval: number) {\n    let lastTime = Date.now();\n\n    return (...args: any) => {\n        if (Date.now() - lastTime < interval) return;\n\n        lastTime = Date.now();\n        cb(...args);\n    }\n}\n\nexport function forEachValue(patch: Easel, cb: (value: number, bytes: number, module: string, param: string, originalValue: any) => number) {\n    const result: any = {};\n    for (const module of Object.keys(patch).sort()) {\n        result[module] = {};\n\n        if (module === \"connections\") continue;\n\n        for (const param of Object.keys((patch as any)[module]).sort()) {\n            const current = (patch as any)[module][param];\n\n            if (Array.isArray(current)) continue;\n            \n            if (typeof current === \"string\") {\n                const possible = [\"top\", \"bottom\", \"middle\"];\n                result[module][param] = possible[cb(possible.indexOf(current), 1, module, param, current)];\n            }\n            else {\n                result[module][param] = cb(current, 2, module, param, current);\n            }\n        }\n    }\n\n    return result as Easel;\n}\n\nexport function toSVGCoordinate(svg: SVGSVGElement, x: number, y: number) {\n    const point = svg.createSVGPoint();\n    point.x = x;\n    point.y = y;\n    return point.matrixTransform(svg.getScreenCTM()?.inverse());\n}\n\nexport function distance(x0: number, y0: number, x1: number, y1: number) {\n    return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n}\n\nexport function cleanPatchName(title: string) {\n    return title.replace(/[^a-zA-Z0-9]/g, \"\");\n}","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchSetDragPoint } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\nimport { toSVGCoordinate } from \"../util\";\nimport { LabelText } from \"./labelText\";\n\nexport enum ConnectionPoint {\n    PulseOutput,\n    PressureOutput,\n    PitchOutput,\n    SequentialVoltageOutput,\n    EnvelopeGeneratorOutput,\n    PulserOutput,\n    RandomOutput,\n    Panel1Output,\n    Panel2Output,\n    EnvelopeDetectorOutput,\n    ModulationCVOutput,\n    PulserPeriodInput,\n    ModulationOscFrequencyInput,\n    ModulationOscModulationInput,\n    ComplexOscPitchInput,\n    ComplexOscTimbreInput,\n    LoPassGate1Input,\n    LoPassGate2Input,\n    PanelInput,\n    EnvelopeAttackInput,\n    EnvelopeSustainInput,\n    EnvelopeDecayInput,\n    ComplexOscWaveshapeInput\n}\n\nexport interface JackProps {\n    x: number;\n    y: number;\n    color: string;\n    connectionPoint: ConnectionPoint;\n    id?: number;\n    arrow?: \"long\" | \"medium\" | \"short\";\n    text?: string;\n\n    dispatchSetDragPoint: (connectionPoint: ConnectionPoint, id: number, x: number, y: number) => void;\n}\n\nconst OUTER_RADIUS = 25;\nconst INNER_RADIUS = 12;\n\nexport const JackImpl = (props: JackProps) => {\n    const { x, y, text, color, connectionPoint, id, arrow, dispatchSetDragPoint } = props;\n\n    const handleCircleRef = (ref: SVGCircleElement) => {\n        if (ref) {\n            const rect = ref.getBoundingClientRect();\n            const point = toSVGCoordinate(\n                ref.ownerSVGElement!,\n                rect.left + rect.width / 2,\n                rect.top + rect.height / 2\n            )\n            dispatchSetDragPoint(connectionPoint, id || 0, point.x, point.y);\n        }\n    }\n\n    let arrowY = 0;\n    if (arrow === \"long\") {\n        arrowY = -OUTER_RADIUS - 78;\n    }\n    else if (arrow === \"medium\") {\n        arrowY = -OUTER_RADIUS - 42;\n    }\n    else {\n        arrowY = -OUTER_RADIUS - 12;\n    }\n\n    return <>\n        <g transform={`translate(${x} ${y})`}>        \n            <circle\n                ref={handleCircleRef}\n                cx={0}\n                cy={0}\n                r={OUTER_RADIUS}\n                fill={color}\n                stroke=\"var(--color-outline)\" />\n            <circle \n                cx={0}\n                cy={0}\n                r={INNER_RADIUS}\n                fill=\"#dedede\"\n                stroke=\"var(--color-outline)\"  />\n            {text && \n                <LabelText\n                    text={text}\n                    x={0}\n                    y={OUTER_RADIUS + 20}\n                    alignment=\"baseline\"\n                    anchor=\"middle\" />\n            }\n            {arrow &&\n                <g>\n                    <line\n                        x1={0}\n                        y1={-OUTER_RADIUS}\n                        x2={0}\n                        y2={arrowY}\n                        stroke=\"var(--color-outline)\" />\n                    <path\n                        d={`M 0 ${arrowY - 2} l ${4} ${10} q ${-4} ${-4} ${-8} ${0} Z`}\n                        fill=\"var(--color-outline)\"\n                    />\n                </g>\n            }\n        </g>\n    </>\n}\n\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchSetDragPoint,\n};\n\nexport const Jack = connect(mapStateToProps, mapDispatchToProps)(JackImpl);","import * as React from \"react\";\nimport { distance } from \"../util\";\n\nexport interface CableProps {\n    x0: number;\n    y0: number;\n    x1: number;\n    y1: number;\n    colorIndex: number;\n    onClick?: () => void;\n}\n\nexport const Cable = (props: CableProps) => {\n    let { x0, y0, x1, y1, colorIndex, onClick } = props;\n\n    if (x0 < x1) {\n        let swap = x0;\n        x0 = x1;\n        x1 = swap;\n        swap = y0;\n        y0 = y1;\n        y1 = swap;\n    }\n\n\n    const d = distance(x0, y0, x1, y1);\n    const pathString = `M ${x0} ${y0} q ${(x1 - x0) / 2} ${Math.min(Math.max(10, 200 - d / 10), 100)} ${x1 - x0} ${y1 - y0}`;\n\n    return <>\n            <path\n            d={pathString}\n            stroke=\"var(--color-outline)\"\n            fill=\"none\"\n            strokeWidth={12}\n            strokeLinecap=\"round\"\n            onClick={onClick}\n            />\n        <path\n            d={pathString}\n            stroke={`var(--color-cable-${colorIndex % 9})`}\n            fill=\"none\"\n            strokeWidth={10}\n            strokeLinecap=\"round\"\n            onClick={onClick}\n            />\n\n    </>\n}\n","import * as React from \"react\";\n\nimport \"../styles/labelText.css\"\n\nexport interface LabelTextProps {\n    x: number;\n    y: number;\n    text: string;\n    anchor?: \"start\" | \"middle\" | \"end\"\n    alignment?: \"hanging\" | \"middle\" | \"baseline\"\n}\n\nexport const LabelText = (props: LabelTextProps) => {\n    const { x, y, text, anchor, alignment } = props;\n    return <text \n        className=\"easel-text\"\n        x={x}\n        y={y}\n        textAnchor={anchor}\n        alignmentBaseline={alignment}\n        fill=\"var(--color-outline)\">\n            {text}\n        </text>\n}\n","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchUpdateFader } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\nimport { toSVGCoordinate } from \"../util\";\nimport { LabelText } from \"./labelText\";\n\nexport interface FaderProps {\n    color: string;\n    top: number;\n    left: number;\n    value: number;\n    module: string;\n    fader: string;\n    onChange?: (value: number) => void;\n    label?: string;\n\n    dispatchUpdateFader: (module: string, param: string, value: number) => void;\n}\n\nconst MAX_VALUE = 0x7ff;\nconst FADER_HEIGHT = 220;\nconst FADER_WIDTH = 15;\nconst HANDLE_WIDTH = 12;\n\nexport const FaderViewImpl = (props: FaderProps) => {\n    const { color, left, top, label, value, module, fader, dispatchUpdateFader } = props;\n\n    const attachEvents = (g: SVGGElement) => {\n        if (!g) return;\n        if (window.PointerEvent) {\n            const pointerUpdate = (e: PointerEvent) => {\n                if (!e.buttons) return;\n                const rect = g.getBoundingClientRect();\n\n                const eventPoint = toSVGCoordinate(g.ownerSVGElement!, e.clientX, e.clientY);\n                const rectPoint = toSVGCoordinate(g.ownerSVGElement!, rect.left, rect.top);\n\n                dispatchUpdateFader(module, fader, ((1 - ((eventPoint.y - rectPoint.y) / FADER_HEIGHT)) * MAX_VALUE) | 0);\n            }\n\n            let frameRef: number | undefined = undefined;;\n\n            const throttled = (e: PointerEvent) => {\n                if (frameRef) cancelAnimationFrame(frameRef);\n                frameRef = requestAnimationFrame(() => {\n                    frameRef = undefined;\n                    pointerUpdate(e);\n                })\n            }\n\n            g.addEventListener(\"pointerdown\", throttled);\n            g.addEventListener(\"pointermove\", throttled);\n        }\n    }\n\n\n\n    const offset = (1 - (value / MAX_VALUE)) * FADER_HEIGHT;\n\n    return <g transform={`translate(${left}, ${top})`} ref={attachEvents}>\n        <rect className=\"easel-fader-bg\"\n            fill={color}\n            height={FADER_HEIGHT}\n            width={FADER_WIDTH / 3}\n            x={FADER_WIDTH / 3}\n            y={0}\n            fillOpacity=\"0.6\"\n            rx={FADER_WIDTH / 6}\n            stroke=\"var(--color-outline)\" />\n        <rect className=\"easel-fader-bg\"\n            fill={color}\n            height={FADER_HEIGHT - offset}\n            width={FADER_WIDTH / 3}\n            x={FADER_WIDTH / 3}\n            y={offset}\n            rx={FADER_WIDTH / 6}\n            stroke=\"var(--color-outline)\" />\n        <circle className=\"easel-fader-handle\"\n            fill={color}\n            r={HANDLE_WIDTH}\n            cx={FADER_WIDTH / 3 + FADER_WIDTH / 6}\n            cy={offset}\n            stroke=\"var(--color-outline)\" />\n        <rect width={FADER_WIDTH} height={FADER_HEIGHT} x=\"0\" y=\"0\" opacity=\"0\" />\n        {label && <LabelText text={label} x={FADER_WIDTH / 2} y={FADER_HEIGHT + 50} anchor=\"middle\"/>}\n    </g>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        value: (state.patch as any)[ownProps.module]?.[ownProps.fader],\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n};\n\nexport const FaderView = connect(mapStateToProps, mapDispatchToProps)(FaderViewImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchUpdateFader } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\nimport { toSVGCoordinate } from \"../util\";\n\nexport interface KnobProps {\n    color: string;\n    x: number;\n    y: number;\n    value: number;\n    module: string;\n    fader: string;\n    onChange?: (value: number) => void;\n\n    dispatchUpdateFader: (module: string, param: string, value: number) => void;\n}\n\nconst MAX_VALUE = 0x7ff;\nconst KNOB_RADIUS = 25;\nconst KNOB_THICKNESS = 18;\n\nexport const KnobImpl = (props: KnobProps) => {\n    const { color, x, y, value, module, fader, dispatchUpdateFader } = props;\n\n    const minAngle = 135 * Math.PI / 180;\n    const maxAngle = 405 * Math.PI / 180;\n    const angle = minAngle + (value / MAX_VALUE) * (maxAngle - minAngle);\n\n    const attachEvents = (g: SVGGElement) => {\n        if (!g) return;\n        if (window.PointerEvent) {\n            const pointerUpdate = (e: PointerEvent) => {\n                if (!e.buttons) return;\n                const rect = g.getBoundingClientRect();\n\n                const eventPoint = toSVGCoordinate(g.ownerSVGElement!, e.clientX, e.clientY);\n                const rectPoint = toSVGCoordinate(g.ownerSVGElement!, rect.left + rect.width / 2, rect.top + rect.height / 2)\n                let angle = Math.atan2(eventPoint.y - rectPoint.y, eventPoint.x - rectPoint.x);\n                if (angle < minAngle) {\n                    angle += Math.PI * 2\n                }\n                else if (angle > maxAngle) {\n                    angle -= Math.PI * 2\n                }\n\n                if (angle < minAngle || angle > maxAngle) return;\n\n                dispatchUpdateFader(module, fader, Math.min(MAX_VALUE, Math.max(0, (((angle - minAngle) / (maxAngle - minAngle)) * MAX_VALUE)) | 0));\n            }\n\n            let frameRef: number | undefined = undefined;;\n\n            const throttled = (e: PointerEvent) => {\n                if (frameRef) cancelAnimationFrame(frameRef);\n                frameRef = requestAnimationFrame(() => {\n                    frameRef = undefined;\n                    pointerUpdate(e);\n                })\n            }\n\n            g.addEventListener(\"pointerdown\", throttled);\n            g.addEventListener(\"pointermove\", throttled);\n        }\n    }\n\n    const innerArcFlag = angle - minAngle < Math.PI ? \"0\" : \"1\";\n\n    return <g transform={`translate(${x}, ${y})`} ref={attachEvents}>\n        <path\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 1 1 ${Math.cos(maxAngle) * KNOB_RADIUS} ${Math.sin(maxAngle) * KNOB_RADIUS}`}\n            stroke=\"var(--color-outline)\"\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS + 2}\n        />\n        <path\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 1 1 ${Math.cos(maxAngle) * KNOB_RADIUS} ${Math.sin(maxAngle) * KNOB_RADIUS}`}\n            stroke=\"#dedede\"\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS}\n        />\n        <path\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 ${innerArcFlag} 1 ${Math.cos(angle) * KNOB_RADIUS} ${Math.sin(angle) * KNOB_RADIUS}`}\n            stroke=\"var(--color-outline)\"\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS - 2}\n        />\n        <path\n            d={`M ${Math.cos(minAngle) * KNOB_RADIUS} ${Math.sin(minAngle) * KNOB_RADIUS} A ${KNOB_RADIUS} ${KNOB_RADIUS} 0 ${innerArcFlag} 1 ${Math.cos(angle) * KNOB_RADIUS} ${Math.sin(angle) * KNOB_RADIUS}`}\n            stroke={color}\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            strokeWidth={KNOB_THICKNESS - 4}\n        />\n        <rect width={KNOB_RADIUS * 2} height={KNOB_RADIUS * 2} x={-KNOB_RADIUS} y={-KNOB_RADIUS} opacity=\"0\" />\n    </g>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        value: (state.patch as any)[ownProps.module]?.[ownProps.fader],\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n};\n\nexport const Knob = connect(mapStateToProps, mapDispatchToProps)(KnobImpl);","import * as React from \"react\";\nimport { LabelText } from \"./labelText\";\n\nexport interface SectionProps {\n    width: number;\n    height: number;\n    left: number;\n    top: number;\n    label?: string;\n    fill?: string;\n}\n\nexport const Section = (props: React.PropsWithChildren<SectionProps>) => {\n    const { width, height, left, top, label, fill, children } = props;\n\n    return <g transform={`translate(${left}, ${top})`}>\n        <rect\n            x={0} y={0}\n            width={width}\n            height={height}\n            strokeWidth={1}\n            fill={fill || \"none\"}\n            stroke=\"var(--color-outline)\"/>\n        {children}\n        {label && <LabelText x={width / 2} y={height - 10} text={label} anchor=\"middle\"/>}\n    </g>\n}","import { connect } from \"react-redux\";\n\nimport { dispatchUpdateSwitch } from \"../store/dispatch\";\nimport { State } from \"../store/reducer\";\n\nimport { SwitchValue } from \"../types\";\nimport { LabelText } from \"./labelText\";\n\nexport interface ToggleSwitchProps {\n    color: string;\n    top: number;\n    left: number;\n\n    topOption?: string;\n    middleOption?: string\n    bottomOption?: string;\n\n    module: string;\n    param: string;\n    twoWay?: boolean;\n\n    value: SwitchValue;\n    onChange: (value: SwitchValue) => void;\n\n\n    dispatchUpdateSwitch: (module: string, param: string, value: SwitchValue) => void;\n}\n\nconst TOGGLE_HEIGHT = 50;\nconst TOGGLE_WIDTH = 20;\nconst TOGGLE_HANDLE_RADIUS_RATIO = 0.75;\n\n\nexport const ToggleSwitchImpl = (props: ToggleSwitchProps) => {\n    const { color, left, top, value, topOption, middleOption, bottomOption, module, param, twoWay, onChange, dispatchUpdateSwitch } = props;\n\n    let cy = TOGGLE_WIDTH / 2;\n\n    if (value === \"middle\") {\n        cy = TOGGLE_HEIGHT / 2;\n    }\n    else if (value === \"bottom\") {\n        cy = TOGGLE_HEIGHT - (TOGGLE_WIDTH / 2);\n    }\n\n    const onClick = () => {\n        switch (value) {\n            case \"bottom\": return dispatchUpdateSwitch(module, param, \"top\");\n            case \"middle\": return dispatchUpdateSwitch(module, param, \"bottom\");\n            case \"top\": return dispatchUpdateSwitch(module, param, twoWay ? \"bottom\" : \"middle\");\n        }\n    }\n\n\n    return <g transform={`translate(${left}, ${top})`} onClick={onClick}>\n        <rect className=\"easel-toggle-bg\"\n            fill={\"#dedede\"}\n            height={TOGGLE_HEIGHT}\n            width={TOGGLE_WIDTH}\n            rx={TOGGLE_WIDTH / 2}\n            stroke=\"var(--color-outline)\"\n            x={0}\n            y={0} />\n        <circle\n            cx={TOGGLE_WIDTH / 2}\n            cy={cy}\n            r={TOGGLE_HANDLE_RADIUS_RATIO * TOGGLE_WIDTH / 2}\n            fill={color}\n            stroke=\"var(--color-outline)\"\n            />\n        {topOption &&\n            <LabelText\n                x={TOGGLE_WIDTH + 15}\n                y={TOGGLE_WIDTH / 2}\n                text={topOption}\n                alignment=\"middle\"\n                />\n        }\n        {middleOption &&\n            <LabelText\n                x={TOGGLE_WIDTH + 15}\n                y={(TOGGLE_HEIGHT / 2)}\n                text={middleOption}\n                alignment=\"middle\"\n                />\n        }\n        {bottomOption &&\n            <LabelText\n                x={TOGGLE_WIDTH + 15}\n                y={TOGGLE_HEIGHT - TOGGLE_WIDTH / 2}\n                text={bottomOption}\n                alignment=\"middle\"\n                />\n        }\n    </g>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        value: (state.patch as any)[ownProps.module]?.[ownProps.param],\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateSwitch,\n};\n\nexport const ToggleSwitch = connect(mapStateToProps, mapDispatchToProps)(ToggleSwitchImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchUpdateFader, dispatchUpdateSwitch } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { ComplexOscillator } from \"../../types\";\nimport { FaderView } from \"../fader\";\nimport { Knob } from \"../knob\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface ComplexOscillatorViewProps extends ComplexOscillator {\n}\n\nexport const ComplexOscillatorViewImpl = (props: ComplexOscillatorViewProps) => {\n    const {\n        pitch,\n        pitchCV,\n        polarity,\n        keyboard,\n        timbre,\n        timbreCV,\n        timbreKnob,\n        waveshape\n    } = props;\n    return <Section left={970} top={120} width={305} height={500}>\n        <Section left={0} top={0} width={305} height={30} label=\"COMPLEX OSCILLATOR\" />\n        <Section left={0} top={30} width={175} height={85} label=\"keyboard\">\n            <ToggleSwitch\n                color=\"var(--color-complex-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"on\"\n                bottomOption=\"off\"\n\n                value={keyboard}\n                twoWay={true}\n                module={\"complexOsc\"} param={\"keyboard\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={175} height={85} label=\"polarity\">\n            <ToggleSwitch\n                color=\"var(--color-complex-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"-\"\n                bottomOption=\"+\"\n\n                value={polarity}\n                twoWay={true}\n                module={\"complexOsc\"} param={\"polarity\"}\n            />\n        </Section>\n        <Section left={175} top={30} width={130} height={170} label=\"timbre\">\n            <Knob\n                x={65}\n                y={45}\n                value={timbreKnob}\n                color=\"var(--color-complex-oscillator)\"\n                module={\"complexOsc\"}\n                fader={\"timbreKnob\"} \n            />\n            <ToggleSwitch\n                color=\"var(--color-complex-oscillator)\"\n                top={90}\n                left={20}\n\n                value={waveshape}\n                module={\"complexOsc\"} param={\"waveshape\"}\n            />\n            <path stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 95 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10\" />\n            <path stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 110 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10\" />\n            <path stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 125 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10\" />\n        </Section>\n        <Section left={0} top={200} width={305} height={300}>\n            <FaderView left={30} top={20} value={pitchCV} color=\"var(--color-complex-oscillator)\" module={\"complexOsc\"} fader={\"pitchCV\"} />\n            <FaderView left={105} top={20} value={pitch} color=\"var(--color-complex-oscillator)\" label=\"pitch\" module={\"complexOsc\"} fader={\"pitch\"}/>\n            <FaderView left={180} top={20} value={timbreCV} color=\"var(--color-complex-oscillator)\" module={\"complexOsc\"} fader={\"timbreCV\"}/>\n            <FaderView left={255} top={20} value={timbre} color=\"var(--color-complex-oscillator)\" label=\"timbre\" module={\"complexOsc\"} fader={\"timbre\"}/>\n        </Section>\n    </Section>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...state.patch.complexOsc\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n    dispatchUpdateSwitch\n};\n\nexport const ComplexOscillatorView = connect(mapStateToProps, mapDispatchToProps)(ComplexOscillatorViewImpl);","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { LabelText } from \"../labelText\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface DualLoPassGatesProps {\n\n}\n\nexport const DualLoPassGates = (props: DualLoPassGatesProps) => {\n    return <Section left={1275} top={120} width={300} height={500}>\n        <Section left={0} top={0} width={300} height={30} label=\"DUAL LO PASS GATE\" />\n        <Section left={0} top={30} width={300} height={85} label=\"gate 2 source\">\n\n        <ToggleSwitch\n                color=\"var(--color-dual-lo-pass-gate)\"\n                top={5}\n                left={85}\n\n                topOption=\"aux in\"\n                middleOption=\"mod oscillator\"\n                bottomOption=\"gate 1\"\n\n                module={\"gates\"} param={\"gate2Source\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={300} height={85} label=\"mode select\">\n            <ToggleSwitch\n                color=\"var(--color-dual-lo-pass-gate)\"\n                top={5}\n                left={35}\n                label=\"gate 1\"\n\n                module={\"gates\"} param={\"gate1Mode\"}\n            />\n\n            <ToggleSwitch\n                color=\"var(--color-dual-lo-pass-gate)\"\n                top={5}\n                left={245}\n                label=\"gate 2\"\n\n                module={\"gates\"} param={\"gate2Mode\"}\n            />\n\n            <LabelText\n                x={150}\n                y={15}\n                text={\"lopass filter\"}\n                anchor=\"middle\"\n                alignment=\"middle\"\n                />\n\n            <LabelText\n                x={150}\n                y={30}\n                text={\"combination\"}\n                anchor=\"middle\"\n                alignment=\"middle\"\n                />\n\n            <LabelText\n                x={150}\n                y={45}\n                text={\"voltage controlled amp\"}\n                anchor=\"middle\"\n                alignment=\"middle\"\n                />\n        </Section>\n        <Section left={0} top={200} width={300} height={300}>\n            <FaderView left={30} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" module={\"gates\"} fader={\"level1CV\"}/>\n            <FaderView left={105} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" label=\"gate 1\" module={\"gates\"} fader={\"level1\"}/>\n            <FaderView left={180} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" module={\"gates\"} fader={\"level2CV\"}/>\n            <FaderView left={255} top={20} value={0} color=\"var(--color-dual-lo-pass-gate)\" label=\"gate 2\" module={\"gates\"} fader={\"level2\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface EnvelopeGeneratorProps {\n\n}\n\nexport const EnvelopeGenerator = (props: EnvelopeGeneratorProps) => {\n    return <Section left={315} top={120} width={200} height={500}>\n        <Section left={0} top={0} width={200} height={30} label=\"ENVELOPE GENERATOR\" />\n        <Section left={0} top={30} width={200} height={85} label=\"trigger select\">\n            <ToggleSwitch\n                color=\"var(--color-envelope-generator)\"\n                top={5}\n                left={35}\n\n                topOption=\"keyboard\"\n                middleOption=\"pulser\"\n                bottomOption=\"sequencer\"\n\n                module={\"envelope\"} param={\"triggerSelect\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={200} height={85} label=\"mode select\">\n            <ToggleSwitch\n                color=\"var(--color-envelope-generator)\"\n                top={5}\n                left={35}\n\n                topOption=\"sustained\"\n                middleOption=\"transient\"\n                bottomOption=\"self\"\n\n                module={\"envelope\"} param={\"modeSelect\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={200} height={300}>\n            <FaderView left={25} top={20} value={0} color=\"var(--color-envelope-generator)\" label=\"attack\" module={\"envelope\"} fader={\"attack\"}/>\n            <FaderView left={90} top={20} value={0} color=\"var(--color-envelope-generator)\" label=\"sustain\" module={\"envelope\"} fader={\"sustain\"}/>\n            <FaderView left={155} top={20} value={0} color=\"var(--color-envelope-generator)\" label=\"decay\" module={\"envelope\"} fader={\"decay\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface ModulationOscillatorProps {\n\n}\n\nexport const ModulationOscillator = (props: ModulationOscillatorProps) => {\n    return <Section left={665} top={120} width={305} height={500}>\n        <Section left={0} top={0} width={305} height={30} label=\"MODULATION OSCILLATOR\" />\n        <Section left={0} top={30} width={175} height={85} label=\"keyboard\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"on\"\n                bottomOption=\"off\"\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"modOsc\"} param={\"keyboard\"}\n            />\n        </Section>\n        <Section left={175} top={30} width={130} height={85} label=\"waveshape\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={20}\n\n                value={\"top\"}\n                module={\"modOsc\"} param={\"waveshape\"}\n            />\n            <path stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 10 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10\" />\n            <path stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 25 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10\" />\n            <path stroke=\"var(--color-outline)\" strokeWidth=\"1\" fill=\"none\" d=\"m 55 40 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10\" />\n        </Section>\n        <Section left={0} top={115} width={175} height={85} label=\"range\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={32}\n\n                topOption=\"high\"\n                bottomOption=\"low\"\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"modOsc\"} param={\"range\"}\n            />\n        </Section>\n        <Section left={175} top={115} width={130} height={85} label=\"modulation\">\n            <ToggleSwitch\n                color=\"var(--color-modulation-oscillator)\"\n                top={5}\n                left={20}\n\n                topOption=\"bal. ext\"\n                middleOption=\"a.m. osc.\"\n                bottomOption=\"f.m. osc.\"\n\n                value={\"top\"}\n                module={\"modOsc\"} param={\"modulationType\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={305} height={300}>\n            <FaderView left={30} top={20} value={0} color=\"var(--color-modulation-oscillator)\" module={\"modOsc\"} fader={\"frequencyCV\"}/>\n            <FaderView left={105} top={20} value={0} color=\"var(--color-modulation-oscillator)\" label=\"frequency\" module={\"modOsc\"} fader={\"frequency\"}/>\n            <FaderView left={180} top={20} value={0} color=\"var(--color-modulation-oscillator)\" module={\"modOsc\"} fader={\"modulationCV\"}/>\n            <FaderView left={255} top={20} value={0} color=\"var(--color-modulation-oscillator)\" label=\"modulation\" module={\"modOsc\"} fader={\"modulation\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { Jack, ConnectionPoint } from \"../jack\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface PatchbayProps {\n\n}\n\nexport const Patchbay = (props: PatchbayProps) => {\n    return <Section left={0} top={620} width={1575} height={120}>\n        <Section left={0} top={0} width={180} height={120}>\n            <Section left={0} top={0} width={180} height={30} label=\"KEYBOARD OUTPUT\" />\n            <Jack\n                x={30}\n                y={65}\n                color=\"var(--color-keyboard-pulse)\"\n                connectionPoint={ConnectionPoint.PulseOutput}\n                text=\"pulse\" />\n            <Jack\n                x={90}\n                y={65}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={0}\n                text=\"pressure\" />\n            <Jack\n                x={150}\n                y={65}\n                color=\"var(--color-keyboard-pitch)\"\n                connectionPoint={ConnectionPoint.PitchOutput}\n                text=\"pitch\" />\n        </Section>\n        <Section left={180} top={0} width={135} height={120}>\n            <Section left={0} top={0} width={135} height={30} label=\"RANDOM VOLTAGE\" />\n\n            <Section left={0} top={30} width={135} height={90} label=\"trigger source\">\n                <ToggleSwitch\n                    color=\"var(--color-random-voltage)\"\n                    top={5}\n                    left={23}\n\n                    topOption=\"keyboard\"\n                    middleOption=\"pulser\"\n                    bottomOption=\"sequencer\"\n\n                    value={\"top\"}\n                    module={\"random\"} param={\"triggerSource\"}\n                />\n            </Section>\n        </Section>\n        <Section left={315} top={0} width={1260} height={120}>\n            <Jack\n                x={32}\n                y={30}\n                color=\"var(--color-input)\"\n                connectionPoint={ConnectionPoint.EnvelopeAttackInput}\n                arrow=\"short\"\n                id={0} />\n            <Jack\n                x={32}\n                y={90}\n                color=\"var(--color-sequencer)\"\n                connectionPoint={ConnectionPoint.SequentialVoltageOutput}\n                id={0} />\n            <Jack\n                x={97}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"medium\"\n                connectionPoint={ConnectionPoint.EnvelopeSustainInput}\n                id={0} />\n            <Jack\n                x={163}\n                y={30}\n                color=\"var(--color-input)\"\n                arrow=\"short\"\n                connectionPoint={ConnectionPoint.EnvelopeDecayInput}\n                id={0} />\n            <Jack\n                x={163}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={0} />\n            <Jack\n                x={239}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.PulserPeriodInput}\n                id={0} />\n\n            <Jack\n                x={313}\n                y={30}\n                color=\"var(--color-envelope-generator)\"\n                connectionPoint={ConnectionPoint.EnvelopeGeneratorOutput}\n                id={0} />\n            <Jack\n                x={313}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={1} />\n            <Jack\n                x={388}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ModulationOscFrequencyInput} />\n\n\n            <Jack\n                x={463}\n                y={30}\n                color=\"var(--color-pulser)\"\n                connectionPoint={ConnectionPoint.PulserOutput}\n                id={1} />\n            <Jack\n                x={463}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={1} />\n            <Jack\n                x={538}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ModulationOscModulationInput} />\n\n\n            <Jack\n                x={613}\n                y={30}\n                color=\"var(--color-sequencer)\"\n                connectionPoint={ConnectionPoint.SequentialVoltageOutput}\n                id={1} />\n            <Jack\n                x={613}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={2} />\n            <Jack\n                x={693}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ComplexOscPitchInput} />\n\n\n            <Jack\n                x={768}\n                y={30}\n                color=\"var(--color-envelope-generator)\"\n                connectionPoint={ConnectionPoint.EnvelopeGeneratorOutput}\n                id={1} />\n            <Jack\n                x={768}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={2} />\n            <Jack\n                x={843}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.ComplexOscTimbreInput} />\n\n            <Jack\n                x={918}\n                y={30}\n                color=\"var(--color-pulser)\"\n                connectionPoint={ConnectionPoint.PulserOutput}\n                id={2} />\n            <Jack\n                x={918}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={3} />\n            <Jack\n                x={998}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.LoPassGate1Input} />\n            \n            <Jack\n                x={1073}\n                y={30}\n                color=\"var(--color-envelope-generator)\"\n                connectionPoint={ConnectionPoint.EnvelopeGeneratorOutput}\n                id={2} />\n            <Jack\n                x={1073}\n                y={90}\n                color=\"var(--color-random-voltage)\"\n                connectionPoint={ConnectionPoint.RandomOutput}\n                id={3} />\n            <Jack\n                x={1148}\n                y={60}\n                color=\"var(--color-input)\"\n                arrow=\"long\"\n                connectionPoint={ConnectionPoint.LoPassGate2Input} />\n        \n            <Jack\n                x={1223}\n                y={30}\n                color=\"var(--color-pulser)\"\n                connectionPoint={ConnectionPoint.PulserOutput}\n                id={3} />\n            <Jack\n                x={1223}\n                y={90}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.PressureOutput}\n                id={4} />\n            \n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface PulserProps {\n\n}\n\nexport const Pulser = (props: PulserProps) => {\n    return <Section left={515} top={120} width={150} height={500}>\n        <Section left={0} top={0} width={150} height={30} label=\"PULSER\" />\n        <Section left={0} top={30} width={150} height={85} label=\"trigger select\">\n            <ToggleSwitch\n                color=\"var(--color-pulser)\"\n                top={5}\n                left={32}\n\n                topOption=\"keyboard\"\n                middleOption=\"self\"\n                bottomOption=\"sequencer\"\n\n                value={\"top\"}\n                module={\"pulser\"} param={\"triggerSelect\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={150} height={85} label=\"mode\">\n            <ToggleSwitch\n                color=\"var(--color-pulser)\"\n                top={5}\n                left={32}\n\n                topOption=\"triggered\"\n                middleOption=\"off\"\n                bottomOption=\"once\"\n\n                value={\"top\"}\n                module={\"pulser\"} param={\"modeSelect\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={150} height={300}>\n            <FaderView left={30} top={20} value={0} color=\"var(--color-pulser)\" module={\"pulser\"} fader={\"periodCV\"}/>\n            <FaderView left={105} top={20} value={0} color=\"var(--color-pulser)\" label=\"period\" module={\"pulser\"} fader={\"period\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport { FaderView } from \"../fader\";\nimport { LabelText } from \"../labelText\";\nimport { Section } from \"../section\";\nimport { ToggleSwitch } from \"../toggleSwitch\";\n\nexport interface SequencerProps {\n\n}\n\nexport const Sequencer = (props: SequencerProps) => {\n    return <Section left={0} top={120} width={315} height={500}>\n        <Section left={0} top={0} width={315} height={30} label=\"SEQUENTIAL VOLTAGE SOURCE\" />\n        <Section left={0} top={30} width={175} height={85} label=\"trigger select\">\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={35}\n\n                topOption=\"keyboard\"\n                middleOption=\"pulser\"\n                bottomOption=\"off\"\n\n                value={\"top\"}\n                module={\"sequencer\"} param={\"triggerSelect\"}\n            />\n        </Section>\n        <Section left={175} top={30} width={140} height={85} label=\"stages\">\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={40}\n\n                topOption=\"3\"\n                middleOption=\"4\"\n                bottomOption=\"5\"\n\n                value={\"top\"}\n                module={\"sequencer\"} param={\"stages\"}\n            />\n        </Section>\n        <Section left={0} top={115} width={315} height={85} label=\"pulse sequence\">\n            <LabelText x={25} y={20} text=\"1\" />\n            <LabelText x={80} y={20} text=\"2\" />\n            <LabelText x={135} y={20} text=\"3\" />\n            <LabelText x={190} y={20} text=\"4\" />\n            <LabelText x={245} y={20} text=\"5\" />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={42}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse1\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={97}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse2\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={152}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse3\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={207}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse4\"}\n            />\n            <ToggleSwitch\n                color=\"var(--color-sequencer)\"\n                top={5}\n                left={262}\n\n                value={\"top\"}\n                twoWay={true}\n                module={\"sequencer\"} param={\"pulse5\"}\n            />\n        </Section>\n        <Section left={0} top={200} width={315} height={300} label=\"sequencer voltage levels\">\n            <FaderView left={52} top={20} value={800} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage1\"}/>\n            <FaderView left={107} top={20} value={1500} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage2\"}/>\n            <FaderView left={162} top={20} value={2500} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage3\"}/>\n            <FaderView left={217} top={20} value={0} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage4\"}/>\n            <FaderView left={272} top={20} value={0} color=\"var(--color-sequencer)\" module={\"sequencer\"} fader={\"voltage5\"}/>\n        </Section>\n    </Section>\n}","import * as React from \"react\";\nimport '../styles/iconButton.css';\n\n\nexport interface IconButtonProps {\n    left: number;\n    top: number;\n    title: string;\n    onClick: () => void;\n}\n\nconst ICON_BUTTON_WIDTH = 60;\n\nexport const IconButton = (props: React.PropsWithChildren<IconButtonProps>) => {\n    const { children, left, top, title, onClick } = props;\n    \n    const onKeydown = (ev: React.KeyboardEvent<SVGGElement>) => {\n        if (ev.key === \"Enter\") {\n            onClick();\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n    }\n\n    return <g\n        transform={`translate(${left} ${top})`}\n        className=\"icon-button\"\n        aria-label={title}\n        onClick={onClick}\n        onKeyDown={onKeydown}\n        tabIndex={0}>\n        <rect\n            stroke=\"var(--color-outline)\"\n            width={ICON_BUTTON_WIDTH}\n            height={ICON_BUTTON_WIDTH}\n            fill=\"var(--color-background)\"\n            />\n            <g transform={`translate(${5} ${5})`}>\n                {children}\n            </g>\n    </g>\n}","\nexport const DownloadIcon = () =>\n<path\n    d=\"M 20 2.5 h 10 v 25 h 10 l -15 15 l -15 -15 h 10 v -25 z M 2.5 45 h 45 v 2.5 h -45 z\"     \n    stroke=\"var(--color-outline)\"\n    fill=\"var(--color-background)\" />","export const FolderIcon = () =>\n    <>\n        <path\n            d=\"M 5 7.5\n            a 2.5 2.5 1 0 0 -2.5 2.5\n            v 35\n            a 2.5 2.5 1 0 0 2.5 2.5\n            h 37.5\n            a 2.5 2.5 1 0 0 2.5 -2.5\n            v -30\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            h -20\n            a 2.5 2.5 1 0 1 -2.5 -2.5\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            z\"     \n            stroke=\"var(--color-outline)\"\n            fill=\"var(--color-background)\" />\n        <path\n            d=\"M 10 10\n            a 2.5 2.5 1 0 0 -2.5 2.5\n            l -5 32.5\n            a 2.5 2.5 1 0 0 2.5 2.5\n            h 37.5\n            a 2.5 2.5 1 0 0 2.5 -2.5\n            l 5 -27.5\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            h -20\n            a 2.5 2.5 1 0 1 -2.5 -2.5\n            a 2.5 2.5 1 0 0 -2.5 -2.5\n            z\"    \n            stroke=\"var(--color-outline)\"\n            fill=\"var(--color-background)\" />\n    </>","export const MidiIcon = () => <>\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"25\"\n        cy=\"25\"\n        r=\"22.5\"\n    />\n    <path\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        d=\"M 20 5 a 20.5 20.5 1 1 0 10 0 v 2.5 h -10 z\"\n    />\n\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"37.5\"\n        cy=\"25\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"33.83\"\n        cy=\"33.83\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"25\"\n        cy=\"37.5\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"16.16\"\n        cy=\"33.83\"\n        r=\"2.5\"\n    />\n    <circle\n        fill=\"var(--color-background)\"\n        stroke=\"var(--color-outline)\"\n        cx=\"12.5\"\n        cy=\"25\"\n        r=\"2.5\"\n    />\n</>","\nexport const SaveIcon = () =>\n    <path\n    d=\"M 7.5 2.5 a 5 5 1 0 0 -5 5 v 35 a 5 5 1 0 0 5 5 h 35 a 5 5 1 0 0 5 -5  v -32.5 l -7.5 -7.5 h -32.5 M 10 47.5 v -17.5 a 2.5 2.5 1 0 1 2.5 -2.5 h 25 a 2.5 2.5 1 0 1 2.5 2.5 v 17.5 M 12.5 2.5 v 15 h 25 v -15 M 35 5 v 10 h -7.5 v -10 h 7.75 M 12.5 30 h 25 v 2.5 h -25 v -2.75 M 12.5 35 h 25 v 2.5 h -25 v -2.75 M 12.5 40 h 25 v 2.5 h -25 v -2.75\"     \n    stroke=\"var(--color-outline)\"\n    fill=\"var(--color-background)\" />","import * as React from \"react\";\n\nimport '../styles/titleInput.css';\n\nexport interface TitleInputProps {\n    value: string;\n    left: number;\n    top: number;\n    onChange: (newValue: string) => void;\n    \n    width: number;\n    height: number;\n}\n\nexport const TitleInput = (props: TitleInputProps) => {\n    const { value, left, top, onChange, width, height } = props;\n    const [ currentValue, setCurrentValue ] = React.useState<string | undefined>();\n\n    const onInputChanged = (ev: React.ChangeEvent<HTMLInputElement>) => {\n        setCurrentValue(ev.currentTarget.value);\n    }\n\n    const onBlurEvent = (ev: React.FocusEvent<HTMLInputElement>) => {\n        if (currentValue) onChange(currentValue)\n        setCurrentValue(undefined);\n    }\n\n    const onKeydown = (ev: React.KeyboardEvent<HTMLInputElement>) => {\n        if (ev.key === \"Enter\") ev.currentTarget.blur();\n    }\n\n    return <g transform={`translate(${left} ${top})`} className=\"title-input\">\n        <rect\n            width={width}\n            height={height}\n            fill=\"none\"\n            stroke=\"var(--color-outline)\"\n            />\n        <foreignObject\n            width={width}\n            height={height}>\n            <input\n                type=\"text\"\n                value={currentValue == undefined ? value : currentValue}\n                onChange={onInputChanged}\n                onBlur={onBlurEvent}\n                onKeyDown={onKeydown}\n                />\n        </foreignObject>\n    </g>\n}","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchSetPatchName, dispatchShowModal } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { ModalType } from \"../../types\";\nimport { IconButton } from \"../iconButton\";\nimport { DownloadIcon } from \"../icons/downloadIcon\";\nimport { FolderIcon } from \"../icons/folderIcon\";\nimport { MidiIcon } from \"../icons/midiIcon\";\nimport { SaveIcon } from \"../icons/saveIcon\";\nimport { Jack, ConnectionPoint } from \"../jack\";\nimport { Section } from \"../section\";\nimport { TitleInput } from \"../titleInput\";\n\nexport interface TopBarProps {\n    dispatchSetPatchName: (name: string) => void;\n    dispatchShowModal: (type: ModalType) => void;\n    patchName: string;\n}\n\nexport const TopBarImpl = (props: TopBarProps) => {\n    const { patchName, dispatchSetPatchName, dispatchShowModal } = props;\n    return <Section left={0} top={0} width={1575} height={120}>\n        <Section left={0} top={0} width={840} height={120}>\n            <Section left={0} top={0} width={840} height={30} label=\"EASEL PROGRAM MANAGER\" />\n            <IconButton\n                left={15}\n                top={45}\n                title=\"Save Patch\"\n                onClick={() => dispatchShowModal(\"save\")}>\n                <SaveIcon />\n            </IconButton>\n            <IconButton\n                left={90}\n                top={45}\n                title=\"Send patch to easel\"\n                onClick={() => dispatchShowModal(\"download\")}>\n                <DownloadIcon />\n            </IconButton>\n            <IconButton\n                left={165}\n                top={45}\n                title=\"Saved Patches\"\n                onClick={() => dispatchShowModal(\"file\")}>\n                <FolderIcon />\n            </IconButton>\n            <IconButton\n                left={240}\n                top={45}\n                title=\"Midi Config\"\n                onClick={() => dispatchShowModal(\"midi\")}>\n                <MidiIcon />\n            </IconButton>\n            <TitleInput\n                left={315}\n                top={45}\n                height={60}\n                width={410}\n                onChange={dispatchSetPatchName}\n                value={patchName}\n                />\n            <Jack\n                x={785}\n                y={65}\n                color=\"var(--color-modulation-oscillator)\"\n                connectionPoint={ConnectionPoint.ModulationCVOutput}\n                text=\"mod cv out\" />\n        </Section>\n        <Section left={840} top={0} width={305} height={120}>-\n            <Section left={0} top={0} width={305} height={30} label=\"EXTERNAL CV\" />\n            <Jack\n                x={55}\n                y={65}\n                color=\"var(--color-input)\"\n                connectionPoint={ConnectionPoint.PanelInput}\n                text=\"to panel\" />\n            <Jack\n                x={152.5}\n                y={65}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.Panel1Output}\n                id={0}\n                text=\"from panel 1\" />\n            <Jack\n                x={250}\n                y={65}\n                color=\"var(--color-keyboard-pressure)\"\n                connectionPoint={ConnectionPoint.Panel2Output}\n                text=\"from panel 2\" />\n        </Section>\n        <Section left={1145} top={0} width={130} height={120}>-\n            <Section left={0} top={0} width={130} height={30} label=\"COMP OSC\" />\n            {/* <path \n                d=\"M 65 65 h 45 a 5 5 1 0 1 5 5 v 60 a 5 5 1 0 1 -5 5 h -40 a 5 5 1 0 0 -5 5 v 30\"\n                stroke=\"var(--color-outline)\"\n                strokeDasharray=\"3 3\"\n                fill=\"none\"\n            /> */}\n            <Jack\n                x={65}\n                y={65}\n                color=\"var(--color-input)\"\n                connectionPoint={ConnectionPoint.ComplexOscWaveshapeInput}\n                text=\"waveshape\" />\n        </Section>\n        <Section left={1275} top={0} width={300} height={120}>\n            <Section left={0} top={0} width={300} height={30} label=\"PRE AMP / ENVELOPE DETECTOR\" />\n            <Section left={10} top={40} width={180} height={70} fill=\"url(#stripes)\" />\n            <Jack\n                x={250}\n                y={65}\n                color=\"var(--color-sequencer)\"\n                connectionPoint={ConnectionPoint.EnvelopeDetectorOutput}\n                text=\"env det out\" />\n        </Section>\n    </Section>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        patchName: state.name\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchSetPatchName,\n    dispatchShowModal\n};\n\nexport const TopBar = connect(mapStateToProps, mapDispatchToProps)(TopBarImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { listMIDIDevicesAsync } from \"../midi\";\nimport { dispatchConnectCV, dispatchSetMIDIOutput, dispatchDisconnectCV } from \"../store/dispatch\";\nimport { DragPoint, State } from \"../store/reducer\";\nimport { Connection } from \"../types\";\nimport { distance, toSVGCoordinate } from \"../util\";\nimport { Cable } from \"./cable\";\nimport { ConnectionPoint } from \"./jack\";\nimport { ComplexOscillatorView } from \"./modules/complexOscillator\";\nimport { DualLoPassGates } from \"./modules/dualLoPassGates\";\nimport { EnvelopeGenerator } from \"./modules/envelopeGenerator\";\nimport { ModulationOscillator } from \"./modules/modulationOscillator\";\nimport { Patchbay } from \"./modules/patchbay\";\nimport { Pulser } from \"./modules/pulser\";\nimport { Sequencer } from \"./modules/sequencer\";\nimport { TopBar } from \"./modules/topBar\";\n\nexport interface EaselProps {\n    dragPoints: DragPoint[];\n    connections: Connection[];\n    dispatchConnectCV: (startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) => void;\n    dispatchDisconnectCV: (startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) => void;\n    dispatchSetMIDIOutput: (name: string) => void;\n}\n\nconst DRAG_RADIUS = 25;\n\nasync function initAsync(dispatchSetMIDIOutput: (name: string) => void) {\n    const inputs = await listMIDIDevicesAsync();\n    for (const input of inputs) {\n        if (input[1].indexOf(\"iProgram\") !== -1) {\n            dispatchSetMIDIOutput(input[0]);\n        }\n    }\n    console.log(`INPUTS: ${inputs.join(\",\")}`)\n}\n\nexport const EaselImpl = (props: EaselProps) => {\n    const { dragPoints, connections, dispatchConnectCV, dispatchDisconnectCV, dispatchSetMIDIOutput } = props;\n\n    const [dragStart, setDragStart] = React.useState<DragPoint>();\n    const [dragEnd, setDragEnd] = React.useState<DOMPoint>();\n\n    React.useEffect(() => {\n        initAsync(dispatchSetMIDIOutput);\n    }, [])\n\n    let svgRef: SVGSVGElement;\n\n    const handleSVGRef = (ref: SVGSVGElement) => {\n        if (ref) svgRef = ref;\n    }\n\n    React.useEffect(() => {\n        const getDragPoint = (svgCoordinate: DOMPoint) => {\n            for (const point of dragPoints) {\n                if (distance(svgCoordinate.x, svgCoordinate.y, point.x, point.y) <= DRAG_RADIUS) {\n                    return point;\n                }\n            }\n        }\n\n        const onPointerDown = (ev: PointerEvent) => {\n            const point = toSVGCoordinate(svgRef, ev.clientX, ev.clientY);\n            const dragPoint = getDragPoint(point);\n\n            if (dragPoint) {\n                setDragStart(dragPoint);\n                ev.preventDefault();\n                ev.stopPropagation();\n            }\n        }\n\n        const onPointerUp = (ev: PointerEvent) => {\n            if (!dragStart) return;\n            const point = toSVGCoordinate(svgRef, ev.clientX, ev.clientY);\n            const dragPoint = getDragPoint(point);\n\n            if (dragPoint) {\n                const startName = ConnectionPoint[dragStart!.connectionPoint];\n                const endName = ConnectionPoint[dragPoint.connectionPoint];\n                \n                const startIsInput = startName.indexOf(\"Input\") !== -1;\n                const endIsInput = endName.indexOf(\"Input\") !== -1;\n\n                if (startIsInput !== endIsInput) {\n                    dispatchConnectCV(\n                        dragStart!.connectionPoint,\n                        dragStart!.id,\n                        dragPoint.connectionPoint,\n                        dragPoint.id\n                    )\n                }\n            }\n\n            setDragStart(undefined);\n            setDragEnd(undefined);\n        }\n\n        const onPointerMove = (ev: PointerEvent) => {\n            if (!dragStart) return;\n\n            const point = toSVGCoordinate(svgRef, ev.clientX, ev.clientY);\n            setDragEnd(point);\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n\n        const onPointerLeave = (ev: PointerEvent) => {\n            setDragStart(undefined);\n            setDragEnd(undefined);\n        }\n\n        svgRef.addEventListener(\"pointerdown\", onPointerDown);\n        svgRef.addEventListener(\"pointerup\", onPointerUp);\n        svgRef.addEventListener(\"pointermove\", onPointerMove, true);\n        svgRef.addEventListener(\"pointerleave\", onPointerLeave);\n        \n        return () => {\n            svgRef.removeEventListener(\"pointerdown\", onPointerDown);\n            svgRef.removeEventListener(\"pointerup\", onPointerUp);\n            svgRef.removeEventListener(\"pointermove\", onPointerMove, true);\n            svgRef.removeEventListener(\"pointerleave\", onPointerLeave);\n        }\n    }, [dragStart, dragPoints]);\n\n    const takenColors: boolean[] = [];\n    const cables = dragPoints.length ? connections.map((c, index) => {\n        const start = dragPoints.find(p => c.start.connectionPoint === p.connectionPoint && c.start.id === p.id);\n        const end = dragPoints.find(p => c.end.connectionPoint === p.connectionPoint && c.end.id === p.id);\n        if (!start || !end) return undefined;\n        takenColors[c.color] = true;\n        return <Cable\n            key={index}\n            x0={start!.x}\n            y0={start!.y}\n            x1={end!.x}\n            y1={end!.y}\n            colorIndex={c.color}\n            onClick={() => dispatchDisconnectCV(\n                c.start.connectionPoint,\n                c.start.id,\n                c.end.connectionPoint,\n                c.end.id\n            )} />\n    }) : []\n\n    let nextColor = takenColors.length;\n    for (let i = 0; i < takenColors.length; i++) {\n        if (!takenColors[i]) {\n            nextColor = i;\n            break;\n        }\n    }\n\n    return <svg viewBox=\"0 0 1580 900\" xmlns=\"http://www.w3.org/2000/svg\" ref={handleSVGRef}>\n        <defs>\n            <pattern id=\"stripes\"\n                    x=\"0\" y=\"0\" width=\"8\" height=\"8\"\n                    patternUnits=\"userSpaceOnUse\"\n                    patternTransform=\"rotate(-45)\" >\n\n                <rect\n                    x={0}\n                    y={0}\n                    width={1}\n                    height={8}\n                    fill=\"var(--color-outline)\" />\n\n            </pattern>\n        </defs>\n        <TopBar />\n        <Sequencer />\n        <EnvelopeGenerator />\n        <Pulser />\n        <ModulationOscillator />\n        <ComplexOscillatorView />\n        <DualLoPassGates />\n        <Patchbay />\n        { cables }\n        {dragStart &&\n            <Cable\n                x0={dragStart.x}\n                y0={dragStart.y}\n                x1={dragEnd ? dragEnd.x : dragStart.x}\n                y1={dragEnd ? dragEnd.y : dragStart.y}\n                colorIndex={nextColor}\n                />\n        }\n    </svg>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        dragPoints: state.dragPoints,\n        connections: state.patch.connections\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchConnectCV,\n    dispatchSetMIDIOutput,\n    dispatchDisconnectCV\n};\n\nexport const Easel = connect(mapStateToProps, mapDispatchToProps)(EaselImpl);","import { ConnectionPoint } from \"./components/jack\";\nimport { Easel } from \"./types\";\nimport { forEachValue } from \"./util\";\n\nconst definitions = [\n    {\n        \"name\": \"cv_connect\",\n        \"length\": 35,\n        \"template\": \"F0 24 2F 63 76 5F 63 6F 6E 6E 65 63 74 00 2C 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 3F F7 80 00 00\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 13\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 8\n            }\n        ]\n    },\n    {\n        // This one is just cv_connect with a different suffix\n        \"name\": \"cv_disconnect\",\n        \"length\": 35,\n        \"template\": \"f0 24 2f 63 76 5f 63 6f 6e 6e 65 63 74 00 2c 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 00 00 00 00 f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 13\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 8\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_cvsPitch\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 63 6f 5f 63 76 73 50 69 74 63 68 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 14\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 123\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_cvsTimbre\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 66 64 5f 63 6f 5f 63 76 73 54 69 6d 62 72 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 32,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_pitch\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 63 6f 5f 70 69 74 63 68 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_co_timbre\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 119\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_cvsLevel1\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 31 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 32,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_cvsLevel2\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 32 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 32,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_level1\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 31 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_dlpg_level2\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 32 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 123\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_eg_a\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 65 67 5f 61 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_eg_d\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 65 67 5f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 120\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_eg_s\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 65 67 5f 73 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 14\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 111\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_cvsFreq\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 46 72 65 71 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_cvsMod\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 4d 6f 64 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 109\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_freq\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 6d 6f 5f 66 72 65 71 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_mo_mod\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 113\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_p_cvs\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 70 5f 63 76 73 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_p_period\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 66 64 5f 70 5f 70 65 72 69 6f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_1\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 32 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_2\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 32 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_3\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 32 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 126\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_4\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 34 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 123\n            }\n        ]\n    },\n    {\n        \"name\": \"fd_svs_5\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 66 64 5f 73 76 73 5f 35 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 24,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 125\n            }\n        ]\n    },\n    {\n        \"name\": \"kn_co_timbre\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 6b 6e 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 28,\n                \"min\": 0,\n                \"max\": 15\n            },\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 127\n            }\n        ]\n    },\n    {\n        \"name\": \"rt_keyDown\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 72 74 5f 6b 65 79 44 6f 77 6e 00 2c 69 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 21,\n                \"min\": 0,\n                \"max\": 28\n            }\n        ]\n    },\n    {\n        \"name\": \"rt_keyUp\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 72 74 5f 6b 65 79 55 70 00 00 00 2c 69 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 21,\n                \"min\": 0,\n                \"max\": 28\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_co_keyboard\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 63 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_co_polarity\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 63 6f 5f 70 6f 6c 61 72 69 74 79 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_co_timbre\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_eg_mode\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 65 67 5f 6d 6f 64 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_eg_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 65 67 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_gate1Mode\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 67 61 74 65 31 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_gate2Mode\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 67 61 74 65 32 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_gate2Source\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 67 61 74 65 32 53 6f 75 72 63 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_keyboard\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 6d 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_mod\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_range\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 6d 6f 5f 72 61 6e 67 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_mo_waveshape\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 73 77 5f 6d 6f 5f 77 61 76 65 73 68 61 70 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 33,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_p_mode\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 70 5f 6d 6f 64 65 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_p_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 70 5f 74 72 69 67 67 65 72 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p1\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 31 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p2\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 32 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p3\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 33 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p4\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 34 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_p5\",\n        \"length\": 27,\n        \"template\": \"f0 18 2f 73 77 5f 73 76 73 5f 70 35 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 25,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_stages\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 73 76 73 5f 73 74 61 67 65 73 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_svs_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 73 76 73 5f 74 72 69 67 67 65 72 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"sw_rv_trigger\",\n        \"length\": 31,\n        \"template\": \"f0 1c 2f 73 77 5f 72 76 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 29,\n                \"min\": 0,\n                \"max\": 2\n            }\n        ]\n    },\n    {\n        \"name\": \"ps_clearBuffer\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 70 73 5f 63 6c 65 61 72 42 75 66 66 65 72 00 2c 00 00 00 f7\",\n        \"arguments\": []\n    },\n    {\n        \"name\": \"ps_save\",\n        \"length\": 23,\n        \"template\": \"f0 14 2f 70 73 5f 73 61 76 65 00 00 00 00 2c 69 00 00 00 00 00 XX f7\",\n        \"arguments\": [\n            {\n                \"offset\": 21,\n                \"min\": 0,\n                \"max\": 1\n            }\n        ]\n    },\n    {\n        \"name\": \"ps_setName\",\n        \"length\": 35,\n        \"template\": \"f0 20 2f 70 73 5f 73 65 74 4e 61 6d 65 00 2c 69 73 00 00 00 00 01 49\",\n        \"arguments\": []\n    }\n];\n\nconst messageNames = {\n    sequencer: {\n        triggerSelect: \"sw_svs_trigger\",\n        stages: \"sw_svs_stages\",\n\n        voltage1: \"fd_svs_1\",\n        voltage2: \"fd_svs_2\",\n        voltage3: \"fd_svs_3\",\n        voltage4: \"fd_svs_4\",\n        voltage5: \"fd_svs_5\",\n        pulse1: \"sw_svs_p1\",\n        pulse2: \"sw_svs_p2\",\n        pulse3: \"sw_svs_p3\",\n        pulse4: \"sw_svs_p4\",\n        pulse5: \"sw_svs_p5\",\n    },\n    envelope: {\n        attack: \"fd_eg_a\",\n        sustain: \"fd_eg_d\",\n        decay: \"fd_eg_s\",\n        triggerSelect: \"sw_eg_trigger\",\n        modeSelect: \"sw_eg_mode\",\n    },\n    pulser: {\n        triggerSelect: \"sw_p_trigger\",\n        modeSelect: \"sw_p_mode\",\n        period: \"fd_p_period\",\n        periodCV: \"fd_p_cvs\",\n    },\n    modOsc: {\n        keyboard: \"sw_mo_keyboard\",\n        waveshape: \"sw_mo_waveshape\",\n        range: \"sw_mo_range\",\n        modulationType: \"sw_mo_mod\",\n        frequency: \"fd_mo_freq\",\n        frequencyCV: \"fd_mo_cvsFreq\",\n        modulation: \"fd_mo_mod\",\n        modulationCV: \"fd_mo_cvsMod\",\n    },\n    complexOsc: {\n        keyboard: \"sw_co_keyboard\",\n        waveshape: \"sw_co_timbre\",\n        polarity: \"sw_co_polarity\",\n        pitch: \"fd_co_pitch\",\n        pitchCV: \"fd_co_cvsPitch\",\n        timbre: \"fd_co_timbre\",\n        timbreCV: \"fd_co_cvsTimbre\",\n        timbreKnob: \"kn_co_timbre\",\n    },\n    gates: {\n        gate2Source: \"sw_gate2Source\",\n        gate1Mode: \"sw_gate1Mode\",\n        gate2Mode: \"sw_gate2Mode\",\n        level1: \"fd_dlpg_level1\",\n        level1CV: \"fd_dlpg_cvsLevel1\",\n        level2: \"fd_dlpg_level2\",\n        level2CV: \"fd_dlpg_cvsLevel2\",\n    },\n    random: {\n        triggerSource: \"sw_rv_trigger\",\n    }\n};\n\nconst connectionIds: { [index: string]: number } = {\n    \"SequentialVoltageOutput\": 0,\n    \"EnvelopeGeneratorOutput\": 1,\n    \"PulserOutput\": 2,\n    \"PulseOutput\": 3,\n    \"PressureOutput\": 4,\n    \"PitchOutput\": 5,\n    \"RandomOutput\": 6,\n    \"EnvelopeDetectorOutput\": 10,\n    \"ModulationCVOutput\": 11,\n    \"Panel1Output\": 12,\n    \"Panel2Output\": 13,\n    \"PulserPeriodInput\": 0,\n    \"ModulationOscFrequencyInput\": 1,\n    \"ModulationOscModulationInput\": 2,\n    \"ComplexOscPitchInput\": 3,\n    \"ComplexOscTimbreInput\": 4,\n    \"ComplexOscWaveshapeInput\": 5,\n    \"LoPassGate1Input\": 6,\n    \"LoPassGate2Input\": 7,\n    \"PanelInput\": 8,\n    \"EnvelopeAttackInput\": 9,\n    \"EnvelopeSustainInput\": 10,\n    \"EnvelopeDecayInput\": 11,\n};\n\nexport function getMessageName(module: string, param: string) {\n    return (messageNames as any)[module][param];\n}\n\nfunction getMessageByName(name: string) {\n    return definitions.find(d => d.name === name);\n}\n\nfunction getMessageTemplate(module: string, key: string) {\n    const name = getMessageName(module, key);\n    return getMessageByName(name);\n}\n\nfunction getMessageTemplateBytes(module: string, key: string) {\n    const template = getMessageTemplate(module, key)!;\n    return getMessageBytes(template.template);\n}\n\nfunction getMessageBytes(template: string) {\n    const bytes = template.split(\" \");\n    const out = new Uint8Array(bytes.length);\n    for (let i = 0; i < bytes.length; i++) {\n        if (bytes[i] == \"XX\") continue;\n        out[i] = parseInt(bytes[i], 16);\n    }\n    return out;\n}\n\nexport function createFaderMessage(module: string, key: string, value: number) {\n    const out = getMessageTemplateBytes(module, key);\n\n    value = Math.max(0, Math.min(0x7ff, value));\n\n    out[out.length - 2] = value & 0x7f;\n    out[out.length - 3] = (value >> 7) & 0xf;\n\n    return out;\n}\n\nexport function createSwitchMessage(module: string, key: string, value: \"top\" | \"middle\" | \"bottom\") {\n    const out = getMessageTemplateBytes(module, key);\n\n    let num: number;\n    switch (value) {\n        case \"top\": num = 2; break;\n        case \"middle\": num = 1; break;\n        case \"bottom\": num = 0; break;\n    }\n\n    out[out.length - 2] = num;\n    return out;\n}\n\nexport function createConnectCVMessage(from: number, to: number) {\n    const msg = getMessageByName(\"cv_connect\");\n    const out = getMessageBytes(msg!.template);\n\n    let outputName = ConnectionPoint[from];\n\n    if (outputName.indexOf(\"Input\") !== -1) {\n        let swap = from;\n        from = to;\n        to = swap;\n    }\n\n    // output\n    out[29] = connectionIds[ConnectionPoint[from]]\n    // input\n    out[33] = connectionIds[ConnectionPoint[to]]\n\n    return out;\n}\n\nexport function createDisconnectCVMessage(from: number, to: number) {\n    const msg = getMessageByName(\"cv_disconnect\");\n    const out = getMessageBytes(msg!.template);\n\n    let outputName = ConnectionPoint[from];\n\n    if (outputName.indexOf(\"Input\") !== -1) {\n        let swap = from;\n        from = to;\n        to = swap;\n    }\n\n    // output\n    out[29] = connectionIds[ConnectionPoint[from]]\n    // input\n    out[33] = connectionIds[ConnectionPoint[to]]\n\n    return out;\n}\n\nexport function createClearBufferMessage() {\n    const msg = getMessageByName(\"ps_clearBuffer\");\n    const out = getMessageBytes(msg!.template);\n\n    return out;\n}\n\nexport function createSaveMessage(saveIndex: number) {\n    const msg = getMessageByName(\"ps_save\");\n    const out = getMessageBytes(msg!.template);\n\n    out[out.length - 2] = saveIndex;\n\n    return out;\n}\n\nexport function createSetNameMessage(name: string) {\n    const msg = getMessageByName(\"ps_setName\");\n    const prefix = getMessageBytes(msg!.template);\n\n    const out = new Uint8Array(prefix.length + name.length + 1);\n    out.set(prefix, 0);\n    for (let i = 0; i < name.length; i++) {\n        out[prefix.length + i] = name.charCodeAt(i);\n    }\n\n    out[out.length - 1] = 0xf7;\n    \n    return out;\n}\n\nexport function createPatchMessages(easel: Easel, clearBuffer: boolean, name?: string, saveIndex?: number) {\n    const queue: Uint8Array[] = [];\n\n    if (clearBuffer) {\n        queue.push(createClearBufferMessage());\n    }\n\n    forEachValue(easel, (value, bytes, module, param, rawValue) => {\n        const messageName = getMessageName(module, param);\n\n        if (messageName.startsWith(\"fd\") || messageName.startsWith(\"kn\")) {\n            queue.push(createFaderMessage(module, param, rawValue));\n        }\n        else {\n            queue.push(createSwitchMessage(module, param, rawValue));\n        }\n        return 0;\n    });\n\n    for (const connection of easel.connections) {\n        queue.push(createConnectCVMessage(connection.start.connectionPoint, connection.end.connectionPoint));\n    }\n\n    if (name) {\n        queue.push(createSetNameMessage(name));\n    }\n\n    if (saveIndex !== undefined) {\n        queue.push(createSaveMessage(saveIndex))\n    }\n\n    return queue;\n}","import { ConnectionPoint } from \"../components/jack\";\nimport { sendMIDIMessage } from \"../midi\";\nimport { createConnectCVMessage, createDisconnectCVMessage, createFaderMessage, createSwitchMessage } from \"../midiMessages\";\nimport { Connection, ConnectionJack, Easel, ModalState, ModalType } from \"../types\";\nimport { cleanPatchName, emptyPatch, rateLimit } from \"../util\";\nimport { CONNECT_CV, DISCONNECT_CV, HIDE_MODAL, SET_DRAG_POINT, SET_MIDI_INPUT, SET_MIDI_OUTPUT, SET_PATCH, SET_PATCH_NAME, SHOW_MODAL, UPDATE_FADER, UPDATE_SWITCH } from \"./actions\";\n\nexport interface State {\n    patch: Easel;\n    name: string;\n    dragPoints: DragPoint[];\n\n    midiInput?: string;\n    midiOutput?: string;\n\n    modal?: ModalState;\n}\n\nexport interface DragPoint {\n    connectionPoint: ConnectionPoint;\n    id: number;\n    x: number;\n    y: number;\n}\n\nconst initialState: State = {\n    patch: emptyPatch(),\n    name: \"Untitled\",\n    dragPoints: [],\n}\n\nexport function topReducer(state = initialState, action: any): State {\n    sendMIDI(state.midiOutput, action, state);\n    \n    switch (action.type) {\n        case SET_PATCH:\n            return {\n                ...state,\n                patch: action.patch\n            };\n        case UPDATE_FADER:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    [action.module]: {\n                        ...state.patch[action.module as keyof Easel],\n                        [action.param]: Math.min(Math.max(action.value, 0), 0x7ff)\n                    }\n                }\n            };\n        case UPDATE_SWITCH:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    [action.module]: {\n                        ...state.patch[action.module as keyof Easel],\n                        [action.param]: action.value\n                    }\n                }\n            };\n        case SET_DRAG_POINT:\n            return {\n                ...state,\n                dragPoints: setDragPoint(\n                    state.dragPoints,\n                    action.connectionPoint,\n                    action.id,\n                    action.x,\n                    action.y\n                )\n            };\n        case CONNECT_CV:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    connections: makeConnection(\n                        state.patch.connections,\n                        action.startPoint,\n                        action.startId,\n                        action.endPoint,\n                        action.endId\n                    )\n                }\n            }\n        case DISCONNECT_CV:\n            return {\n                ...state,\n                patch: {\n                    ...state.patch,\n                    connections: breakConnection(\n                        state.patch.connections,\n                        action.startPoint,\n                        action.startId,\n                        action.endPoint,\n                        action.endId\n                    )\n                }\n            }\n        case SET_MIDI_INPUT:\n            return {\n                ...state,\n                midiInput: action.name\n            }\n        case SET_MIDI_OUTPUT:\n            return {\n                ...state,\n                midiOutput: action.name\n            }\n        case SET_PATCH_NAME:\n            return {\n                ...state,\n                name: cleanPatchName(action.name)\n            }\n\n        case SHOW_MODAL:\n            return {\n                ...state,\n                modal: defaultModalState(action.modalType)\n            }\n        case HIDE_MODAL:\n            return {\n                ...state,\n                modal: undefined\n            }\n    }\n\n    return state;\n}\n\nconst sendMIDI = rateLimit((output: string | undefined, action: any, state: State) => {\n    if (!output) return;\n\n    switch (action.type) {\n        case UPDATE_FADER:\n            sendMIDIMessage(output, createFaderMessage(action.module, action.param, action.value));\n            break;\n        case UPDATE_SWITCH:\n            sendMIDIMessage(output, createSwitchMessage(action.module, action.param, action.value));\n            break;\n        case CONNECT_CV:\n            sendMIDIMessage(output, createConnectCVMessage(action.startPoint, action.endPoint))\n            break;\n        case DISCONNECT_CV:\n            // There are duplicates of some connection points, so we only want to send the message\n            // if there is exactly one connection left (the one being disconnected)\n            let cvCount = 0;\n            for (const connection of state.patch.connections) {\n                if (connection.start.connectionPoint === action.startPoint && connection.end.connectionPoint === action.endPoint ||\n                    connection.end.connectionPoint === action.startPoint && connection.start.connectionPoint === action.endPoint) {\n                    cvCount++;\n                }\n            }\n\n            if (cvCount === 1) {\n                sendMIDIMessage(output, createDisconnectCVMessage(action.startPoint, action.endPoint));\n            }\n            break;\n    }\n}, 16)\n\n\nfunction setDragPoint(dragPoints: DragPoint[], connectionPoint: ConnectionPoint, id: number, x: number, y: number) {\n    const result = dragPoints.map(p => ({...p}));\n\n    for (const point of dragPoints) {\n        if (point.connectionPoint === connectionPoint && point.id === id) {\n            point.x = x;\n            point.y = y;\n            return result;\n        }\n    }\n\n    result.push({\n        connectionPoint,\n        id,\n        x,\n        y\n    });\n\n    return result;\n}\n\nfunction makeConnection(existing: Connection[], startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    let start: ConnectionJack = {\n        connectionPoint: startPoint,\n        id: startId\n    }\n\n    let end: ConnectionJack = {\n        connectionPoint: endPoint,\n        id: endId\n    }\n\n    if (start.connectionPoint === end.connectionPoint) {\n        if (start.id > end.id) {\n            let swap = start;\n            start = end;\n            end = swap;\n        }\n    }\n    else if (start.connectionPoint > end.connectionPoint) {\n        let swap = start;\n        start = end;\n        end = swap;\n    }\n\n    const takenColors: boolean[] = [];\n    \n    for (const connection of existing) {\n        if (connection.start.connectionPoint === start.connectionPoint &&\n            connection.start.id === start.id &&\n            connection.end.connectionPoint === end.connectionPoint &&\n            connection.end.id === end.id) {\n                return existing;\n        }\n\n        takenColors[connection.color] = true;\n    }\n\n    let nextColor = takenColors.length;\n    for (let i = 0; i < takenColors.length; i++) {\n        if (!takenColors[i]) {\n            nextColor = i;\n            break;\n        }\n    }\n\n    return existing.slice().concat([{ start, end, color: nextColor }]);\n}\n\nfunction breakConnection(existing: Connection[], startPoint: ConnectionPoint, startId: number, endPoint: ConnectionPoint, endId: number) {\n    return existing.filter(c => {\n        if (c.start.connectionPoint === startPoint && c.start.id === startId && c.end.connectionPoint === endPoint && c.end.id === endId) return false;\n        if (c.start.connectionPoint === endPoint && c.start.id === endId && c.end.connectionPoint === startPoint && c.end.id === startId) return false;\n\n        return true;\n    })\n}\n\nfunction defaultModalState(type: ModalType): ModalState {\n    return {\n        type\n    }\n}","import { createStore } from 'redux';\n\nimport { topReducer } from './reducer';\n\nconst store = createStore(topReducer);\nexport default store;","import * as React from \"react\";\n\n\nimport \"../../styles/modal.css\";\n\nexport interface ModalAction {\n    label: string;\n    className?: string;\n    onClick: () => void;\n}\n\nexport interface ModalProps {\n    title: string\n    onCloseClick: () => void;\n    actions?: ModalAction[]\n}\n\nexport const Modal = (props: React.PropsWithChildren<ModalProps>) => {\n    const { title, onCloseClick, actions, children } = props;\n    return <div className=\"modal-container\">\n        <div className=\"modal-background\" onClick={onCloseClick} />\n        <div className=\"modal\">\n            <div className=\"modal-title-container\">\n                <div className=\"modal-title\">\n                    { title }\n                </div>\n            </div>\n            <div className=\"modal-content\">\n                { children }\n            </div>\n            { actions?.length &&\n                <div className=\"modal-actions\">\n                    {actions.map(action => {\n                        const { label, onClick, className } = action;\n                        return <button\n                            className={\"modal-action\" + (className ? \" \" + className : \"\")}\n                            onClick={onClick}>\n                                {label}\n                            </button>\n                    })}\n                </div>\n            }\n        </div>\n    </div>\n}","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchHideModal } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Modal } from \"./modal\";\n\nexport interface DownloadModalProps {\n    dispatchHideModal: () => void;\n}\n\nexport const DownloadModalImpl = (props: DownloadModalProps) => {\n    const { dispatchHideModal } = props;\n\n    return <Modal\n        title=\"Send Patch to Easel\"\n        onCloseClick={dispatchHideModal}>\n\n\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n};\n\nexport const DownloadModal = connect(mapStateToProps, mapDispatchToProps)(DownloadModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchHideModal } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Modal } from \"./modal\";\n\nexport interface FileModalProps {\n    dispatchHideModal: () => void;\n}\n\nexport const FileModalImpl = (props: FileModalProps) => {\n    const { dispatchHideModal } = props;\n\n    return <Modal\n        title=\"Saved Patches\"\n        onCloseClick={dispatchHideModal}>\n\n\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n};\n\nexport const FileModal = connect(mapStateToProps, mapDispatchToProps)(FileModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchHideModal } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Modal } from \"./modal\";\n\nexport interface MidiModalProps {\n    dispatchHideModal: () => void;\n}\n\nexport const MidiModalImpl = (props: MidiModalProps) => {\n    const { dispatchHideModal } = props;\n\n    return <Modal\n        title=\"Midi Config\"\n        onCloseClick={dispatchHideModal}>\n\n\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n};\n\nexport const MidiModal = connect(mapStateToProps, mapDispatchToProps)(MidiModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchHideModal } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { Modal } from \"./modal\";\n\nexport interface SaveModalProps {\n    dispatchHideModal: () => void;\n}\n\nexport const SaveModalImpl = (props: SaveModalProps) => {\n    const { dispatchHideModal } = props;\n\n    return <Modal\n        title=\"Save Patch\"\n        onCloseClick={dispatchHideModal}>\n\n\n    </Modal>\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchHideModal,\n};\n\nexport const SaveModal = connect(mapStateToProps, mapDispatchToProps)(SaveModalImpl);","import * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { dispatchUpdateFader } from \"../../store/dispatch\";\nimport { State } from \"../../store/reducer\";\nimport { ModalState } from \"../../types\";\nimport { DownloadModal } from \"./downloadModal\";\nimport { FileModal } from \"./fileModal\";\nimport { MidiModal } from \"./midiModal\";\nimport { SaveModal } from \"./saveModal\";\n\nexport interface AppModalProps {\n    modalState: ModalState;\n}\n\nexport const AppModalImpl = (props: AppModalProps) => {\n    const { modalState } = props;\n\n    switch (modalState.type) {\n        case \"download\": return <DownloadModal />\n        case \"file\": return <FileModal />\n        case \"midi\": return <MidiModal />\n        case \"save\": return <SaveModal />\n    }\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n        modalState: state.modal\n    }\n}\n\nconst mapDispatchToProps = {\n    dispatchUpdateFader,\n};\n\nexport const AppModal = connect(mapStateToProps, mapDispatchToProps)(AppModalImpl);","import React from 'react';\nimport './App.css';\nimport './styles/colors.css';\nimport { Easel } from './components/easel';\nimport store from './store/store';\nimport { decodePatch, encodePatch, throttle } from './util';\nimport { dispatchSetPatch } from './store/dispatch';\nimport { State } from './store/reducer';\nimport { connect } from 'react-redux';\nimport { ModalState } from './types';\nimport { AppModal } from './components/modals/appModal';\n\nstore.subscribe(throttle(() => {\n\tconst current = store.getState().patch;\n\twindow.location.replace(\"#\" + encodePatch(current))\n}, 500))\n\ninterface AppProps {\n\tmodal?: ModalState\n\tdispatchSetPatch: (patch: any) => void;\n}\n\nconst AppImpl = (props: AppProps) => {\n\tconst { modal, dispatchSetPatch } = props;\n\n\tReact.useEffect(() => {\n\t\tconst hash = window.location.hash;\n\n\t\tif (hash?.length > 2) {\n\t\t\tconst state = decodePatch(hash.slice(1));\n\t\t\tdispatchSetPatch(state);\n\t\t}\n\t}, []);\n\t\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Easel />\n\t\t\t{modal && <AppModal />}\n\t\t</div>\n\t);\n}\n\nfunction mapStateToProps(state: State, ownProps: any) {\n    if (!state) return {};\n\n    return {\n        ...ownProps,\n\t\tmodal: state.modal\n    }\n}\n\nconst mapDispatchToProps = {\n\tdispatchSetPatch\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppImpl);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}