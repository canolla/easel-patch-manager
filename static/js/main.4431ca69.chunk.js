(this.webpackJsonpeasel=this.webpackJsonpeasel||[]).push([[0],{21:function(e,t,o){},23:function(e,t,o){},24:function(e,t,o){},31:function(e,t,o){},33:function(e,t,o){},34:function(e,t,o){},35:function(e,t,o){},36:function(e,t,o){},37:function(e,t,o){},38:function(e,t,o){},39:function(e,t,o){},40:function(e,t,o){},41:function(e,t,o){},42:function(e,t,o){"use strict";o.r(t);var n=o(2),a=o.n(n),r=o(9),c=o.n(r),l=(o(21),o(1)),i=o(3),s=o.n(i),u=o(5),d=(o(23),o(24),o(6)),p=o(7),f=o(4),m=o(16),v=o(8);function h(e){localStorage.LAST_EDITED_PROJECT=e}var b="UPDATE_FADER",j="UPDATE_SWITCH",g="SET_DRAG_POINT",O="CONNECT_CV",x="DISCONNECT_CV",w="SET_MIDI_INPUT",y="SET_MIDI_OUTPUT",_="SET_PATCH",k="SET_PATCH_NAME",P="SET_MIDI_SPEED",S="SET_PATCH_EDITED",C="CREATE_NEW_PATCH",M="SHOW_MODAL",I="HIDE_MODAL",X="SHOW_SAVE_MODAL",E="OPEN_SAVED_PATCH";function N(e,t,o){return{type:b,module:e,param:t,value:o}}function D(e,t,o){return{type:j,module:e,param:t,value:o}}function A(e){return{type:y,name:e}}function q(e){return{type:k,name:e}}function T(){return{type:I}}function L(e){return{patch:e,type:E}}function V(){return{type:C}}var U=o(14),F=o(15),R=function(){function e(){Object(U.a)(this,e),this.isCancelled=!1}return Object(F.a)(e,[{key:"cancel",value:function(){this.isCancelled=!0}}]),e}();function G(e){var t="";H(e,(function(e,t){return r(e,t),0}));var o,n=Object(d.a)(e.connections);try{for(n.s();!(o=n.n()).done;){var a=o.value;r(a.start.connectionPoint,1),r(a.start.id,1),r(a.end.connectionPoint,1),r(a.end.id,1),r(a.color,1)}}catch(c){n.e(c)}finally{n.f()}return encodeURIComponent(btoa(t));function r(e,o){for(var n=0;n<o;n++)t+=String.fromCharCode(e>>8*n&255)}}function W(e){var t=atob(decodeURIComponent(e)),o=0,n=H({sequencer:{triggerSelect:"bottom",stages:"bottom",voltage1:0,voltage2:0,voltage3:0,voltage4:0,voltage5:0,pulse1:"top",pulse2:"top",pulse3:"top",pulse4:"top",pulse5:"top"},envelope:{attack:0,sustain:0,decay:0,triggerSelect:"bottom",modeSelect:"bottom"},pulser:{triggerSelect:"bottom",modeSelect:"bottom",period:0,periodCV:0},modOsc:{keyboard:"bottom",waveshape:"bottom",range:"bottom",modulationType:"bottom",frequency:0,frequencyCV:0,modulation:0,modulationCV:0},complexOsc:{keyboard:"bottom",waveshape:"bottom",polarity:"bottom",pitch:0,pitchCV:0,timbre:0,timbreCV:0,timbreKnob:0},gates:{gate2Source:"bottom",gate1Mode:"bottom",gate2Mode:"bottom",level1:0,level1CV:0,level2:0,level2CV:0},random:{triggerSource:"bottom"},connections:[]},(function(e,n){for(var a=0,r=0;r<n;r++)a|=t.charCodeAt(o)<<8*r,o++;return a}));n.connections=[];for(var a=function(){var e=t.charCodeAt(o);return o++,e},r=o;r<t.length;r+=5){var c={start:{connectionPoint:a(),id:a()},end:{connectionPoint:a(),id:a()},color:a()};n.connections.push(c)}return n}function H(e,t){var o,n={},a=Object(d.a)(Object.keys(e).sort());try{for(a.s();!(o=a.n()).done;){var r=o.value;if(n[r]={},"connections"!==r){var c,l=Object(d.a)(Object.keys(e[r]).sort());try{for(l.s();!(c=l.n()).done;){var i=c.value,s=e[r][i];if(!Array.isArray(s))if("string"===typeof s){var u=["top","bottom","middle"];n[r][i]=u[t(u.indexOf(s),1,r,i,s)]}else n[r][i]=t(s,2,r,i,s)}}catch(p){l.e(p)}finally{l.f()}}}}catch(p){a.e(p)}finally{a.f()}return n}function K(e,t,o){var n,a=e.createSVGPoint();return a.x=t,a.y=o,a.matrixTransform(null===(n=e.getScreenCTM())||void 0===n?void 0:n.inverse())}function B(e,t,o,n){return Math.sqrt(Math.pow(e-o,2)+Math.pow(t-n,2))}function z(e){return e.replace(/[^a-zA-Z0-9 ]/g,"")}function Y(e){return function(e,t){var o=e-t;if(isNaN(o))return"";return o<0?"now":o<10?"a few seconds ago":o<60?" "+J(Math.floor(o),"second")+" ago":o<120?"a minute ago":o<3600?" "+J(Math.floor(o/60),"minute")+" ago":o<7200?"an hour ago":o<86400?" "+J(Math.floor(o/60/60),"hour")+" ago":o<2592e3?" "+J(Math.floor(o/60/60/24),"day")+" ago":o<31536e3?" "+J(Math.floor(o/60/60/24/30),"month")+" ago":" "+J(Math.floor(o/60/60/24/365),"year")+" ago"}(Date.now()/1e3,e/1e3)}function J(e,t){return e+" "+t+(1==e?"":"s")}function Z(e){var t=e.cloneNode(!0),o=document.createElementNS("http://www.w3.org/2000/svg","style");t.appendChild(o),o.textContent=$;var n=t.querySelector(".easel-content");t.setAttribute("viewBox","0 0 1588 778"),null===n||void 0===n||n.setAttribute("transform","translate(6, 6)");var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x","2"),a.setAttribute("y","2"),a.setAttribute("width","1582"),a.setAttribute("height","750"),a.setAttribute("fill","var(--color-preview-bg)"),t.insertBefore(a,t.firstChild);for(var r=0,c=[".title-input",".easel-text",".icon-button",".jack-arrow",".wave-path",".easel-fader-bg.filled","foreignObject",".knob-fg-outline",".knob-bg",".drag-point"];r<c.length;r++)for(var l=c[r],i=t.querySelectorAll(l),s=0;s<i.length;s++)i.item(s).remove();var u=(new XMLSerializer).serializeToString(t);return"data:image/svg+xml;base64,"+btoa(u)}var Q,$="\n* {\n    --color-preview-fg: #1a2c7d;\n    --color-preview-bg: #fff;\n\n    --color-sequencer: var(--color-preview-fg);\n    --color-envelope-generator: var(--color-preview-fg);\n    --color-pulser: var(--color-preview-fg);\n    --color-modulation-oscillator: var(--color-preview-fg);\n    --color-complex-oscillator: var(--color-preview-fg);\n    --color-dual-lo-pass-gate: var(--color-preview-fg);\n    --color-random-voltage: var(--color-preview-fg);\n\n    --color-keyboard-pulse: var(--color-preview-fg);\n    --color-keyboard-pressure: var(--color-preview-fg);\n    --color-keyboard-pitch: var(--color-preview-fg);\n    --color-input: var(--color-preview-fg);\n\n    --color-outline: var(--color-preview-fg);\n    --color-background: var(--color-preview-bg);\n    --color-switch-bg: var(--color-preview-bg);\n    --color-inner-jack: var(--color-preview-bg);\n\n    --color-cable-0: var(--color-preview-bg);\n    --color-cable-1: var(--color-preview-bg);\n    --color-cable-2: var(--color-preview-bg);\n    --color-cable-3: var(--color-preview-bg);\n    --color-cable-4: var(--color-preview-bg);\n    --color-cable-5: var(--color-preview-bg);\n    --color-cable-6: var(--color-preview-bg);\n    --color-cable-7: var(--color-preview-bg);\n    --color-cable-8: var(--color-preview-bg);\n\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\n.easel-text {\n    fill: var(--color-outline);\n    font-size: 14px;\n    user-select: none;\n}\n.section>rect {\n    stroke-width: 8;\n}\n.cable-bg {\n    stroke-width: 20;\n}\n.easel-jack>circle {\n    stroke: none;\n}\n.easel-toggle>circle {\n    fill: var(--color-preview-bg);\n    stroke: none;\n    transform: translate(0, 13px);\n}\n.easel-toggle>rect {\n    transform: translate(0, 13px);\n    stroke-width: 4;\n}\n.easel-toggle-bg {\n    fill: var(--color-preview-fg);\n}\n.knob-fg {\n    stroke: var(--color-preview-bg);\n}\n.knob-bg-outline {\n    stroke-width: 26;\n}\n.easel-knob>path {\n    transform: translate(0, 10px);\n}\n.easel-fader-bg {\n    fill-opacity: 1;\n    stroke-width: 4;\n}\n",ee=(o(31),o(0)),te=function(e){var t=e.x,o=e.y,n=e.text,a=e.anchor,r=e.alignment,c=e.className;return Object(ee.jsx)("text",{className:["easel-text",c].filter((function(e){return!!e})).join(" "),x:t,y:o,textAnchor:a,alignmentBaseline:r,fill:"var(--color-outline)",children:n})};o(33);!function(e){e[e.PulseOutput=0]="PulseOutput",e[e.PressureOutput=1]="PressureOutput",e[e.PitchOutput=2]="PitchOutput",e[e.SequentialVoltageOutput=3]="SequentialVoltageOutput",e[e.EnvelopeGeneratorOutput=4]="EnvelopeGeneratorOutput",e[e.PulserOutput=5]="PulserOutput",e[e.RandomOutput=6]="RandomOutput",e[e.Panel1Output=7]="Panel1Output",e[e.Panel2Output=8]="Panel2Output",e[e.EnvelopeDetectorOutput=9]="EnvelopeDetectorOutput",e[e.ModulationCVOutput=10]="ModulationCVOutput",e[e.PulserPeriodInput=11]="PulserPeriodInput",e[e.ModulationOscFrequencyInput=12]="ModulationOscFrequencyInput",e[e.ModulationOscModulationInput=13]="ModulationOscModulationInput",e[e.ComplexOscPitchInput=14]="ComplexOscPitchInput",e[e.ComplexOscTimbreInput=15]="ComplexOscTimbreInput",e[e.LoPassGate1Input=16]="LoPassGate1Input",e[e.LoPassGate2Input=17]="LoPassGate2Input",e[e.PanelInput=18]="PanelInput",e[e.EnvelopeAttackInput=19]="EnvelopeAttackInput",e[e.EnvelopeSustainInput=20]="EnvelopeSustainInput",e[e.EnvelopeDecayInput=21]="EnvelopeDecayInput",e[e.ComplexOscWaveshapeInput=22]="ComplexOscWaveshapeInput"}(Q||(Q={}));var oe=25;var ne={dispatchSetDragPoint:function(e,t,o,n){return{type:g,connectionPoint:e,id:t,x:o,y:n}}},ae=Object(f.b)((function(e,t){return e?Object(l.a)({},t):{}}),ne)((function(e){var t=e.x,o=e.y,n=e.text,a=e.color,r=e.connectionPoint,c=e.id,l=e.arrow,i=e.dispatchSetDragPoint,s=0;return s="long"===l?-103:"medium"===l?-67:-37,Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsxs)("g",{className:"easel-jack",transform:"translate(".concat(t," ").concat(o,")"),children:[Object(ee.jsx)("circle",{ref:function(e){if(e){var t=e.getBoundingClientRect(),o=K(e.ownerSVGElement,t.left+t.width/2,t.top+t.height/2);i(r,c||0,o.x,o.y)}},cx:0,cy:0,r:oe,fill:a,stroke:"var(--color-outline)"}),Object(ee.jsx)("circle",{cx:0,cy:0,r:12,fill:"var(--color-inner-jack)",stroke:"var(--color-outline)"}),n&&Object(ee.jsx)(te,{text:n,x:0,y:45,alignment:"baseline",anchor:"middle"}),l&&Object(ee.jsxs)("g",{className:"jack-arrow",children:[Object(ee.jsx)("line",{x1:0,y1:-25,x2:0,y2:s,stroke:"var(--color-outline)"}),Object(ee.jsx)("path",{d:"M 0 ".concat(s-2," l ",4," ",10," q ").concat(-4," ").concat(-4," ").concat(-8," ",0," Z"),fill:"var(--color-outline)"})]})]})})})),re=[{name:"cv_connect",length:35,template:"F0 24 2F 63 76 5F 63 6F 6E 6E 65 63 74 00 2C 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 3F 7F 00 00 F7",arguments:[{offset:29,min:0,max:13},{offset:33,min:0,max:8}]},{name:"cv_disconnect",length:35,template:"f0 24 2f 63 76 5f 63 6f 6e 6e 65 63 74 00 2c 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 00 00 00 00 f7",arguments:[{offset:29,min:0,max:13},{offset:33,min:0,max:8}]},{name:"fd_co_cvsPitch",length:31,template:"f0 1c 2f 66 64 5f 63 6f 5f 63 76 73 50 69 74 63 68 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:14},{offset:29,min:0,max:123}]},{name:"fd_co_cvsTimbre",length:35,template:"f0 20 2f 66 64 5f 63 6f 5f 63 76 73 54 69 6d 62 72 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:32,min:0,max:15},{offset:33,min:0,max:125}]},{name:"fd_co_pitch",length:31,template:"f0 1c 2f 66 64 5f 63 6f 5f 70 69 74 63 68 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:125}]},{name:"fd_co_timbre",length:31,template:"f0 1c 2f 66 64 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:119}]},{name:"fd_dlpg_cvsLevel1",length:35,template:"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 31 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:32,min:0,max:15},{offset:33,min:0,max:127}]},{name:"fd_dlpg_cvsLevel2",length:35,template:"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 32 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:32,min:0,max:15},{offset:33,min:0,max:127}]},{name:"fd_dlpg_level1",length:31,template:"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 31 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:125}]},{name:"fd_dlpg_level2",length:31,template:"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 32 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:123}]},{name:"fd_eg_a",length:27,template:"f0 18 2f 66 64 5f 65 67 5f 61 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:127}]},{name:"fd_eg_d",length:27,template:"f0 18 2f 66 64 5f 65 67 5f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:120}]},{name:"fd_eg_s",length:27,template:"f0 18 2f 66 64 5f 65 67 5f 73 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:14},{offset:25,min:0,max:111}]},{name:"fd_mo_cvsFreq",length:31,template:"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 46 72 65 71 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:127}]},{name:"fd_mo_cvsMod",length:31,template:"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 4d 6f 64 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:109}]},{name:"fd_mo_freq",length:27,template:"f0 18 2f 66 64 5f 6d 6f 5f 66 72 65 71 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:127}]},{name:"fd_mo_mod",length:27,template:"f0 18 2f 66 64 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:113}]},{name:"fd_p_cvs",length:27,template:"f0 18 2f 66 64 5f 70 5f 63 76 73 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:125}]},{name:"fd_p_period",length:31,template:"f0 1c 2f 66 64 5f 70 5f 70 65 72 69 6f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:126}]},{name:"fd_svs_1",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 31 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:126}]},{name:"fd_svs_2",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 32 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:126}]},{name:"fd_svs_3",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 33 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:126}]},{name:"fd_svs_4",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 34 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:123}]},{name:"fd_svs_5",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 35 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:125}]},{name:"kn_co_timbre",length:31,template:"f0 1c 2f 6b 6e 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:127}]},{name:"rt_keyDown",length:23,template:"f0 14 2f 72 74 5f 6b 65 79 44 6f 77 6e 00 2c 69 00 00 00 00 00 XX f7",arguments:[{offset:21,min:0,max:28}]},{name:"rt_keyUp",length:23,template:"f0 14 2f 72 74 5f 6b 65 79 55 70 00 00 00 2c 69 00 00 00 00 00 XX f7",arguments:[{offset:21,min:0,max:28}]},{name:"sw_co_keyboard",length:31,template:"f0 1c 2f 73 77 5f 63 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_co_polarity",length:31,template:"f0 1c 2f 73 77 5f 63 6f 5f 70 6f 6c 61 72 69 74 79 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_co_timbre",length:31,template:"f0 1c 2f 73 77 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_eg_mode",length:27,template:"f0 18 2f 73 77 5f 65 67 5f 6d 6f 64 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_eg_trigger",length:31,template:"f0 1c 2f 73 77 5f 65 67 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_gate1Mode",length:31,template:"f0 1c 2f 73 77 5f 67 61 74 65 31 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_gate2Mode",length:31,template:"f0 1c 2f 73 77 5f 67 61 74 65 32 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_gate2Source",length:31,template:"f0 1c 2f 73 77 5f 67 61 74 65 32 53 6f 75 72 63 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_mo_keyboard",length:31,template:"f0 1c 2f 73 77 5f 6d 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_mo_mod",length:27,template:"f0 18 2f 73 77 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_mo_range",length:31,template:"f0 1c 2f 73 77 5f 6d 6f 5f 72 61 6e 67 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_mo_waveshape",length:35,template:"f0 20 2f 73 77 5f 6d 6f 5f 77 61 76 65 73 68 61 70 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:33,min:0,max:2}]},{name:"sw_p_mode",length:27,template:"f0 18 2f 73 77 5f 70 5f 6d 6f 64 65 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_p_trigger",length:31,template:"f0 1c 2f 73 77 5f 70 5f 74 72 69 67 67 65 72 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_svs_p1",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 31 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p2",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 32 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p3",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 33 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p4",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 34 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p5",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 35 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_stages",length:31,template:"f0 1c 2f 73 77 5f 73 76 73 5f 73 74 61 67 65 73 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_svs_trigger",length:31,template:"f0 1c 2f 73 77 5f 73 76 73 5f 74 72 69 67 67 65 72 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_rv_trigger",length:31,template:"f0 1c 2f 73 77 5f 72 76 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"ps_clearBuffer",length:23,template:"f0 14 2f 70 73 5f 63 6c 65 61 72 42 75 66 66 65 72 00 2c 00 00 00 f7 ff",arguments:[]},{name:"ps_save",length:23,template:"f0 14 2f 70 73 5f 73 61 76 65 00 00 00 00 2c 69 00 00 00 00 00 XX f7",arguments:[{offset:21,min:0,max:1}]},{name:"ps_setName",length:35,template:"f0 20 2f 70 73 5f 73 65 74 4e 61 6d 65 00 2c 69 73 00 00 00 00 01",arguments:[]}],ce={sequencer:{triggerSelect:"sw_svs_trigger",stages:"sw_svs_stages",voltage1:"fd_svs_1",voltage2:"fd_svs_2",voltage3:"fd_svs_3",voltage4:"fd_svs_4",voltage5:"fd_svs_5",pulse1:"sw_svs_p1",pulse2:"sw_svs_p2",pulse3:"sw_svs_p3",pulse4:"sw_svs_p4",pulse5:"sw_svs_p5"},envelope:{attack:"fd_eg_a",sustain:"fd_eg_d",decay:"fd_eg_s",triggerSelect:"sw_eg_trigger",modeSelect:"sw_eg_mode"},pulser:{triggerSelect:"sw_p_trigger",modeSelect:"sw_p_mode",period:"fd_p_period",periodCV:"fd_p_cvs"},modOsc:{keyboard:"sw_mo_keyboard",waveshape:"sw_mo_waveshape",range:"sw_mo_range",modulationType:"sw_mo_mod",frequency:"fd_mo_freq",frequencyCV:"fd_mo_cvsFreq",modulation:"fd_mo_mod",modulationCV:"fd_mo_cvsMod"},complexOsc:{keyboard:"sw_co_keyboard",waveshape:"sw_co_timbre",polarity:"sw_co_polarity",pitch:"fd_co_pitch",pitchCV:"fd_co_cvsPitch",timbre:"fd_co_timbre",timbreCV:"fd_co_cvsTimbre",timbreKnob:"kn_co_timbre"},gates:{gate2Source:"sw_gate2Source",gate1Mode:"sw_gate1Mode",gate2Mode:"sw_gate2Mode",level1:"fd_dlpg_level1",level1CV:"fd_dlpg_cvsLevel1",level2:"fd_dlpg_level2",level2CV:"fd_dlpg_cvsLevel2"},random:{triggerSource:"sw_rv_trigger"}},le={SequentialVoltageOutput:0,EnvelopeGeneratorOutput:1,PulserOutput:2,PulseOutput:3,PressureOutput:4,PitchOutput:5,RandomOutput:6,EnvelopeDetectorOutput:10,ModulationCVOutput:11,Panel1Output:12,Panel2Output:13,PulserPeriodInput:0,ModulationOscFrequencyInput:1,ModulationOscModulationInput:2,ComplexOscPitchInput:3,ComplexOscTimbreInput:4,ComplexOscWaveshapeInput:5,LoPassGate1Input:6,LoPassGate2Input:7,PanelInput:8,EnvelopeAttackInput:9,EnvelopeSustainInput:10,EnvelopeDecayInput:11};function ie(e,t){return ce[e][t]}function se(e){return re.find((function(t){return t.name===e}))}function ue(e,t){return de(function(e,t){return se(ie(e,t))}(e,t).template)}function de(e){for(var t=e.split(" "),o=new Uint8Array(t.length),n=0;n<t.length;n++)"XX"!=t[n]&&(o[n]=parseInt(t[n],16));return o}function pe(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ue(e,t);return o=Math.max(0,Math.min(2047,o)),a[a.length-2]=127&o,a[a.length-3]=o>>7&15,n&&(a[a.length-6]=1),a}function fe(e,t,o){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=ue(e,t);switch(o){case"top":n=2;break;case"middle":n=1;break;case"bottom":n=0}return r[r.length-2]=n,a&&(r[r.length-6]=1),r}function me(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=se("cv_connect"),a=de(n.template),r=Q[e];if(-1!==r.indexOf("Input")){var c=e;e=t,t=c}return a[29]=le[Q[e]],a[33]=le[Q[t]],o&&(a[25]=1),a}function ve(e,t){var o=de(se("cv_disconnect").template);if(-1!==Q[e].indexOf("Input")){var n=e;e=t,t=n}return o[29]=le[Q[e]],o[33]=le[Q[t]],o}function he(e,t,o,n){var a=[];t&&a.push(de(se("ps_clearBuffer").template));var r=void 0!==n;H(e,(function(e,t,o,n,c){var l=ie(o,n);return l.startsWith("fd")||l.startsWith("kn")?a.push(pe(o,n,c,r)):a.push(fe(o,n,c,r)),0}));var c,l=Object(d.a)(e.connections);try{for(l.s();!(c=l.n()).done;){var i=c.value;a.push(me(i.start.connectionPoint,i.end.connectionPoint,r))}}catch(s){l.e(s)}finally{l.f()}return o&&a.push(function(e){for(;e.length<10;)e+=" ";var t=de(se("ps_setName").template),o=new Uint8Array(t.length+e.length+3);o.set(t,0);for(var n=0;n<e.length;n++)o[t.length+n]=e.charCodeAt(n);return o[o.length-1]=247,o}(o)),r&&a.push(function(e){var t=de(se("ps_save").template);return t[t.length-2]=e,t}(n)),a}function be(e,t){return je[ie(e,t)]}var je={sw_svs_trigger:"Sequencer Trigger Mode",sw_svs_stages:"Sequencer Stages",fd_svs_1:"Sequencer Stage 1",fd_svs_2:"Sequencer Stage 2",fd_svs_3:"Sequencer Stage 3",fd_svs_4:"Sequencer Stage 4",fd_svs_5:"Sequencer Stage 5",sw_svs_p1:"Sequqncer Pulse 1",sw_svs_p2:"Sequqncer Pulse 2",sw_svs_p3:"Sequencer Pulse 3",sw_svs_p4:"Sequencer Pulse 4",sw_svs_p5:"Sequencer Pulse 5",fd_eg_a:"Envelope Generator Attack",fd_eg_d:"Envelope Generator Decay",fd_eg_s:"Envelope Generator Sustain",sw_eg_trigger:"Envelope Trigger Mode",sw_eg_mode:"Envelope Generator Mode",sw_p_trigger:"Pulser Trigger Mode",sw_p_mode:"Pulser Mode",fd_p_period:"Pulser Period",fd_p_cvs:"Pulser Period CV",sw_mo_keyboard:"Mod Oscillator Key Tracking",sw_mo_waveshape:"Mod Oscillator Waveshape",sw_mo_range:"Mod Oscillator Range",sw_mo_mod:"Mod Oscillator Modulation Type",fd_mo_freq:"Mod Oscillator Frequency",fd_mo_cvsFreq:"Mod Oscillator Frequency CV",fd_mo_mod:"Mod Oscillator Modulation",fd_mo_cvsMod:"Mod Oscillator Moduplation CV",sw_co_keyboard:"Comp Oscillator Key Tracking",sw_co_timbre:"Comp Oscillator Waveshape Switch",sw_co_polarity:"Comp Oscillator Polarity",fd_co_pitch:"Comp Oscillator Pitch",fd_co_cvsPitch:"Comp Oscillator Pitch CV",fd_co_timbre:"Comp Oscillator Timbre",fd_co_cvsTimbre:"Comp Oscillator Timbre CV",kn_co_timbre:"Comp Oscillator Waveshape",sw_gate2Source:"Gate 2 Source",sw_gate1Mode:"Gate 1 Mode",sw_gate2Mode:"Gate 2 Mode",fd_dlpg_level1:"Gate 1 Level",fd_dlpg_cvsLevel1:"Gate 1 Level CV",fd_dlpg_level2:"Gate 2 Level",fd_dlpg_cvsLevel2:"Gate 2 Level CV",sw_rv_trigger:"Random Voltage Trigger Mode"},ge={patch:{sequencer:{triggerSelect:"bottom",stages:"bottom",voltage1:0,voltage2:0,voltage3:0,voltage4:0,voltage5:0,pulse1:"top",pulse2:"top",pulse3:"top",pulse4:"top",pulse5:"top"},envelope:{attack:0,sustain:0,decay:0,triggerSelect:"bottom",modeSelect:"bottom"},pulser:{triggerSelect:"bottom",modeSelect:"bottom",period:0,periodCV:0},modOsc:{keyboard:"bottom",waveshape:"bottom",range:"bottom",modulationType:"bottom",frequency:0,frequencyCV:0,modulation:0,modulationCV:0},complexOsc:{keyboard:"bottom",waveshape:"bottom",polarity:"bottom",pitch:0,pitchCV:0,timbre:0,timbreCV:0,timbreKnob:0},gates:{gate2Source:"bottom",gate1Mode:"bottom",gate2Mode:"bottom",level1:0,level1CV:0,level2:0,level2CV:0},random:{triggerSource:"bottom"},connections:[]},name:"Untitled",dragPoints:[],midiSpeed:"fast"};var Oe=function(e,t){var o=Date.now();return function(){Date.now()-o<t||(o=Date.now(),e.apply(void 0,arguments))}}((function(e,t,o){if(e)switch(t.type){case b:Ne(e,pe(t.module,t.param,t.value));break;case j:Ne(e,fe(t.module,t.param,t.value));break;case O:Ne(e,me(t.startPoint,t.endPoint));break;case x:var n,a=0,r=Object(d.a)(o.patch.connections);try{for(r.s();!(n=r.n()).done;){var c=n.value;(c.start.connectionPoint===t.startPoint&&c.end.connectionPoint===t.endPoint||c.end.connectionPoint===t.startPoint&&c.start.connectionPoint===t.endPoint)&&a++}}catch(l){r.e(l)}finally{r.f()}1===a&&Ne(e,ve(t.startPoint,t.endPoint))}}),16);function xe(e,t,o,n,a){var r,c=e.map((function(e){return Object(l.a)({},e)})),i=Object(d.a)(e);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s.connectionPoint===t&&s.id===o)return s.x=n,s.y=a,c}}catch(u){i.e(u)}finally{i.f()}return c.push({connectionPoint:t,id:o,x:n,y:a}),c}function we(e,t,o,n,a){var r={connectionPoint:t,id:o},c={connectionPoint:n,id:a};if(r.connectionPoint===c.connectionPoint){if(r.id>c.id){var l=r;r=c,c=l}}else if(r.connectionPoint>c.connectionPoint){var i=r;r=c,c=i}var s,u=[],p=Object(d.a)(e);try{for(p.s();!(s=p.n()).done;){var f=s.value;if(f.start.connectionPoint===r.connectionPoint&&f.start.id===r.id&&f.end.connectionPoint===c.connectionPoint&&f.end.id===c.id)return e;u[f.color]=!0}}catch(h){p.e(h)}finally{p.f()}for(var m=u.length,v=0;v<u.length;v++)if(!u[v]){m=v;break}return e.slice().concat([{start:r,end:c,color:m}])}function ye(e,t,o,n,a){return e.filter((function(e){return(e.start.connectionPoint!==t||e.start.id!==o||e.end.connectionPoint!==n||e.end.id!==a)&&(e.start.connectionPoint!==n||e.start.id!==a||e.end.connectionPoint!==t||e.end.id!==o)}))}function _e(e){return{type:e}}var ke,Pe=Object(m.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(Oe(e.midiOutput,t,e),t.type){case E:return t.patch.id&&h(t.patch.id.toString()),Object(l.a)(Object(l.a)({},e),{},{saved:t.patch,name:t.patch.name,patch:W(t.patch.patch),patchEdited:!1});case _:return Object(l.a)(Object(l.a)({},e),{},{patch:t.patch});case C:return Object(l.a)(Object(l.a)({},e),{},{saved:void 0,name:"Untitled",patch:{sequencer:{triggerSelect:"bottom",stages:"bottom",voltage1:0,voltage2:0,voltage3:0,voltage4:0,voltage5:0,pulse1:"top",pulse2:"top",pulse3:"top",pulse4:"top",pulse5:"top"},envelope:{attack:0,sustain:0,decay:0,triggerSelect:"bottom",modeSelect:"bottom"},pulser:{triggerSelect:"bottom",modeSelect:"bottom",period:0,periodCV:0},modOsc:{keyboard:"bottom",waveshape:"bottom",range:"bottom",modulationType:"bottom",frequency:0,frequencyCV:0,modulation:0,modulationCV:0},complexOsc:{keyboard:"bottom",waveshape:"bottom",polarity:"bottom",pitch:0,pitchCV:0,timbre:0,timbreCV:0,timbreKnob:0},gates:{gate2Source:"bottom",gate1Mode:"bottom",gate2Mode:"bottom",level1:0,level1CV:0,level2:0,level2CV:0},random:{triggerSource:"bottom"},connections:[]}});case b:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},Object(v.a)({},t.module,Object(l.a)(Object(l.a)({},e.patch[t.module]),{},Object(v.a)({},t.param,Math.min(Math.max(t.value,0),2047)))))});case j:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},Object(v.a)({},t.module,Object(l.a)(Object(l.a)({},e.patch[t.module]),{},Object(v.a)({},t.param,t.value))))});case g:return Object(l.a)(Object(l.a)({},e),{},{dragPoints:xe(e.dragPoints,t.connectionPoint,t.id,t.x,t.y)});case O:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},{connections:we(e.patch.connections,t.startPoint,t.startId,t.endPoint,t.endId)})});case x:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},{connections:ye(e.patch.connections,t.startPoint,t.startId,t.endPoint,t.endId)})});case w:return Object(l.a)(Object(l.a)({},e),{},{midiInput:t.name});case y:return Object(l.a)(Object(l.a)({},e),{},{midiOutput:t.name});case k:return Object(l.a)(Object(l.a)({},e),{},{name:z(t.name)});case M:return Object(l.a)(Object(l.a)({},e),{},{modal:_e(t.modalType)});case X:return Object(l.a)(Object(l.a)({},e),{},{modal:{type:"save",patchToLoad:t.patch}});case I:return Object(l.a)(Object(l.a)({},e),{},{modal:void 0});case P:return Object(l.a)(Object(l.a)({},e),{},{midiSpeed:t.speed});case S:return Object(l.a)(Object(l.a)({},e),{},{patchEdited:t.edited})}return e}));function Se(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return ke||(ke=navigator.requestMIDIAccess({sysex:!0})),e.abrupt("return",ke);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(u.a)(s.a.mark((function e(){var t,o,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:t=e.sent,o=[],n=Object(d.a)(t.outputs);try{for(n.s();!(a=n.n()).done;)r=a.value,o.push([r[0],r[1].name])}catch(c){n.e(c)}finally{n.f()}return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(u.a)(s.a.mark((function e(){var t,o,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:t=e.sent,o=[],n=Object(d.a)(t.inputs);try{for(n.s();!(a=n.n()).done;)r=a.value,o.push([r[0],r[1].name])}catch(c){n.e(c)}finally{n.f()}return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t){return De.apply(this,arguments)}function De(){return(De=Object(u.a)(s.a.mark((function e(t,o){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:n=e.sent,(a=n.outputs.get(t))&&a.send(o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return(Ae=Object(u.a)(s.a.mark((function e(t,o,n,a){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:if(r=e.sent,c=r.outputs.get(t)){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=0,l=setInterval((function(){if(null===a||void 0===a?void 0:a.isCancelled)return clearInterval(l),void e();if(r!==o.length){try{n&&n(r,o.length)}catch(i){}try{c.send(o[r])}catch(s){return clearInterval(l),void t(s)}r++}else{clearInterval(l);try{n&&n(r,o.length)}catch(u){}e()}}),Ue())})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:e.sent.addEventListener("statechange",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:e.sent.removeEventListener("statechange",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){switch(Pe.getState().midiSpeed){case"very-slow":return 200;case"slow":return 100;case"medium":return 50;case"fast":return 20}}o(34);var Fe=function(e){var t=e.x0,o=e.y0,n=e.x1,a=e.y1,r=e.colorIndex,c=e.dragging,l=e.onClick;if(t<n){var i=t;t=n,n=i,i=o,o=a,a=i}var s=B(t,o,n,a),u="M ".concat(t," ").concat(o," q ").concat((n-t)/2," ").concat(Math.min(Math.max(10,200-s/10),100)," ").concat(n-t," ").concat(a-o);return Object(ee.jsxs)("g",{className:"cable"+(c?" dragging":""),children:[Object(ee.jsx)("path",{className:"cable-bg",d:u,stroke:"var(--color-outline)",fill:"none",strokeWidth:12,strokeLinecap:"round",onClick:l}),Object(ee.jsx)("path",{d:u,stroke:"var(--color-cable-".concat(r%9,")"),fill:"none",strokeWidth:10,strokeLinecap:"round",onClick:l})]})},Re=(o(35),2047),Ge=220,We=15;var He={dispatchUpdateFader:N},Ke=Object(f.b)((function(e,t){var o;return e?Object(l.a)(Object(l.a)({},t),{},{value:null===(o=e.patch[t.module])||void 0===o?void 0:o[t.fader]}):{}}),He)((function(e){var t,o=e.color,a=e.left,r=e.top,c=e.label,l=e.value,i=e.module,s=e.fader,u=e.dispatchUpdateFader;n.useEffect((function(){var e=void 0,o=function(o){e&&cancelAnimationFrame(e),e=requestAnimationFrame((function(){e=void 0,function(e){if(e.buttons){var o=t.getBoundingClientRect(),n=K(t.ownerSVGElement,e.clientX,e.clientY),a=K(t.ownerSVGElement,o.left,o.top);u(i,s,(1-(n.y-a.y)/Ge)*Re|0)}}(o)}))};return t.addEventListener("pointerdown",o),t.addEventListener("pointermove",o),function(){t.removeEventListener("pointerdown",o),t.removeEventListener("pointermove",o)}}));var d=(1-l/Re)*Ge;return Object(ee.jsxs)("g",{className:"easel-fader",transform:"translate(".concat(a,", ").concat(r,")"),ref:function(e){e&&(t=e)},onKeyDown:function(e){"ArrowUp"===e.key||"ArrowRight"===e.key||"PageUp"===e.key?(u(i,s,Math.min(l+100,Re)),e.preventDefault(),e.stopPropagation()):"ArrowDown"===e.key||"ArrowLeft"===e.key||"PageDown"===e.key?(u(i,s,Math.max(l-100,0)),e.preventDefault(),e.stopPropagation()):"End"===e.key?(u(i,s,Re),e.preventDefault(),e.stopPropagation()):"Home"===e.key&&(u(i,s,0),e.preventDefault(),e.stopPropagation())},tabIndex:0,role:"slider","aria-valuemin":0,"aria-valuemax":Re,"aria-valuenow":l,"aria-label":be(i,s),"aria-orientation":"vertical",children:[Object(ee.jsx)("rect",{className:"easel-fader-bg",fill:o,height:Ge,width:5,x:5,y:0,fillOpacity:"0.6",rx:2.5,stroke:"var(--color-outline)"}),Object(ee.jsx)("rect",{className:"easel-fader-bg filled",fill:o,height:Ge-d,width:5,x:5,y:d,rx:2.5,stroke:"var(--color-outline)"}),Object(ee.jsx)("circle",{className:"easel-fader-handle",fill:o,r:12,cx:7.5,cy:d,stroke:"var(--color-outline)"}),Object(ee.jsx)("rect",{width:We,height:Ge,x:"0",y:"0",opacity:"0"}),c&&Object(ee.jsx)(te,{text:c,x:7.5,y:270,anchor:"middle"})]})})),Be=2047,ze=25;var Ye={dispatchUpdateFader:N},Je=Object(f.b)((function(e,t){var o;return e?Object(l.a)(Object(l.a)({},t),{},{value:null===(o=e.patch[t.module])||void 0===o?void 0:o[t.fader]}):{}}),Ye)((function(e){var t,o=e.color,a=e.x,r=e.y,c=e.value,l=e.module,i=e.fader,s=e.dispatchUpdateFader,u=135*Math.PI/180,d=405*Math.PI/180,p=u+c/Be*(d-u);n.useEffect((function(){var e=void 0,o=function(o){e&&cancelAnimationFrame(e),e=requestAnimationFrame((function(){e=void 0,function(e){if(e.buttons){var o=t.getBoundingClientRect(),n=K(t.ownerSVGElement,e.clientX,e.clientY),a=K(t.ownerSVGElement,o.left+o.width/2,o.top+o.height/2),r=Math.atan2(n.y-a.y,n.x-a.x);r<u?r+=2*Math.PI:r>d&&(r-=2*Math.PI),r<u||r>d||s(l,i,Math.min(Be,0|Math.max(0,(r-u)/(d-u)*Be)))}}(o)}))};return t.addEventListener("pointerdown",o),t.addEventListener("pointermove",o),function(){t.removeEventListener("pointerdown",o),t.removeEventListener("pointermove",o)}}));var f=p-u<Math.PI?"0":"1";return Object(ee.jsxs)("g",{className:"easel-knob",transform:"translate(".concat(a,", ").concat(r,")"),ref:function(e){e&&(t=e)},tabIndex:0,role:"slider","aria-valuemin":0,"aria-valuemax":Be,"aria-valuenow":c,"aria-label":be(l,i),onKeyDown:function(e){"ArrowUp"===e.key||"ArrowRight"===e.key||"PageUp"===e.key?(s(l,i,Math.min(c+100,Be)),e.preventDefault(),e.stopPropagation()):"ArrowDown"===e.key||"ArrowLeft"===e.key||"PageDown"===e.key?(s(l,i,Math.max(c-100,0)),e.preventDefault(),e.stopPropagation()):"End"===e.key?(s(l,i,Be),e.preventDefault(),e.stopPropagation()):"Home"===e.key&&(s(l,i,0),e.preventDefault(),e.stopPropagation())},children:[Object(ee.jsx)("path",{className:"knob-bg-outline",d:"M ".concat(Math.cos(u)*ze," ").concat(Math.sin(u)*ze," A ").concat(ze," ").concat(ze," 0 1 1 ").concat(Math.cos(d)*ze," ").concat(Math.sin(d)*ze),stroke:"var(--color-outline)",fill:"none",strokeLinecap:"round",strokeWidth:20}),Object(ee.jsx)("path",{className:"knob-bg",d:"M ".concat(Math.cos(u)*ze," ").concat(Math.sin(u)*ze," A ").concat(ze," ").concat(ze," 0 1 1 ").concat(Math.cos(d)*ze," ").concat(Math.sin(d)*ze),stroke:"var(--color-switch-bg)",fill:"none",strokeLinecap:"round",strokeWidth:18}),Object(ee.jsx)("path",{className:"knob-fg-outline",d:"M ".concat(Math.cos(u)*ze," ").concat(Math.sin(u)*ze," A ").concat(ze," ").concat(ze," 0 ").concat(f," 1 ").concat(Math.cos(p)*ze," ").concat(Math.sin(p)*ze),stroke:"var(--color-outline)",fill:"none",strokeLinecap:"round",strokeWidth:16}),Object(ee.jsx)("path",{className:"knob-fg",d:"M ".concat(Math.cos(u)*ze," ").concat(Math.sin(u)*ze," A ").concat(ze," ").concat(ze," 0 ").concat(f," 1 ").concat(Math.cos(p)*ze," ").concat(Math.sin(p)*ze),stroke:o,fill:"none",strokeLinecap:"round",strokeWidth:14}),Object(ee.jsx)("rect",{width:50,height:50,x:-25,y:-25,opacity:"0"})]})})),Ze=function(e){var t=e.width,o=e.height,n=e.left,a=e.top,r=e.label,c=e.fill,l=e.children;return Object(ee.jsxs)("g",{className:"section",transform:"translate(".concat(n,", ").concat(a,")"),children:[Object(ee.jsx)("rect",{x:0,y:0,width:t,height:o,strokeWidth:1,fill:c||"none",stroke:"var(--color-outline)"}),l,r&&Object(ee.jsx)(te,{x:t/2,y:o-10,text:r,anchor:"middle"})]})},Qe=(o(36),20);var $e={dispatchUpdateSwitch:D},et=Object(f.b)((function(e,t){var o;return e?Object(l.a)(Object(l.a)({},t),{},{value:null===(o=e.patch[t.module])||void 0===o?void 0:o[t.param]}):{}}),$e)((function(e){var t=e.color,o=e.left,n=e.top,a=e.value,r=e.topOption,c=e.middleOption,l=e.bottomOption,i=e.module,s=e.param,u=e.twoWay,d=(e.onChange,e.dispatchUpdateSwitch),p=10;"middle"===a?p=25:"bottom"===a&&(p=40);var f=function(e){switch(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),a){case"bottom":return d(i,s,"top");case"middle":return d(i,s,"bottom");case"top":return d(i,s,u?"bottom":"middle")}};return Object(ee.jsxs)("g",{className:"easel-toggle",transform:"translate(".concat(o,", ").concat(n,")"),onClick:f,onKeyDown:function(e){var t="number"==typeof e.which?e.which:e.keyCode;13!==t&&32!==t||(e.preventDefault(),f())},tabIndex:0,children:[Object(ee.jsx)("rect",{className:"easel-toggle-bg",fill:"var(--color-switch-bg)",height:50,width:Qe,rx:10,stroke:"var(--color-outline)",x:0,y:0}),Object(ee.jsx)("circle",{cx:10,cy:p,r:7.5,fill:t,stroke:"var(--color-outline)"}),r&&Object(ee.jsx)(te,{x:35,y:10,text:r,alignment:"middle"}),c&&Object(ee.jsx)(te,{x:35,y:25,text:c,alignment:"middle"}),l&&Object(ee.jsx)(te,{x:35,y:40,text:l,alignment:"middle"})]})}));var tt,ot,nt={dispatchUpdateFader:N,dispatchUpdateSwitch:D},at=Object(f.b)((function(e,t){return e?Object(l.a)({},e.patch.complexOsc):{}}),nt)((function(e){var t=e.pitch,o=e.pitchCV,n=e.polarity,a=e.keyboard,r=e.timbre,c=e.timbreCV,l=e.timbreKnob,i=e.waveshape;return Object(ee.jsxs)(Ze,{left:970,top:120,width:305,height:500,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:305,height:30,label:"COMPLEX OSCILLATOR"}),Object(ee.jsx)(Ze,{left:0,top:30,width:175,height:85,label:"keyboard",children:Object(ee.jsx)(et,{color:"var(--color-complex-oscillator)",top:5,left:32,topOption:"on",bottomOption:"off",value:a,twoWay:!0,module:"complexOsc",param:"keyboard"})}),Object(ee.jsx)(Ze,{left:0,top:115,width:175,height:85,label:"polarity",children:Object(ee.jsx)(et,{color:"var(--color-complex-oscillator)",top:5,left:32,topOption:"-",bottomOption:"+",value:n,twoWay:!0,module:"complexOsc",param:"polarity"})}),Object(ee.jsxs)(Ze,{left:175,top:30,width:130,height:170,label:"timbre",children:[Object(ee.jsx)(Je,{x:65,y:45,value:l,color:"var(--color-complex-oscillator)",module:"complexOsc",fader:"timbreKnob"}),Object(ee.jsx)(et,{color:"var(--color-complex-oscillator)",top:90,left:20,value:i,module:"complexOsc",param:"waveshape"}),Object(ee.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 95 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10"}),Object(ee.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 110 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10"}),Object(ee.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 125 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10"})]}),Object(ee.jsxs)(Ze,{left:0,top:200,width:305,height:300,children:[Object(ee.jsx)(Ke,{left:30,top:20,value:o,color:"var(--color-complex-oscillator)",module:"complexOsc",fader:"pitchCV"}),Object(ee.jsx)(Ke,{left:105,top:20,value:t,color:"var(--color-complex-oscillator)",label:"pitch",module:"complexOsc",fader:"pitch"}),Object(ee.jsx)(Ke,{left:180,top:20,value:c,color:"var(--color-complex-oscillator)",module:"complexOsc",fader:"timbreCV"}),Object(ee.jsx)(Ke,{left:255,top:20,value:r,color:"var(--color-complex-oscillator)",label:"timbre",module:"complexOsc",fader:"timbre"})]})]})})),rt=function(e){return Object(ee.jsxs)(Ze,{left:1275,top:120,width:300,height:500,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:300,height:30,label:"DUAL LO PASS GATE"}),Object(ee.jsx)(Ze,{left:0,top:30,width:300,height:85,label:"gate 2 source",children:Object(ee.jsx)(et,{color:"var(--color-dual-lo-pass-gate)",top:5,left:85,topOption:"aux in",middleOption:"mod oscillator",bottomOption:"gate 1",module:"gates",param:"gate2Source"})}),Object(ee.jsxs)(Ze,{left:0,top:115,width:300,height:85,label:"mode select",children:[Object(ee.jsx)(et,{color:"var(--color-dual-lo-pass-gate)",top:5,left:35,label:"gate 1",module:"gates",param:"gate1Mode"}),Object(ee.jsx)(et,{color:"var(--color-dual-lo-pass-gate)",top:5,left:245,label:"gate 2",module:"gates",param:"gate2Mode"}),Object(ee.jsx)(te,{x:150,y:15,text:"lopass filter",anchor:"middle",alignment:"middle"}),Object(ee.jsx)(te,{x:150,y:30,text:"combination",anchor:"middle",alignment:"middle"}),Object(ee.jsx)(te,{x:150,y:45,text:"voltage controlled amp",anchor:"middle",alignment:"middle"})]}),Object(ee.jsxs)(Ze,{left:0,top:200,width:300,height:300,children:[Object(ee.jsx)(Ke,{left:30,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",module:"gates",fader:"level1CV"}),Object(ee.jsx)(Ke,{left:105,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",label:"gate 1",module:"gates",fader:"level1"}),Object(ee.jsx)(Ke,{left:180,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",module:"gates",fader:"level2CV"}),Object(ee.jsx)(Ke,{left:255,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",label:"gate 2",module:"gates",fader:"level2"})]})]})},ct=function(e){return Object(ee.jsxs)(Ze,{left:315,top:120,width:200,height:500,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:200,height:30,label:"ENVELOPE GENERATOR"}),Object(ee.jsx)(Ze,{left:0,top:30,width:200,height:85,label:"trigger select",children:Object(ee.jsx)(et,{color:"var(--color-envelope-generator)",top:5,left:35,topOption:"keyboard",middleOption:"pulser",bottomOption:"sequencer",module:"envelope",param:"triggerSelect"})}),Object(ee.jsx)(Ze,{left:0,top:115,width:200,height:85,label:"mode select",children:Object(ee.jsx)(et,{color:"var(--color-envelope-generator)",top:5,left:35,topOption:"sustained",middleOption:"transient",bottomOption:"self",module:"envelope",param:"modeSelect"})}),Object(ee.jsxs)(Ze,{left:0,top:200,width:200,height:300,children:[Object(ee.jsx)(Ke,{left:25,top:20,value:0,color:"var(--color-envelope-generator)",label:"attack",module:"envelope",fader:"attack"}),Object(ee.jsx)(Ke,{left:90,top:20,value:0,color:"var(--color-envelope-generator)",label:"sustain",module:"envelope",fader:"sustain"}),Object(ee.jsx)(Ke,{left:155,top:20,value:0,color:"var(--color-envelope-generator)",label:"decay",module:"envelope",fader:"decay"})]})]})},lt=function(e){return Object(ee.jsxs)(Ze,{left:665,top:120,width:305,height:500,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:305,height:30,label:"MODULATION OSCILLATOR"}),Object(ee.jsx)(Ze,{left:0,top:30,width:175,height:85,label:"keyboard",children:Object(ee.jsx)(et,{color:"var(--color-modulation-oscillator)",top:5,left:32,topOption:"on",bottomOption:"off",value:"top",twoWay:!0,module:"modOsc",param:"keyboard"})}),Object(ee.jsxs)(Ze,{left:175,top:30,width:130,height:85,label:"waveshape",children:[Object(ee.jsx)(et,{color:"var(--color-modulation-oscillator)",top:5,left:20,value:"top",module:"modOsc",param:"waveshape"}),Object(ee.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 10 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10"}),Object(ee.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 25 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10"}),Object(ee.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 40 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10"})]}),Object(ee.jsx)(Ze,{left:0,top:115,width:175,height:85,label:"range",children:Object(ee.jsx)(et,{color:"var(--color-modulation-oscillator)",top:5,left:32,topOption:"high",bottomOption:"low",value:"top",twoWay:!0,module:"modOsc",param:"range"})}),Object(ee.jsx)(Ze,{left:175,top:115,width:130,height:85,label:"modulation",children:Object(ee.jsx)(et,{color:"var(--color-modulation-oscillator)",top:5,left:20,topOption:"bal. ext",middleOption:"a.m. osc.",bottomOption:"f.m. osc.",value:"top",module:"modOsc",param:"modulationType"})}),Object(ee.jsxs)(Ze,{left:0,top:200,width:305,height:300,children:[Object(ee.jsx)(Ke,{left:30,top:20,value:0,color:"var(--color-modulation-oscillator)",module:"modOsc",fader:"frequencyCV"}),Object(ee.jsx)(Ke,{left:105,top:20,value:0,color:"var(--color-modulation-oscillator)",label:"frequency",module:"modOsc",fader:"frequency"}),Object(ee.jsx)(Ke,{left:180,top:20,value:0,color:"var(--color-modulation-oscillator)",module:"modOsc",fader:"modulationCV"}),Object(ee.jsx)(Ke,{left:255,top:20,value:0,color:"var(--color-modulation-oscillator)",label:"modulation",module:"modOsc",fader:"modulation"})]})]})},it=function(e){return Object(ee.jsxs)(Ze,{left:0,top:620,width:1575,height:120,children:[Object(ee.jsxs)(Ze,{left:0,top:0,width:180,height:120,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:180,height:30,label:"KEYBOARD OUTPUT"}),Object(ee.jsx)(ae,{x:30,y:65,color:"var(--color-keyboard-pulse)",connectionPoint:Q.PulseOutput,text:"pulse"}),Object(ee.jsx)(ae,{x:90,y:65,color:"var(--color-keyboard-pressure)",connectionPoint:Q.PressureOutput,id:0,text:"pressure"}),Object(ee.jsx)(ae,{x:150,y:65,color:"var(--color-keyboard-pitch)",connectionPoint:Q.PitchOutput,text:"pitch"})]}),Object(ee.jsxs)(Ze,{left:180,top:0,width:135,height:120,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:135,height:30,label:"RANDOM VOLTAGE"}),Object(ee.jsx)(Ze,{left:0,top:30,width:135,height:90,label:"trigger source",children:Object(ee.jsx)(et,{color:"var(--color-random-voltage)",top:5,left:23,topOption:"keyboard",middleOption:"pulser",bottomOption:"sequencer",value:"top",module:"random",param:"triggerSource"})})]}),Object(ee.jsxs)(Ze,{left:315,top:0,width:1260,height:120,children:[Object(ee.jsx)(ae,{x:32,y:30,color:"var(--color-input)",connectionPoint:Q.EnvelopeAttackInput,arrow:"short",id:0}),Object(ee.jsx)(ae,{x:32,y:90,color:"var(--color-sequencer)",connectionPoint:Q.SequentialVoltageOutput,id:0}),Object(ee.jsx)(ae,{x:97,y:60,color:"var(--color-input)",arrow:"medium",connectionPoint:Q.EnvelopeSustainInput,id:0}),Object(ee.jsx)(ae,{x:163,y:30,color:"var(--color-input)",arrow:"short",connectionPoint:Q.EnvelopeDecayInput,id:0}),Object(ee.jsx)(ae,{x:163,y:90,color:"var(--color-random-voltage)",connectionPoint:Q.RandomOutput,id:0}),Object(ee.jsx)(ae,{x:239,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:Q.PulserPeriodInput,id:0}),Object(ee.jsx)(ae,{x:313,y:30,color:"var(--color-envelope-generator)",connectionPoint:Q.EnvelopeGeneratorOutput,id:0}),Object(ee.jsx)(ae,{x:313,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:Q.PressureOutput,id:1}),Object(ee.jsx)(ae,{x:388,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:Q.ModulationOscFrequencyInput}),Object(ee.jsx)(ae,{x:463,y:30,color:"var(--color-pulser)",connectionPoint:Q.PulserOutput,id:1}),Object(ee.jsx)(ae,{x:463,y:90,color:"var(--color-random-voltage)",connectionPoint:Q.RandomOutput,id:1}),Object(ee.jsx)(ae,{x:538,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:Q.ModulationOscModulationInput}),Object(ee.jsx)(ae,{x:613,y:30,color:"var(--color-sequencer)",connectionPoint:Q.SequentialVoltageOutput,id:1}),Object(ee.jsx)(ae,{x:613,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:Q.PressureOutput,id:2}),Object(ee.jsx)(ae,{x:693,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:Q.ComplexOscPitchInput}),Object(ee.jsx)(ae,{x:768,y:30,color:"var(--color-envelope-generator)",connectionPoint:Q.EnvelopeGeneratorOutput,id:1}),Object(ee.jsx)(ae,{x:768,y:90,color:"var(--color-random-voltage)",connectionPoint:Q.RandomOutput,id:2}),Object(ee.jsx)(ae,{x:843,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:Q.ComplexOscTimbreInput}),Object(ee.jsx)(ae,{x:918,y:30,color:"var(--color-pulser)",connectionPoint:Q.PulserOutput,id:2}),Object(ee.jsx)(ae,{x:918,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:Q.PressureOutput,id:3}),Object(ee.jsx)(ae,{x:998,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:Q.LoPassGate1Input}),Object(ee.jsx)(ae,{x:1073,y:30,color:"var(--color-envelope-generator)",connectionPoint:Q.EnvelopeGeneratorOutput,id:2}),Object(ee.jsx)(ae,{x:1073,y:90,color:"var(--color-random-voltage)",connectionPoint:Q.RandomOutput,id:3}),Object(ee.jsx)(ae,{x:1148,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:Q.LoPassGate2Input}),Object(ee.jsx)(ae,{x:1223,y:30,color:"var(--color-pulser)",connectionPoint:Q.PulserOutput,id:3}),Object(ee.jsx)(ae,{x:1223,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:Q.PressureOutput,id:4})]})]})},st=function(e){return Object(ee.jsxs)(Ze,{left:515,top:120,width:150,height:500,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:150,height:30,label:"PULSER"}),Object(ee.jsx)(Ze,{left:0,top:30,width:150,height:85,label:"trigger select",children:Object(ee.jsx)(et,{color:"var(--color-pulser)",top:5,left:32,topOption:"keyboard",middleOption:"self",bottomOption:"sequencer",value:"top",module:"pulser",param:"triggerSelect"})}),Object(ee.jsx)(Ze,{left:0,top:115,width:150,height:85,label:"mode",children:Object(ee.jsx)(et,{color:"var(--color-pulser)",top:5,left:32,topOption:"triggered",middleOption:"off",bottomOption:"once",value:"top",module:"pulser",param:"modeSelect"})}),Object(ee.jsxs)(Ze,{left:0,top:200,width:150,height:300,children:[Object(ee.jsx)(Ke,{left:30,top:20,value:0,color:"var(--color-pulser)",module:"pulser",fader:"periodCV"}),Object(ee.jsx)(Ke,{left:105,top:20,value:0,color:"var(--color-pulser)",label:"period",module:"pulser",fader:"period"})]})]})},ut=function(e){return Object(ee.jsxs)(Ze,{left:0,top:120,width:315,height:500,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:315,height:30,label:"SEQUENTIAL VOLTAGE SOURCE"}),Object(ee.jsx)(Ze,{left:0,top:30,width:175,height:85,label:"trigger select",children:Object(ee.jsx)(et,{color:"var(--color-sequencer)",top:5,left:35,topOption:"keyboard",middleOption:"pulser",bottomOption:"off",value:"top",module:"sequencer",param:"triggerSelect"})}),Object(ee.jsx)(Ze,{left:175,top:30,width:140,height:85,label:"stages",children:Object(ee.jsx)(et,{color:"var(--color-sequencer)",top:5,left:40,topOption:"3",middleOption:"4",bottomOption:"5",value:"top",module:"sequencer",param:"stages"})}),Object(ee.jsxs)(Ze,{left:0,top:115,width:315,height:85,label:"pulse sequence",children:[Object(ee.jsx)(te,{x:25,y:20,text:"1"}),Object(ee.jsx)(te,{x:80,y:20,text:"2"}),Object(ee.jsx)(te,{x:135,y:20,text:"3"}),Object(ee.jsx)(te,{x:190,y:20,text:"4"}),Object(ee.jsx)(te,{x:245,y:20,text:"5"}),Object(ee.jsx)(et,{color:"var(--color-sequencer)",top:5,left:42,value:"top",twoWay:!0,module:"sequencer",param:"pulse1"}),Object(ee.jsx)(et,{color:"var(--color-sequencer)",top:5,left:97,value:"top",twoWay:!0,module:"sequencer",param:"pulse2"}),Object(ee.jsx)(et,{color:"var(--color-sequencer)",top:5,left:152,value:"top",twoWay:!0,module:"sequencer",param:"pulse3"}),Object(ee.jsx)(et,{color:"var(--color-sequencer)",top:5,left:207,value:"top",twoWay:!0,module:"sequencer",param:"pulse4"}),Object(ee.jsx)(et,{color:"var(--color-sequencer)",top:5,left:262,value:"top",twoWay:!0,module:"sequencer",param:"pulse5"})]}),Object(ee.jsxs)(Ze,{left:0,top:200,width:315,height:300,label:"sequencer voltage levels",children:[Object(ee.jsx)(Ke,{left:52,top:20,value:800,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage1"}),Object(ee.jsx)(Ke,{left:107,top:20,value:1500,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage2"}),Object(ee.jsx)(Ke,{left:162,top:20,value:2500,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage3"}),Object(ee.jsx)(Ke,{left:217,top:20,value:0,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage4"}),Object(ee.jsx)(Ke,{left:272,top:20,value:0,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage5"})]})]})},dt="PATCH_DB";function pt(){return ft.apply(this,arguments)}function ft(){return(ft=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tt){e.next=2;break}return e.abrupt("return",tt);case 2:return ot||(ot=new Promise((function(e,t){var o=indexedDB.open(dt,2);o.onerror=function(e){t()},o.onupgradeneeded=function(e){var t=o.result.createObjectStore("patches",{autoIncrement:!0,keyPath:"id"});t.createIndex("name","name",{unique:!1}),t.createIndex("patch","patch",{unique:!1}),t.createIndex("preview","preview",{unique:!1}),t.createIndex("createdTime","createdTime",{unique:!1}),t.createIndex("lastSavedTime","lastSavedTime",{unique:!1})},o.onsuccess=function(t){tt=o.result,e(tt)}}))),e.abrupt("return",ot);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return vt.apply(this,arguments)}function vt(){return(vt=Object(u.a)(s.a.mark((function e(t){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:return o=e.sent,e.abrupt("return",new Promise((function(e,n){var a=o.transaction(["patches"],"readwrite").objectStore("patches").get(t);a.onerror=function(e){n()},a.onsuccess=function(t){e(a.result)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(u.a)(s.a.mark((function e(t){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:return o=e.sent,e.abrupt("return",new Promise((function(e,n){var a=o.transaction(["patches"],"readwrite").objectStore("patches").add(t);a.onerror=function(e){n()},a.onsuccess=function(o){e(Object(l.a)(Object(l.a)({},t),{},{id:a.result}))}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e){return gt.apply(this,arguments)}function gt(){return(gt=Object(u.a)(s.a.mark((function e(t){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:return o=e.sent,e.abrupt("return",new Promise((function(e,n){var a=o.transaction(["patches"],"readwrite").objectStore("patches"),r=Object(l.a)(Object(l.a)({},t),{},{lastSavedTime:Date.now()}),c=a.put(r);c.onerror=function(e){n()},c.onsuccess=function(t){e(Object(l.a)(Object(l.a)({},r),{},{id:c.result}))}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(){return xt.apply(this,arguments)}function xt(){return(xt=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,o){var n=t.transaction(["patches"],"readwrite").objectStore("patches").openCursor(),a=[];n.onerror=function(e){o()},n.onsuccess=function(t){var o=n.result;o?(a.push(o.value),o.continue()):e(a)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e,t,o){return yt.apply(this,arguments)}function yt(){return(yt=Object(u.a)(s.a.mark((function e(t,o,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t,patch:G(o),preview:n,createdTime:Date.now(),lastSavedTime:Date.now()},e.next=3,ht(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e){return St.apply(this,arguments)}function St(){return(St=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(){return(Ct=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o(37);var Mt=function(e){var t=e.children,o=e.left,n=e.top,a=e.title,r=e.onClick;return Object(ee.jsxs)("g",{transform:"translate(".concat(o," ").concat(n,")"),className:"icon-button","aria-label":a,onClick:r,onKeyDown:function(e){"Enter"===e.key&&(r(),e.preventDefault(),e.stopPropagation())},tabIndex:0,role:"button",children:[Object(ee.jsx)("rect",{stroke:"var(--color-outline)",width:60,height:60,fill:"var(--color-background)"}),Object(ee.jsx)("g",{transform:"translate(".concat(5," ",5,")"),children:t})]})},It=function(){return Object(ee.jsx)("path",{d:"M 20 2.5 h 10 v 25 h 10 l -15 15 l -15 -15 h 10 v -25 z M 2.5 45 h 45 v 2.5 h -45 z",stroke:"var(--color-outline)",fill:"var(--color-background)"})},Xt=function(){return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("path",{d:"M 5 7.5 a 2.5 2.5 1 0 0 -2.5 2.5 v 35 a 2.5 2.5 1 0 0 2.5 2.5 h 37.5 a 2.5 2.5 1 0 0 2.5 -2.5 v -30 a 2.5 2.5 1 0 0 -2.5 -2.5 h -20 a 2.5 2.5 1 0 1 -2.5 -2.5 a 2.5 2.5 1 0 0 -2.5 -2.5 z",stroke:"var(--color-outline)",fill:"var(--color-background)"}),Object(ee.jsx)("path",{d:"M 10 10 a 2.5 2.5 1 0 0 -2.5 2.5 l -5 32.5 a 2.5 2.5 1 0 0 2.5 2.5 h 37.5 a 2.5 2.5 1 0 0 2.5 -2.5 l 5 -27.5 a 2.5 2.5 1 0 0 -2.5 -2.5 h -20 a 2.5 2.5 1 0 1 -2.5 -2.5 a 2.5 2.5 1 0 0 -2.5 -2.5 z",stroke:"var(--color-outline)",fill:"var(--color-background)"})]})},Et=function(){return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"25",cy:"25",r:"22.5"}),Object(ee.jsx)("path",{fill:"var(--color-background)",stroke:"var(--color-outline)",d:"M 20 5 a 20.5 20.5 1 1 0 10 0 v 2.5 h -10 z"}),Object(ee.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"37.5",cy:"25",r:"2.5"}),Object(ee.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"33.83",cy:"33.83",r:"2.5"}),Object(ee.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"25",cy:"37.5",r:"2.5"}),Object(ee.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"16.16",cy:"33.83",r:"2.5"}),Object(ee.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"12.5",cy:"25",r:"2.5"})]})},Nt=function(){return Object(ee.jsx)("path",{d:"M 7.5 2.5 a 5 5 1 0 0 -5 5 v 35 a 5 5 1 0 0 5 5 h 35 a 5 5 1 0 0 5 -5  v -32.5 l -7.5 -7.5 h -32.5 M 10 47.5 v -17.5 a 2.5 2.5 1 0 1 2.5 -2.5 h 25 a 2.5 2.5 1 0 1 2.5 2.5 v 17.5 M 12.5 2.5 v 15 h 25 v -15 M 35 5 v 10 h -7.5 v -10 h 7.75 M 12.5 30 h 25 v 2.5 h -25 v -2.75 M 12.5 35 h 25 v 2.5 h -25 v -2.75 M 12.5 40 h 25 v 2.5 h -25 v -2.75",stroke:"var(--color-outline)",fill:"var(--color-background)"})},Dt=(o(38),function(e){var t=e.value,o=e.left,a=e.top,r=e.onChange,c=e.width,l=e.height,i=n.useState(),s=Object(p.a)(i,2),u=s[0],d=s[1];return Object(ee.jsxs)("g",{transform:"translate(".concat(o," ").concat(a,")"),className:"title-input",children:[Object(ee.jsx)("rect",{width:c,height:l,fill:"none",stroke:"var(--color-outline)"}),Object(ee.jsx)("foreignObject",{width:c,height:l,children:Object(ee.jsx)("input",{type:"text",value:void 0==u?t:u,onChange:function(e){d(e.currentTarget.value)},onBlur:function(e){u&&r(u),d(void 0)},onKeyDown:function(e){"Enter"===e.key&&e.currentTarget.blur()}})})]})});var At={dispatchSetPatchName:q,dispatchShowModal:function(e){return{modalType:e,type:M}},dispatchOpenSavedPatch:L},qt=Object(f.b)((function(e,t){if(!e)return{};var o=!e.saved;return e.saved&&(o=e.patchEdited||e.saved.name!==e.name),Object(l.a)(Object(l.a)({},t),{},{patchName:e.name,saved:e.saved,patch:e.patch,patchNotSaved:o})}),At)((function(e){var t,o=e.patchName,n=e.saved,a=e.patch,r=e.patchNotSaved,c=e.dispatchSetPatchName,i=e.dispatchShowModal,d=e.dispatchOpenSavedPatch,p=function(){var e=Object(u.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,_t(Object(l.a)(Object(l.a)({},n),{},{patch:G(a),preview:Z(t),name:o}));case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,wt(o,a,Z(t));case 8:r=e.sent;case 9:d(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)(Ze,{left:0,top:0,width:1575,height:120,children:[Object(ee.jsx)("g",{ref:function(e){e&&(t=e.ownerSVGElement)}}),Object(ee.jsxs)(Ze,{left:0,top:0,width:840,height:120,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:840,height:30,label:"UNOFFICIAL EASEL PROGRAM MANAGER"}),Object(ee.jsx)(Mt,{left:15,top:45,title:"Saved Patches",onClick:function(){return i("file")},children:Object(ee.jsx)(Xt,{})}),Object(ee.jsx)(Mt,{left:90,top:45,title:"Save Patch",onClick:p,children:Object(ee.jsx)(Nt,{})}),Object(ee.jsx)(Mt,{left:165,top:45,title:"Send patch to easel",onClick:function(){return i("download")},children:Object(ee.jsx)(It,{})}),Object(ee.jsx)(Mt,{left:240,top:45,title:"Midi Config",onClick:function(){return i("midi")},children:Object(ee.jsx)(Et,{})}),Object(ee.jsx)(Dt,{left:315,top:45,height:60,width:410,onChange:c,value:o}),Object(ee.jsx)(ae,{x:785,y:65,color:"var(--color-modulation-oscillator)",connectionPoint:Q.ModulationCVOutput,text:"mod cv out"})]}),Object(ee.jsxs)(Ze,{left:840,top:0,width:305,height:120,children:["-",Object(ee.jsx)(Ze,{left:0,top:0,width:305,height:30,label:"EXTERNAL CV"}),Object(ee.jsx)(ae,{x:55,y:65,color:"var(--color-input)",connectionPoint:Q.PanelInput,text:"to panel"}),Object(ee.jsx)(ae,{x:152.5,y:65,color:"var(--color-keyboard-pressure)",connectionPoint:Q.Panel1Output,id:0,text:"from panel 1"}),Object(ee.jsx)(ae,{x:250,y:65,color:"var(--color-keyboard-pressure)",connectionPoint:Q.Panel2Output,text:"from panel 2"})]}),Object(ee.jsxs)(Ze,{left:1145,top:0,width:130,height:120,children:["-",Object(ee.jsx)(Ze,{left:0,top:0,width:130,height:30,label:"COMP OSC"}),Object(ee.jsx)(ae,{x:65,y:65,color:"var(--color-input)",connectionPoint:Q.ComplexOscWaveshapeInput,text:"waveshape"})]}),Object(ee.jsxs)(Ze,{left:1275,top:0,width:300,height:120,children:[Object(ee.jsx)(Ze,{left:0,top:0,width:300,height:30,label:"PRE AMP / ENVELOPE DETECTOR"}),r&&Object(ee.jsxs)("g",{transform:"translate(15, 45)",children:[Object(ee.jsx)(te,{className:"big",x:90,y:28,text:"Patch not",anchor:"middle"}),Object(ee.jsx)(te,{className:"big",x:90,y:50,text:"saved!",anchor:"middle"})]}),Object(ee.jsx)(ae,{x:250,y:65,color:"var(--color-sequencer)",connectionPoint:Q.EnvelopeDetectorOutput,text:"env det out"})]})]})}));function Tt(){return(Tt=Object(u.a)(s.a.mark((function e(t){var o,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me();case 2:o=e.sent,n=Object(d.a)(o);try{for(n.s();!(a=n.n()).done;)-1!==(r=a.value)[1].indexOf("iProgram")&&t(r[0])}catch(c){n.e(c)}finally{n.f()}console.log("INPUTS: ".concat(o.join(",")));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lt={dispatchConnectCV:function(e,t,o,n){return{type:O,startPoint:e,startId:t,endPoint:o,endId:n}},dispatchSetMIDIOutput:A,dispatchDisconnectCV:function(e,t,o,n){return{type:x,startPoint:e,startId:t,endPoint:o,endId:n}}},Vt=Object(f.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{dragPoints:e.dragPoints,connections:e.patch.connections}):{}}),Lt)((function(e){var t,o=e.dragPoints,a=e.connections,r=e.dispatchConnectCV,c=e.dispatchDisconnectCV,l=e.dispatchSetMIDIOutput,i=n.useState(),s=Object(p.a)(i,2),u=s[0],f=s[1],m=n.useState(),v=Object(p.a)(m,2),h=v[0],b=v[1];n.useEffect((function(){!function(e){Tt.apply(this,arguments)}(l)}),[]);n.useEffect((function(){var e=function(e){var t,n=Object(d.a)(o);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(B(e.x,e.y,a.x,a.y)<=25)return a}}catch(r){n.e(r)}finally{n.f()}},n=function(o){var n=K(t,o.clientX,o.clientY),a=e(n);a&&(f(a),o.preventDefault(),o.stopPropagation())},a=function(o){if(u){var n=K(t,o.clientX,o.clientY),a=e(n);if(a){var c=Q[u.connectionPoint],l=Q[a.connectionPoint];-1!==c.indexOf("Input")!==(-1!==l.indexOf("Input"))&&r(u.connectionPoint,u.id,a.connectionPoint,a.id)}f(void 0),b(void 0)}},c=function(e){if(u){var o=K(t,e.clientX,e.clientY);b(o),e.preventDefault(),e.stopPropagation()}},l=function(e){f(void 0),b(void 0)};return t.addEventListener("pointerdown",n),t.addEventListener("pointerup",a),t.addEventListener("pointermove",c,!0),t.addEventListener("pointerleave",l),function(){t.removeEventListener("pointerdown",n),t.removeEventListener("pointerup",a),t.removeEventListener("pointermove",c,!0),t.removeEventListener("pointerleave",l)}}),[u,o]);for(var j=[],g=o.length?a.map((function(e,t){var n=o.find((function(t){return e.start.connectionPoint===t.connectionPoint&&e.start.id===t.id})),a=o.find((function(t){return e.end.connectionPoint===t.connectionPoint&&e.end.id===t.id}));if(n&&a)return j[e.color]=!0,Object(ee.jsx)(Fe,{x0:n.x,y0:n.y,x1:a.x,y1:a.y,colorIndex:e.color,onClick:function(){return c(e.start.connectionPoint,e.start.id,e.end.connectionPoint,e.end.id)}},t)})):[],O=j.length,x=0;x<j.length;x++)if(!j[x]){O=x;break}return Object(ee.jsxs)("svg",{viewBox:"0 0 1580 770",xmlns:"http://www.w3.org/2000/svg",ref:function(e){e&&(t=e)},children:[Object(ee.jsx)("defs",{children:Object(ee.jsx)("pattern",{id:"stripes",x:"0",y:"0",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(-45)",children:Object(ee.jsx)("rect",{x:0,y:0,width:1,height:8,fill:"var(--color-outline)"})})}),Object(ee.jsxs)("g",{className:"easel-content",transform:"translate(2, 2)",children:[Object(ee.jsx)(qt,{}),Object(ee.jsx)(ut,{}),Object(ee.jsx)(ct,{}),Object(ee.jsx)(st,{}),Object(ee.jsx)(lt,{}),Object(ee.jsx)(at,{}),Object(ee.jsx)(rt,{}),Object(ee.jsx)(it,{}),g,o&&o.map((function(e){return Object(ee.jsx)("circle",{className:"drag-point",cx:e.x,cy:e.y,r:25,opacity:0})})),u&&Object(ee.jsx)(Fe,{dragging:!0,x0:u.x,y0:u.y,x1:h?h.x:u.x,y1:h?h.y:u.y,colorIndex:O})]})]})}));o(39);function Ut(e){var t="number"==typeof e.which?e.which:e.keyCode;13!==t&&32!==t||(e.preventDefault(),e.currentTarget.click())}function Ft(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.filter((function(e){return"string"===typeof e})).reduce((function(e,t){return e.concat(t.split(" "))}),[]).map((function(e){return e.trim()})).filter((function(e){return!!e})).join(" ")}var Rt=function(e){var t=e.id,o=e.className,n=e.style,a=e.ariaLabel,r=e.ariaHidden,c=e.ariaDescribedBy,l=e.ariaControls,i=e.ariaExpanded,s=e.ariaHasPopup,u=e.ariaPosInSet,d=e.ariaSetSize,p=e.ariaSelected,f=e.role,m=e.onClick,v=e.onKeydown,h=e.onBlur,b=e.buttonRef,j=e.title,g=e.label,O=e.leftIcon,x=e.rightIcon,w=e.hardDisabled,y=e.href,_=e.target,k=e.tabIndex,P=e.disabled,S=Ft("common-button",o,(P=P||w)&&"disabled");return Object(ee.jsx)("button",{id:t,className:S,style:n,title:j,ref:b,onClick:P?void 0:function(e){m&&m(),y&&window.open(y,_||"_blank","noopener,noreferrer"),e.stopPropagation(),e.preventDefault()},onKeyDown:v||Ut,onBlur:h,role:f||"button",tabIndex:k||(P?-1:0),disabled:w,"aria-label":a,"aria-hidden":r,"aria-controls":l,"aria-expanded":i,"aria-haspopup":s,"aria-posinset":u,"aria-setsize":d,"aria-describedby":c,"aria-selected":p,children:Object(ee.jsxs)("span",{className:"common-button-flex",children:[O&&Object(ee.jsx)("i",{className:O,"aria-hidden":!0}),Object(ee.jsx)("span",{className:"common-button-label",children:g}),x&&Object(ee.jsx)("i",{className:"right "+x,"aria-hidden":!0})]})})},Gt=function(e){var t,o,n=e.id,a=e.className,r=e.role,c=e.ariaHidden,l=e.ariaLabel,i=e.childTabStopId,s=e.children,u=e.onItemReceivedFocus,p=e.useUpAndDownArrowKeys;return Object(ee.jsx)("div",{id:n,className:a,role:r,tabIndex:i?void 0:0,onKeyDown:function(e){var n;if(null===(n=t)||void 0===n?void 0:n.length){var a=document.activeElement,r=t.indexOf(a),c=function(e){e.focus(),u&&u(e)};-1===r&&a!==o||("Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),a.click?a.click():a.dispatchEvent(new Event("click"))):e.key===(p?"ArrowDown":"ArrowRight")?(r===t.length-1||a===o?c(t[0]):c(t[r+1]),e.preventDefault(),e.stopPropagation()):e.key===(p?"ArrowUp":"ArrowLeft")?(c(0===r||a===o?t[t.length-1]:t[Math.max(r-1,0)]),e.preventDefault(),e.stopPropagation()):"Home"===e.key?(c(t[0]),e.preventDefault(),e.stopPropagation()):"End"===e.key&&(c(t[t.length-1]),e.preventDefault(),e.stopPropagation()))}},ref:function(e){if(e&&!o){o=e;var n=e.querySelectorAll('[tabindex]:not([tabindex="-1"]),[data-isfocusable]');t=[];var a,r=Object(d.a)(n.values());try{for(r.s();!(a=r.n()).done;){var c=a.value;t.push(c),c.setAttribute("tabindex","-1"),c.setAttribute("data-isfocusable","true")}}catch(s){r.e(s)}finally{r.f()}if(i){var l=o.querySelector("#"+i);l&&l.setAttribute("tabindex","0")}}},"aria-hidden":c,"aria-label":l,children:s})},Wt=function(e){var t,o=e.id,a=e.className,r=e.ariaHidden,c=e.ariaLabel,i=e.role,s=e.items,u=e.tabIndex,d=e.selectedId,f=e.onItemSelected,m=n.useState(!1),v=Object(p.a)(m,2),h=v[0],b=v[1],j=Ft("common-dropdown",a),g=s.find((function(e){return e.id===d}))||s[0];return Object(ee.jsxs)("div",{className:j,ref:function(e){e&&(t=e)},onBlur:function(e){t&&h&&!t.contains(e.relatedTarget)&&b(!1)},children:[Object(ee.jsx)(Rt,Object(l.a)(Object(l.a)({},g),{},{id:o,tabIndex:u,rightIcon:h?"chevron-up":"chevron-down",role:i,className:Ft("common-dropdown-button",h&&"expanded",g.className),onClick:function(){b(!h)},onKeydown:function(e){var t=s.indexOf(g);"ArrowDown"===e.key?t<s.length-1&&(f(s[t+1].id),e.preventDefault(),e.stopPropagation()):"ArrowUp"===e.key?t>0&&(f(s[t-1].id),e.preventDefault(),e.stopPropagation()):"Enter"===e.key&&(b(!0),e.preventDefault(),e.stopPropagation())},ariaHasPopup:"listbox",ariaExpanded:h,ariaLabel:c,ariaHidden:r})),h&&Object(ee.jsx)(Gt,{role:"listbox",className:"common-menu-dropdown-pane common-dropdown-shadow",childTabStopId:d,"aria-labelledby":o,useUpAndDownArrowKeys:!0,onItemReceivedFocus:function(e){e.id&&s.some((function(t){return t.id===e.id}))&&f(e.id)},children:Object(ee.jsx)("ul",{role:"presentation",children:s.map((function(e){return Object(ee.jsx)("li",{role:"presentation",children:Object(ee.jsx)(Rt,Object(l.a)(Object(l.a)({},e),{},{className:Ft("common-dropdown-item",e.className),onClick:function(){b(!1),f(e.id)},ariaSelected:e.id===d,role:"option"}))},e.id)}))})})]})};var Ht={dispatchHideModal:T,dispatchSetMIDIOutput:A},Kt=Object(f.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{midiOutput:e.midiOutput}):{}}),Ht)((function(e){var t=e.dispatchSetMIDIOutput,o=e.midiOutput,n=a.a.useState([]),r=Object(p.a)(n,2),c=r[0],l=r[1];a.a.useEffect((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me();case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),qe(e),function(){Le(e)}}),[]);var i,f=[{label:"None",title:"None",id:"None"}],m=Object(d.a)(c);try{for(m.s();!(i=m.n()).done;){var v=i.value;f.push({label:v[1],title:v[1],id:"output-"+v[0]})}}catch(b){m.e(b)}finally{m.f()}var h="None";c.some((function(e){return e[0]===o}))&&(h="output-"+o);return Object(ee.jsxs)("div",{className:"modal-field",children:[Object(ee.jsx)("div",{className:"modal-field-label",children:"Midi output:"}),Object(ee.jsx)(Wt,{id:"midi-output",onItemSelected:function(e){t("None"===e?void 0:e.split("-").slice(1).join("-"))},items:f,selectedId:h})]})})),Bt=(o(40),function(e){var t,o=e.children,a=e.id,r=e.className,c=e.onEscape,l=e.arrowKeyNavigation,i=e.dontStealFocus,s=e.includeOutsideTabOrder,u=n.useState(!1),f=Object(p.a)(u,2),m=f[0],v=f[1],h=function(){return function(e){var t,o=[],n=Object(d.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;o.push(a)}}catch(r){n.e(r)}finally{n.f()}return o}(s?t.querySelectorAll("[tabindex]"):t.querySelectorAll('[tabindex]:not([tabindex="-1"])'))};return Object(ee.jsx)("div",{id:a,className:Ft("common-focus-trap",r),ref:function(e){e&&(t=e,i||m||e.contains(document.activeElement)||!h().length||(t.focus(),v(!0)))},onKeyDown:function(e){if(t){var o=function(t,o){var n=h();if(n.length){var a=n.indexOf(e.target);t?o?n[n.length-1].focus():a===n.length-1?n[0].focus():n[a+1].focus():o?n[0].focus():0===a?n[n.length-1].focus():n[Math.max(a-1,0)].focus(),e.preventDefault(),e.stopPropagation()}};"Escape"===e.key?(c(),e.preventDefault(),e.stopPropagation()):"Tab"===e.key?e.shiftKey?o(!1,!1):o(!0,!1):l&&("ArrowDown"===e.key?o(!0,!1):"ArrowUp"===e.key?o(!1,!1):"Home"===e.key?o(!1,!0):"End"===e.key&&o(!0,!0))}},tabIndex:-1,children:o})}),zt=function(e){var t=e.title,o=e.onCloseClick,n=e.actions,a=e.children,r=e.className;return Object(ee.jsxs)("div",{className:"modal-container",children:[Object(ee.jsx)("div",{className:"modal-background",onClick:o}),Object(ee.jsx)("div",{className:["modal",r].filter((function(e){return!!e})).join(" "),children:Object(ee.jsxs)(Bt,{onEscape:o,children:[Object(ee.jsxs)("div",{className:"modal-title-container",children:[Object(ee.jsx)("div",{className:"modal-title",children:t}),Object(ee.jsx)("button",{title:"Close",onClick:o,tabIndex:0,children:"\u2715"})]}),Object(ee.jsx)("div",{className:"modal-content",children:a}),!!(null===n||void 0===n?void 0:n.length)&&Object(ee.jsx)("div",{className:"modal-actions",children:n.map((function(e){var t=e.label,o=e.onClick,n=e.className;return Object(ee.jsx)(Rt,{title:t,label:t,onClick:o,className:n},e.label)}))})]})})]})};var Yt={dispatchHideModal:T,dispatchSetMidiSpeed:function(e){return{speed:e,type:P}}},Jt=Object(f.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{patch:e.patch,patchName:e.name,midiOutput:e.midiOutput,midiSpeed:e.midiSpeed}):{}}),Yt)((function(e){for(var t=e.dispatchHideModal,o=e.patch,a=e.patchName,r=e.midiOutput,c=e.midiSpeed,l=e.dispatchSetMidiSpeed,i=n.useState("None"),s=Object(p.a)(i,2),u=s[0],f=s[1],m=n.useState(!1),v=Object(p.a)(m,2),h=v[0],b=v[1],j=n.useState(0),g=Object(p.a)(j,2),O=g[0],x=g[1],w=n.useState(),y=Object(p.a)(w,2),_=y[0],k=y[1],P=[{label:"None",id:"None",title:"None"}],S=0;S<24;S++)P.push({label:S<9?"0"+(S+1):""+(S+1),title:"Save Slot "+(S+1),id:"slot-"+S});var C=[];(h||r)&&C.push({label:"Cancel",onClick:function(){_&&_.cancel(),t()}}),!h&&r&&C.push({label:"Send",onClick:function(){_&&_.cancel(),b(!0);var e=he(o,!0,a,"None"!==u?parseInt(u.split("-").slice(-1)[0]):void 0);"None"===u&&(e=function(){var e,t=Object.keys(le).filter((function(e){return-1!==e.indexOf("Output")})).map((function(e){return le[e]})),o=Object.keys(le).filter((function(e){return-1!==e.indexOf("Output")})).map((function(e){return le[e]})),n=[],a=Object(d.a)(t);try{for(a.s();!(e=a.n()).done;){var r,c=e.value,l=Object(d.a)(o);try{for(l.s();!(r=l.n()).done;){var i=r.value;n.push(ve(c,i))}}catch(s){l.e(s)}finally{l.f()}}}catch(s){a.e(s)}finally{a.f()}return n}().concat(e));var n=new R;k(n),function(e,t,o,n){return Ae.apply(this,arguments)}(r,e,(function(e,t){x(Math.round(e/t*100))}),n).then((function(){k(void 0),t()}))}});var M="var(--color-outline)",I="var(--color-background)";return Object(ee.jsxs)(zt,{title:"Send patch to easel",onCloseClick:t,actions:C,children:[!h&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Kt,{}),Object(ee.jsxs)("div",{className:"modal-field",children:[Object(ee.jsx)("div",{className:"modal-field-label",children:"Save slot:"}),Object(ee.jsx)(Wt,{id:"download-save-slot",onItemSelected:function(e){f(e)},items:P,selectedId:u})]}),Object(ee.jsxs)("div",{className:"modal-field",children:[Object(ee.jsx)("div",{className:"modal-field-label",children:"Message speed:"}),Object(ee.jsx)(Wt,{id:"download-midi-speed",onItemSelected:function(e){l(e)},items:[{label:"Very Slow",title:"Very Slow",id:"very-slow"},{label:"Slow",title:"Slow",id:"slow"},{label:"Medium",title:"Medium",id:"medium"},{label:"Fast",title:"Fast",id:"fast"}],selectedId:c})]})]}),h&&Object(ee.jsxs)("div",{className:"progress-bar-outer",children:[Object(ee.jsx)("div",{children:"Sending patch to easel..."}),Object(ee.jsx)("div",{className:"progress-bar",style:{backgroundImage:"linear-gradient(to right, ".concat(M," 0%, ").concat(M," ").concat(O,"%, ").concat(I," ").concat(O,"%, ").concat(I," 100%)")}})]})]})}));o(41);var Zt={dispatchHideModal:T,dispatchOpenSavedPatch:L,dispatchShowSaveModal:function(e){return{patch:e,type:X}},dispatchCreateNewPatch:V},Qt=Object(f.b)((function(e,t){if(!e)return{};var o=!e.saved;return e.saved&&(o=e.patchEdited||e.saved.name!==e.name),Object(l.a)(Object(l.a)({},t),{},{patchNotSaved:o})}),Zt)((function(e){var t=e.dispatchHideModal,o=e.dispatchOpenSavedPatch,a=e.dispatchShowSaveModal,r=e.dispatchCreateNewPatch,c=e.patchNotSaved,l=n.useState([]),i=Object(p.a)(l,2),s=i[0],u=i[1];n.useEffect((function(){(function(){return Ct.apply(this,arguments)})().then(u)}),[]);return Object(ee.jsx)(zt,{title:"Saved patches",onCloseClick:t,children:Object(ee.jsx)("div",{className:"saved-patches-scroller",children:Object(ee.jsxs)("div",{className:"saved-patches-list",children:[Object(ee.jsx)("div",{className:"saved-patch-list-item new-patch",onClick:function(){t(),c?a(void 0):r()},tabIndex:0,role:"button",children:"Create empty patch"}),s.map((function(e){return Object(ee.jsxs)("div",{className:"saved-patch-list-item",onClick:function(){return function(e){t(),c?a(e):o(e)}(e)},tabIndex:0,role:"button",children:[Object(ee.jsxs)("div",{className:"saved-patch-detail",children:[Object(ee.jsx)("div",{className:"saved-patch-name",children:e.name}),Object(ee.jsxs)("div",{className:"saved-patch-time",children:["Last edited ",Y(e.lastSavedTime)]})]}),Object(ee.jsx)("div",{className:"saved-patch-preview",children:Object(ee.jsx)("img",{src:e.preview,alt:"Preview of patch"})})]},e.id)}))]})})})}));var $t={dispatchHideModal:T,dispatchSetMIDIInput:function(e){return{type:w,name:e}}},eo=Object(f.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{midiInput:e.midiInput}):{}}),$t)((function(e){var t=e.dispatchHideModal,o=e.dispatchSetMIDIInput,a=e.midiInput,r=n.useState([]),c=Object(p.a)(r,2),l=c[0],i=c[1];n.useEffect((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),qe(e),function(){Le(e)}}),[]);var f,m=[{label:"None",title:"None",id:"None"}],v=Object(d.a)(l);try{for(v.s();!(f=v.n()).done;){var h=f.value;m.push({label:h[1],title:h[1],id:"input-"+h[0]})}}catch(j){v.e(j)}finally{v.f()}var b="None";l.some((function(e){return e[0]===a}))&&(b="input-"+a);return Object(ee.jsxs)(zt,{title:"Midi config",onCloseClick:t,children:[Object(ee.jsxs)("div",{className:"modal-field",children:[Object(ee.jsx)("div",{className:"modal-field-label",children:"Midi input:"}),Object(ee.jsx)(Wt,{id:"midi-input",onItemSelected:function(e){o("None"===e?void 0:e.split("-").slice(1).join("-"))},items:m,selectedId:b})]}),Object(ee.jsx)(Kt,{})]})}));var to={dispatchHideModal:T,dispatchOpenSavedPatch:L,dispatchCreateNewPatch:V},oo=Object(f.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{patchToLoad:e.modal.patchToLoad,saved:e.saved,patch:e.patch,patchName:e.name}):{}}),to)((function(e){var t=e.dispatchHideModal,o=e.dispatchOpenSavedPatch,n=e.dispatchCreateNewPatch,a=e.patchToLoad,r=e.saved,c=e.patchName,i=e.patch,d=[{label:"Don't Save",onClick:function(){t(),a?o(a):n()}},{label:"Save",onClick:function(){var e=Object(u.a)(s.a.mark((function e(){var u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),u=document.querySelector(".App > svg"),!r){e.next=7;break}return e.next=5,_t(Object(l.a)(Object(l.a)({},r),{},{patch:G(i),preview:Z(u),name:c}));case 5:e.next=9;break;case 7:return e.next=9,wt(c,i,Z(u));case 9:a?o(a):n();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}];return Object(ee.jsx)(zt,{className:"small",title:"Unsaved patch",onCloseClick:t,actions:d,children:Object(ee.jsx)("div",{className:"modal-text-content",children:"Your patch has unsaved changes. Do you want to save before continuing?"})})}));var no={dispatchUpdateFader:N},ao=Object(f.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{modalState:e.modal}):{}}),no)((function(e){switch(e.modalState.type){case"download":return Object(ee.jsx)(Jt,{});case"file":return Object(ee.jsx)(Qt,{});case"midi":return Object(ee.jsx)(eo,{});case"save":return Object(ee.jsx)(oo,{})}}));Pe.subscribe(function(e,t){var o;return function(){o&&clearTimeout(o),o=setTimeout((function(){e(),o=void 0}),t)}}((function(){var e=Pe.getState(),t=G(e.patch);if(window.location.replace("#"+t+"&"+encodeURIComponent(e.name)),e.saved){var o=e.saved.patch!==t;!!e.patchEdited!==o&&Pe.dispatch(function(e){return{edited:e,type:S}}(o))}}),500));var ro={dispatchSetPatch:function(e){return{type:_,patch:e}},dispatchOpenSavedPatch:L,dispatchSetPatchName:q},co=Object(f.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{modal:e.modal}):{}}),ro)((function(e){var t=e.modal,o=e.dispatchSetPatch,n=e.dispatchOpenSavedPatch,r=e.dispatchSetPatchName;return a.a.useEffect((function(){(function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,c,l,i,u,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.LAST_EDITED_PROJECT)){e.next=5;break}return e.next=4,Pt(parseInt(a));case 4:c=e.sent;case 5:if(!((null===(l=window.location.hash)||void 0===l?void 0:l.length)<=2)){e.next=9;break}return c&&n(c),e.abrupt("return");case 9:if(i=l.slice(1).split("&"),u=i[0],d=W(u),p=decodeURIComponent(i[1]),(null===(t=c)||void 0===t?void 0:t.patch)!==u||c.name!==p){e.next=16;break}return n(c),e.abrupt("return");case 16:o(d),r(p);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(ee.jsxs)("div",{className:"App",children:[Object(ee.jsx)(Vt,{}),t&&Object(ee.jsx)(ao,{})]})})),lo=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,43)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;o(e),n(e),a(e),r(e),c(e)}))};c.a.render(Object(ee.jsx)(a.a.StrictMode,{children:Object(ee.jsx)(f.a,{store:Pe,children:Object(ee.jsx)(co,{})})}),document.getElementById("root")),lo()}},[[42,1,2]]]);
//# sourceMappingURL=main.4431ca69.chunk.js.map