(this.webpackJsonpeasel=this.webpackJsonpeasel||[]).push([[0],{21:function(e,t,o){},22:function(e,t,o){},23:function(e,t,o){},31:function(e,t,o){},33:function(e,t,o){},34:function(e,t,o){},35:function(e,t,o){},36:function(e,t,o){},37:function(e,t,o){},38:function(e,t,o){"use strict";o.r(t);var n=o(1),a=o.n(n),r=o(9),c=o.n(r),l=(o(21),o(2)),i=(o(22),o(23),o(3)),s=o.n(i),u=o(5),d=o(6),f=o(7),p=o(4),m=o(16),v=o(8),h="UPDATE_FADER",b="UPDATE_SWITCH",j="SET_DRAG_POINT",O="CONNECT_CV",g="DISCONNECT_CV",x="SET_MIDI_INPUT",w="SET_MIDI_OUTPUT",y="SET_PATCH",_="SET_PATCH_NAME",P="SET_MIDI_SPEED",k="SET_PATCH_EDITED",S="SHOW_MODAL",M="HIDE_MODAL",X="OPEN_SAVED_PATCH";function C(e,t,o){return{type:h,module:e,param:t,value:o}}function I(e,t,o){return{type:b,module:e,param:t,value:o}}function E(e){return{type:w,name:e}}function N(){return{type:M}}function D(e){return{patch:e,type:X}}var q=o(14),A=o(15),T=function(){function e(){Object(q.a)(this,e),this.isCancelled=!1}return Object(A.a)(e,[{key:"cancel",value:function(){this.isCancelled=!0}}]),e}();function V(e){var t="";F(e,(function(e,t){return r(e,t),0}));var o,n=Object(u.a)(e.connections);try{for(n.s();!(o=n.n()).done;){var a=o.value;r(a.start.connectionPoint,1),r(a.start.id,1),r(a.end.connectionPoint,1),r(a.end.id,1),r(a.color,1)}}catch(c){n.e(c)}finally{n.f()}return encodeURIComponent(btoa(t));function r(e,o){for(var n=0;n<o;n++)t+=String.fromCharCode(e>>8*n&255)}}function L(e){var t=atob(decodeURIComponent(e)),o=0,n=F({sequencer:{triggerSelect:"bottom",stages:"bottom",voltage1:0,voltage2:0,voltage3:0,voltage4:0,voltage5:0,pulse1:"top",pulse2:"top",pulse3:"top",pulse4:"top",pulse5:"top"},envelope:{attack:0,sustain:0,decay:0,triggerSelect:"bottom",modeSelect:"bottom"},pulser:{triggerSelect:"bottom",modeSelect:"bottom",period:0,periodCV:0},modOsc:{keyboard:"bottom",waveshape:"bottom",range:"bottom",modulationType:"bottom",frequency:0,frequencyCV:0,modulation:0,modulationCV:0},complexOsc:{keyboard:"bottom",waveshape:"bottom",polarity:"bottom",pitch:0,pitchCV:0,timbre:0,timbreCV:0,timbreKnob:0},gates:{gate2Source:"bottom",gate1Mode:"bottom",gate2Mode:"bottom",level1:0,level1CV:0,level2:0,level2CV:0},random:{triggerSource:"bottom"},connections:[]},(function(e,n){for(var a=0,r=0;r<n;r++)a|=t.charCodeAt(o)<<8*r,o++;return a}));n.connections=[];for(var a=function(){var e=t.charCodeAt(o);return o++,e},r=o;r<t.length;r+=5){var c={start:{connectionPoint:a(),id:a()},end:{connectionPoint:a(),id:a()},color:a()};n.connections.push(c)}return n}function F(e,t){var o,n={},a=Object(u.a)(Object.keys(e).sort());try{for(a.s();!(o=a.n()).done;){var r=o.value;if(n[r]={},"connections"!==r){var c,l=Object(u.a)(Object.keys(e[r]).sort());try{for(l.s();!(c=l.n()).done;){var i=c.value,s=e[r][i];if(!Array.isArray(s))if("string"===typeof s){var d=["top","bottom","middle"];n[r][i]=d[t(d.indexOf(s),1,r,i,s)]}else n[r][i]=t(s,2,r,i,s)}}catch(f){l.e(f)}finally{l.f()}}}}catch(f){a.e(f)}finally{a.f()}return n}function U(e,t,o){var n,a=e.createSVGPoint();return a.x=t,a.y=o,a.matrixTransform(null===(n=e.getScreenCTM())||void 0===n?void 0:n.inverse())}function G(e,t,o,n){return Math.sqrt(Math.pow(e-o,2)+Math.pow(t-n,2))}function R(e){return e.replace(/[^a-zA-Z0-9 ]/g,"")}function W(e){return function(e,t){var o=e-t;if(isNaN(o))return"";return o<0?"now":o<10?"a few seconds ago":o<60?" "+H(Math.floor(o),"second")+" ago":o<120?"a minute ago":o<3600?" "+H(Math.floor(o/60),"minute")+" ago":o<7200?"an hour ago":o<86400?" "+H(Math.floor(o/60/60),"hour")+" ago":o<2592e3?" "+H(Math.floor(o/60/60/24),"day")+" ago":o<31536e3?" "+H(Math.floor(o/60/60/24/30),"month")+" ago":" "+H(Math.floor(o/60/60/24/365),"year")+" ago"}(Date.now()/1e3,e/1e3)}function H(e,t){return e+" "+t+(1==e?"":"s")}function K(e){var t=e.cloneNode(!0),o=document.createElementNS("http://www.w3.org/2000/svg","style");t.appendChild(o),o.textContent=z;var n=t.querySelector(".easel-content");t.setAttribute("viewBox","0 0 1588 778"),null===n||void 0===n||n.setAttribute("transform","translate(6, 6)");var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x","2"),a.setAttribute("y","2"),a.setAttribute("width","1582"),a.setAttribute("height","750"),a.setAttribute("fill","var(--color-preview-bg)"),t.insertBefore(a,t.firstChild);for(var r=0,c=[".title-input",".easel-text",".icon-button",".jack-arrow",".wave-path",".easel-fader-bg.filled","foreignObject",".knob-fg-outline",".knob-bg"];r<c.length;r++)for(var l=c[r],i=t.querySelectorAll(l),s=0;s<i.length;s++)i.item(s).remove();var u=(new XMLSerializer).serializeToString(t);return"data:image/svg+xml;base64,"+btoa(u)}var B,z="\n* {\n    --color-preview-fg: #1a2c7d;\n    --color-preview-bg: #fff;\n\n    --color-sequencer: var(--color-preview-fg);\n    --color-envelope-generator: var(--color-preview-fg);\n    --color-pulser: var(--color-preview-fg);\n    --color-modulation-oscillator: var(--color-preview-fg);\n    --color-complex-oscillator: var(--color-preview-fg);\n    --color-dual-lo-pass-gate: var(--color-preview-fg);\n    --color-random-voltage: var(--color-preview-fg);\n\n    --color-keyboard-pulse: var(--color-preview-fg);\n    --color-keyboard-pressure: var(--color-preview-fg);\n    --color-keyboard-pitch: var(--color-preview-fg);\n    --color-input: var(--color-preview-fg);\n\n    --color-outline: var(--color-preview-fg);\n    --color-background: var(--color-preview-bg);\n    --color-switch-bg: var(--color-preview-bg);\n    --color-inner-jack: var(--color-preview-bg);\n\n    --color-cable-0: var(--color-preview-bg);\n    --color-cable-1: var(--color-preview-bg);\n    --color-cable-2: var(--color-preview-bg);\n    --color-cable-3: var(--color-preview-bg);\n    --color-cable-4: var(--color-preview-bg);\n    --color-cable-5: var(--color-preview-bg);\n    --color-cable-6: var(--color-preview-bg);\n    --color-cable-7: var(--color-preview-bg);\n    --color-cable-8: var(--color-preview-bg);\n\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\n.easel-text {\n    fill: var(--color-outline);\n    font-size: 14px;\n    user-select: none;\n}\n.section>rect {\n    stroke-width: 8;\n}\n.cable-bg {\n    stroke-width: 20;\n}\n.easel-jack>circle {\n    stroke: none;\n}\n.easel-toggle>circle {\n    fill: var(--color-preview-bg);\n    stroke: none;\n    transform: translate(0, 13px);\n}\n.easel-toggle>rect {\n    transform: translate(0, 13px);\n    stroke-width: 4;\n}\n.easel-toggle-bg {\n    fill: var(--color-preview-fg);\n}\n.knob-fg {\n    stroke: var(--color-preview-bg);\n}\n.knob-bg-outline {\n    stroke-width: 26;\n}\n.easel-knob>path {\n    transform: translate(0, 10px);\n}\n.easel-fader-bg {\n    fill-opacity: 1;\n    stroke-width: 4;\n}\n",Y=(o(31),o(0)),J=function(e){var t=e.x,o=e.y,n=e.text,a=e.anchor,r=e.alignment,c=e.className;return Object(Y.jsx)("text",{className:["easel-text",c].filter((function(e){return!!e})).join(" "),x:t,y:o,textAnchor:a,alignmentBaseline:r,fill:"var(--color-outline)",children:n})};!function(e){e[e.PulseOutput=0]="PulseOutput",e[e.PressureOutput=1]="PressureOutput",e[e.PitchOutput=2]="PitchOutput",e[e.SequentialVoltageOutput=3]="SequentialVoltageOutput",e[e.EnvelopeGeneratorOutput=4]="EnvelopeGeneratorOutput",e[e.PulserOutput=5]="PulserOutput",e[e.RandomOutput=6]="RandomOutput",e[e.Panel1Output=7]="Panel1Output",e[e.Panel2Output=8]="Panel2Output",e[e.EnvelopeDetectorOutput=9]="EnvelopeDetectorOutput",e[e.ModulationCVOutput=10]="ModulationCVOutput",e[e.PulserPeriodInput=11]="PulserPeriodInput",e[e.ModulationOscFrequencyInput=12]="ModulationOscFrequencyInput",e[e.ModulationOscModulationInput=13]="ModulationOscModulationInput",e[e.ComplexOscPitchInput=14]="ComplexOscPitchInput",e[e.ComplexOscTimbreInput=15]="ComplexOscTimbreInput",e[e.LoPassGate1Input=16]="LoPassGate1Input",e[e.LoPassGate2Input=17]="LoPassGate2Input",e[e.PanelInput=18]="PanelInput",e[e.EnvelopeAttackInput=19]="EnvelopeAttackInput",e[e.EnvelopeSustainInput=20]="EnvelopeSustainInput",e[e.EnvelopeDecayInput=21]="EnvelopeDecayInput",e[e.ComplexOscWaveshapeInput=22]="ComplexOscWaveshapeInput"}(B||(B={}));var Z=25;var Q={dispatchSetDragPoint:function(e,t,o,n){return{type:j,connectionPoint:e,id:t,x:o,y:n}}},$=Object(p.b)((function(e,t){return e?Object(l.a)({},t):{}}),Q)((function(e){var t=e.x,o=e.y,n=e.text,a=e.color,r=e.connectionPoint,c=e.id,l=e.arrow,i=e.dispatchSetDragPoint,s=0;return s="long"===l?-103:"medium"===l?-67:-37,Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsxs)("g",{className:"easel-jack",transform:"translate(".concat(t," ").concat(o,")"),children:[Object(Y.jsx)("circle",{ref:function(e){if(e){var t=e.getBoundingClientRect(),o=U(e.ownerSVGElement,t.left+t.width/2,t.top+t.height/2);i(r,c||0,o.x,o.y)}},cx:0,cy:0,r:Z,fill:a,stroke:"var(--color-outline)"}),Object(Y.jsx)("circle",{cx:0,cy:0,r:12,fill:"var(--color-inner-jack)",stroke:"var(--color-outline)"}),n&&Object(Y.jsx)(J,{text:n,x:0,y:45,alignment:"baseline",anchor:"middle"}),l&&Object(Y.jsxs)("g",{className:"jack-arrow",children:[Object(Y.jsx)("line",{x1:0,y1:-25,x2:0,y2:s,stroke:"var(--color-outline)"}),Object(Y.jsx)("path",{d:"M 0 ".concat(s-2," l ",4," ",10," q ").concat(-4," ").concat(-4," ").concat(-8," ",0," Z"),fill:"var(--color-outline)"})]})]})})})),ee=[{name:"cv_connect",length:35,template:"F0 24 2F 63 76 5F 63 6F 6E 6E 65 63 74 00 2C 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 3F F7 80 00 00",arguments:[{offset:29,min:0,max:13},{offset:33,min:0,max:8}]},{name:"cv_disconnect",length:35,template:"f0 24 2f 63 76 5f 63 6f 6e 6e 65 63 74 00 2c 69 69 69 66 00 00 00 00 00 00 00 00 00 00 XX 00 00 00 XX 00 00 00 00 f7",arguments:[{offset:29,min:0,max:13},{offset:33,min:0,max:8}]},{name:"fd_co_cvsPitch",length:31,template:"f0 1c 2f 66 64 5f 63 6f 5f 63 76 73 50 69 74 63 68 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:14},{offset:29,min:0,max:123}]},{name:"fd_co_cvsTimbre",length:35,template:"f0 20 2f 66 64 5f 63 6f 5f 63 76 73 54 69 6d 62 72 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:32,min:0,max:15},{offset:33,min:0,max:125}]},{name:"fd_co_pitch",length:31,template:"f0 1c 2f 66 64 5f 63 6f 5f 70 69 74 63 68 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:125}]},{name:"fd_co_timbre",length:31,template:"f0 1c 2f 66 64 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:119}]},{name:"fd_dlpg_cvsLevel1",length:35,template:"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 31 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:32,min:0,max:15},{offset:33,min:0,max:127}]},{name:"fd_dlpg_cvsLevel2",length:35,template:"f0 20 2f 66 64 5f 64 6c 70 67 5f 63 76 73 4c 65 76 65 6c 32 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:32,min:0,max:15},{offset:33,min:0,max:127}]},{name:"fd_dlpg_level1",length:31,template:"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 31 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:125}]},{name:"fd_dlpg_level2",length:31,template:"f0 1c 2f 66 64 5f 64 6c 70 67 5f 6c 65 76 65 6c 32 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:123}]},{name:"fd_eg_a",length:27,template:"f0 18 2f 66 64 5f 65 67 5f 61 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:127}]},{name:"fd_eg_d",length:27,template:"f0 18 2f 66 64 5f 65 67 5f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:120}]},{name:"fd_eg_s",length:27,template:"f0 18 2f 66 64 5f 65 67 5f 73 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:14},{offset:25,min:0,max:111}]},{name:"fd_mo_cvsFreq",length:31,template:"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 46 72 65 71 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:127}]},{name:"fd_mo_cvsMod",length:31,template:"f0 1c 2f 66 64 5f 6d 6f 5f 63 76 73 4d 6f 64 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:109}]},{name:"fd_mo_freq",length:27,template:"f0 18 2f 66 64 5f 6d 6f 5f 66 72 65 71 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:127}]},{name:"fd_mo_mod",length:27,template:"f0 18 2f 66 64 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:113}]},{name:"fd_p_cvs",length:27,template:"f0 18 2f 66 64 5f 70 5f 63 76 73 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:125}]},{name:"fd_p_period",length:31,template:"f0 1c 2f 66 64 5f 70 5f 70 65 72 69 6f 64 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:126}]},{name:"fd_svs_1",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 31 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:126}]},{name:"fd_svs_2",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 32 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:126}]},{name:"fd_svs_3",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 33 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:126}]},{name:"fd_svs_4",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 34 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:123}]},{name:"fd_svs_5",length:27,template:"f0 18 2f 66 64 5f 73 76 73 5f 35 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:24,min:0,max:15},{offset:25,min:0,max:125}]},{name:"kn_co_timbre",length:31,template:"f0 1c 2f 6b 6e 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 XX XX f7",arguments:[{offset:28,min:0,max:15},{offset:29,min:0,max:127}]},{name:"rt_keyDown",length:23,template:"f0 14 2f 72 74 5f 6b 65 79 44 6f 77 6e 00 2c 69 00 00 00 00 00 XX f7",arguments:[{offset:21,min:0,max:28}]},{name:"rt_keyUp",length:23,template:"f0 14 2f 72 74 5f 6b 65 79 55 70 00 00 00 2c 69 00 00 00 00 00 XX f7",arguments:[{offset:21,min:0,max:28}]},{name:"sw_co_keyboard",length:31,template:"f0 1c 2f 73 77 5f 63 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_co_polarity",length:31,template:"f0 1c 2f 73 77 5f 63 6f 5f 70 6f 6c 61 72 69 74 79 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_co_timbre",length:31,template:"f0 1c 2f 73 77 5f 63 6f 5f 74 69 6d 62 72 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_eg_mode",length:27,template:"f0 18 2f 73 77 5f 65 67 5f 6d 6f 64 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_eg_trigger",length:31,template:"f0 1c 2f 73 77 5f 65 67 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_gate1Mode",length:31,template:"f0 1c 2f 73 77 5f 67 61 74 65 31 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_gate2Mode",length:31,template:"f0 1c 2f 73 77 5f 67 61 74 65 32 4d 6f 64 65 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_gate2Source",length:31,template:"f0 1c 2f 73 77 5f 67 61 74 65 32 53 6f 75 72 63 65 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_mo_keyboard",length:31,template:"f0 1c 2f 73 77 5f 6d 6f 5f 6b 65 79 62 6f 61 72 64 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_mo_mod",length:27,template:"f0 18 2f 73 77 5f 6d 6f 5f 6d 6f 64 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_mo_range",length:31,template:"f0 1c 2f 73 77 5f 6d 6f 5f 72 61 6e 67 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_mo_waveshape",length:35,template:"f0 20 2f 73 77 5f 6d 6f 5f 77 61 76 65 73 68 61 70 65 00 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:33,min:0,max:2}]},{name:"sw_p_mode",length:27,template:"f0 18 2f 73 77 5f 70 5f 6d 6f 64 65 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_p_trigger",length:31,template:"f0 1c 2f 73 77 5f 70 5f 74 72 69 67 67 65 72 00 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_svs_p1",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 31 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p2",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 32 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p3",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 33 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p4",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 34 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_p5",length:27,template:"f0 18 2f 73 77 5f 73 76 73 5f 70 35 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:25,min:0,max:2}]},{name:"sw_svs_stages",length:31,template:"f0 1c 2f 73 77 5f 73 76 73 5f 73 74 61 67 65 73 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_svs_trigger",length:31,template:"f0 1c 2f 73 77 5f 73 76 73 5f 74 72 69 67 67 65 72 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"sw_rv_trigger",length:31,template:"f0 1c 2f 73 77 5f 72 76 5f 74 72 69 67 67 65 72 00 00 2c 69 69 00 00 00 00 00 00 00 00 XX f7",arguments:[{offset:29,min:0,max:2}]},{name:"ps_clearBuffer",length:23,template:"f0 14 2f 70 73 5f 63 6c 65 61 72 42 75 66 66 65 72 00 2c 00 00 00 f7 ff",arguments:[]},{name:"ps_save",length:23,template:"f0 14 2f 70 73 5f 73 61 76 65 00 00 00 00 2c 69 00 00 00 00 00 XX f7",arguments:[{offset:21,min:0,max:1}]},{name:"ps_setName",length:35,template:"f0 20 2f 70 73 5f 73 65 74 4e 61 6d 65 00 2c 69 73 00 00 00 00 01",arguments:[]}],te={sequencer:{triggerSelect:"sw_svs_trigger",stages:"sw_svs_stages",voltage1:"fd_svs_1",voltage2:"fd_svs_2",voltage3:"fd_svs_3",voltage4:"fd_svs_4",voltage5:"fd_svs_5",pulse1:"sw_svs_p1",pulse2:"sw_svs_p2",pulse3:"sw_svs_p3",pulse4:"sw_svs_p4",pulse5:"sw_svs_p5"},envelope:{attack:"fd_eg_a",sustain:"fd_eg_d",decay:"fd_eg_s",triggerSelect:"sw_eg_trigger",modeSelect:"sw_eg_mode"},pulser:{triggerSelect:"sw_p_trigger",modeSelect:"sw_p_mode",period:"fd_p_period",periodCV:"fd_p_cvs"},modOsc:{keyboard:"sw_mo_keyboard",waveshape:"sw_mo_waveshape",range:"sw_mo_range",modulationType:"sw_mo_mod",frequency:"fd_mo_freq",frequencyCV:"fd_mo_cvsFreq",modulation:"fd_mo_mod",modulationCV:"fd_mo_cvsMod"},complexOsc:{keyboard:"sw_co_keyboard",waveshape:"sw_co_timbre",polarity:"sw_co_polarity",pitch:"fd_co_pitch",pitchCV:"fd_co_cvsPitch",timbre:"fd_co_timbre",timbreCV:"fd_co_cvsTimbre",timbreKnob:"kn_co_timbre"},gates:{gate2Source:"sw_gate2Source",gate1Mode:"sw_gate1Mode",gate2Mode:"sw_gate2Mode",level1:"fd_dlpg_level1",level1CV:"fd_dlpg_cvsLevel1",level2:"fd_dlpg_level2",level2CV:"fd_dlpg_cvsLevel2"},random:{triggerSource:"sw_rv_trigger"}},oe={SequentialVoltageOutput:0,EnvelopeGeneratorOutput:1,PulserOutput:2,PulseOutput:3,PressureOutput:4,PitchOutput:5,RandomOutput:6,EnvelopeDetectorOutput:10,ModulationCVOutput:11,Panel1Output:12,Panel2Output:13,PulserPeriodInput:0,ModulationOscFrequencyInput:1,ModulationOscModulationInput:2,ComplexOscPitchInput:3,ComplexOscTimbreInput:4,ComplexOscWaveshapeInput:5,LoPassGate1Input:6,LoPassGate2Input:7,PanelInput:8,EnvelopeAttackInput:9,EnvelopeSustainInput:10,EnvelopeDecayInput:11};function ne(e,t){return te[e][t]}function ae(e){return ee.find((function(t){return t.name===e}))}function re(e,t){return ce(function(e,t){return ae(ne(e,t))}(e,t).template)}function ce(e){for(var t=e.split(" "),o=new Uint8Array(t.length),n=0;n<t.length;n++)"XX"!=t[n]&&(o[n]=parseInt(t[n],16));return o}function le(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=re(e,t);return o=Math.max(0,Math.min(2047,o)),a[a.length-2]=127&o,a[a.length-3]=o>>7&15,n&&(a[a.length-6]=1),a}function ie(e,t,o){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=re(e,t);switch(o){case"top":n=2;break;case"middle":n=1;break;case"bottom":n=0}return r[r.length-2]=n,a&&(r[r.length-6]=1),r}function se(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=ae("cv_connect"),a=ce(n.template),r=B[e];if(-1!==r.indexOf("Input")){var c=e;e=t,t=c}return a[29]=oe[B[e]],a[33]=oe[B[t]],o&&(a[25]=1),a}function ue(e,t){var o=ce(ae("cv_disconnect").template);if(-1!==B[e].indexOf("Input")){var n=e;e=t,t=n}return o[29]=oe[B[e]],o[33]=oe[B[t]],o}function de(e,t,o,n){var a=[];t&&a.push(ce(ae("ps_clearBuffer").template));var r=void 0!==n;F(e,(function(e,t,o,n,c){var l=ne(o,n);return l.startsWith("fd")||l.startsWith("kn")?a.push(le(o,n,c,r)):a.push(ie(o,n,c,r)),0}));var c,l=Object(u.a)(e.connections);try{for(l.s();!(c=l.n()).done;){var i=c.value;a.push(se(i.start.connectionPoint,i.end.connectionPoint,r))}}catch(s){l.e(s)}finally{l.f()}return o&&a.push(function(e){var t=ce(ae("ps_setName").template),o=new Uint8Array(t.length+e.length+3);o.set(t,0);for(var n=0;n<e.length;n++)o[t.length+n]=e.charCodeAt(n);return o[o.length-1]=247,o}(o)),r&&a.push(function(e){var t=ce(ae("ps_save").template);return t[t.length-2]=e,t}(n)),a}function fe(e,t){return pe[ne(e,t)]}var pe={sw_svs_trigger:"Sequencer Trigger Mode",sw_svs_stages:"Sequencer Stages",fd_svs_1:"Sequencer Stage 1",fd_svs_2:"Sequencer Stage 2",fd_svs_3:"Sequencer Stage 3",fd_svs_4:"Sequencer Stage 4",fd_svs_5:"Sequencer Stage 5",sw_svs_p1:"Sequqncer Pulse 1",sw_svs_p2:"Sequqncer Pulse 2",sw_svs_p3:"Sequencer Pulse 3",sw_svs_p4:"Sequencer Pulse 4",sw_svs_p5:"Sequencer Pulse 5",fd_eg_a:"Envelope Generator Attack",fd_eg_d:"Envelope Generator Decay",fd_eg_s:"Envelope Generator Sustain",sw_eg_trigger:"Envelope Trigger Mode",sw_eg_mode:"Envelope Generator Mode",sw_p_trigger:"Pulser Trigger Mode",sw_p_mode:"Pulser Mode",fd_p_period:"Pulser Period",fd_p_cvs:"Pulser Period CV",sw_mo_keyboard:"Mod Oscillator Key Tracking",sw_mo_waveshape:"Mod Oscillator Waveshape",sw_mo_range:"Mod Oscillator Range",sw_mo_mod:"Mod Oscillator Modulation Type",fd_mo_freq:"Mod Oscillator Frequency",fd_mo_cvsFreq:"Mod Oscillator Frequency CV",fd_mo_mod:"Mod Oscillator Modulation",fd_mo_cvsMod:"Mod Oscillator Moduplation CV",sw_co_keyboard:"Comp Oscillator Key Tracking",sw_co_timbre:"Comp Oscillator Waveshape Switch",sw_co_polarity:"Comp Oscillator Polarity",fd_co_pitch:"Comp Oscillator Pitch",fd_co_cvsPitch:"Comp Oscillator Pitch CV",fd_co_timbre:"Comp Oscillator Timbre",fd_co_cvsTimbre:"Comp Oscillator Timbre CV",kn_co_timbre:"Comp Oscillator Waveshape",sw_gate2Source:"Gate 2 Source",sw_gate1Mode:"Gate 1 Mode",sw_gate2Mode:"Gate 2 Mode",fd_dlpg_level1:"Gate 1 Level",fd_dlpg_cvsLevel1:"Gate 1 Level CV",fd_dlpg_level2:"Gate 2 Level",fd_dlpg_cvsLevel2:"Gate 2 Level CV",sw_rv_trigger:"Random Voltage Trigger Mode"},me={patch:{sequencer:{triggerSelect:"bottom",stages:"bottom",voltage1:0,voltage2:0,voltage3:0,voltage4:0,voltage5:0,pulse1:"top",pulse2:"top",pulse3:"top",pulse4:"top",pulse5:"top"},envelope:{attack:0,sustain:0,decay:0,triggerSelect:"bottom",modeSelect:"bottom"},pulser:{triggerSelect:"bottom",modeSelect:"bottom",period:0,periodCV:0},modOsc:{keyboard:"bottom",waveshape:"bottom",range:"bottom",modulationType:"bottom",frequency:0,frequencyCV:0,modulation:0,modulationCV:0},complexOsc:{keyboard:"bottom",waveshape:"bottom",polarity:"bottom",pitch:0,pitchCV:0,timbre:0,timbreCV:0,timbreKnob:0},gates:{gate2Source:"bottom",gate1Mode:"bottom",gate2Mode:"bottom",level1:0,level1CV:0,level2:0,level2CV:0},random:{triggerSource:"bottom"},connections:[]},name:"Untitled",dragPoints:[],midiSpeed:"medium"};var ve=function(e,t){var o=Date.now();return function(){Date.now()-o<t||(o=Date.now(),e.apply(void 0,arguments))}}((function(e,t,o){if(e)switch(t.type){case h:Se(e,le(t.module,t.param,t.value));break;case b:Se(e,ie(t.module,t.param,t.value));break;case O:Se(e,se(t.startPoint,t.endPoint));break;case g:var n,a=0,r=Object(u.a)(o.patch.connections);try{for(r.s();!(n=r.n()).done;){var c=n.value;(c.start.connectionPoint===t.startPoint&&c.end.connectionPoint===t.endPoint||c.end.connectionPoint===t.startPoint&&c.start.connectionPoint===t.endPoint)&&a++}}catch(l){r.e(l)}finally{r.f()}1===a&&Se(e,ue(t.startPoint,t.endPoint))}}),16);function he(e,t,o,n,a){var r,c=e.map((function(e){return Object(l.a)({},e)})),i=Object(u.a)(e);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s.connectionPoint===t&&s.id===o)return s.x=n,s.y=a,c}}catch(d){i.e(d)}finally{i.f()}return c.push({connectionPoint:t,id:o,x:n,y:a}),c}function be(e,t,o,n,a){var r={connectionPoint:t,id:o},c={connectionPoint:n,id:a};if(r.connectionPoint===c.connectionPoint){if(r.id>c.id){var l=r;r=c,c=l}}else if(r.connectionPoint>c.connectionPoint){var i=r;r=c,c=i}var s,d=[],f=Object(u.a)(e);try{for(f.s();!(s=f.n()).done;){var p=s.value;if(p.start.connectionPoint===r.connectionPoint&&p.start.id===r.id&&p.end.connectionPoint===c.connectionPoint&&p.end.id===c.id)return e;d[p.color]=!0}}catch(h){f.e(h)}finally{f.f()}for(var m=d.length,v=0;v<d.length;v++)if(!d[v]){m=v;break}return e.slice().concat([{start:r,end:c,color:m}])}function je(e,t,o,n,a){return e.filter((function(e){return(e.start.connectionPoint!==t||e.start.id!==o||e.end.connectionPoint!==n||e.end.id!==a)&&(e.start.connectionPoint!==n||e.start.id!==a||e.end.connectionPoint!==t||e.end.id!==o)}))}function Oe(e){return{type:e}}var ge,xe=Object(m.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(ve(e.midiOutput,t,e),t.type){case X:return Object(l.a)(Object(l.a)({},e),{},{saved:t.patch,name:t.patch.name,patch:L(t.patch.patch),patchEdited:!1});case y:return Object(l.a)(Object(l.a)({},e),{},{patch:t.patch});case h:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},Object(v.a)({},t.module,Object(l.a)(Object(l.a)({},e.patch[t.module]),{},Object(v.a)({},t.param,Math.min(Math.max(t.value,0),2047)))))});case b:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},Object(v.a)({},t.module,Object(l.a)(Object(l.a)({},e.patch[t.module]),{},Object(v.a)({},t.param,t.value))))});case j:return Object(l.a)(Object(l.a)({},e),{},{dragPoints:he(e.dragPoints,t.connectionPoint,t.id,t.x,t.y)});case O:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},{connections:be(e.patch.connections,t.startPoint,t.startId,t.endPoint,t.endId)})});case g:return Object(l.a)(Object(l.a)({},e),{},{patch:Object(l.a)(Object(l.a)({},e.patch),{},{connections:je(e.patch.connections,t.startPoint,t.startId,t.endPoint,t.endId)})});case x:return Object(l.a)(Object(l.a)({},e),{},{midiInput:t.name});case w:return Object(l.a)(Object(l.a)({},e),{},{midiOutput:t.name});case _:return Object(l.a)(Object(l.a)({},e),{},{name:R(t.name)});case S:return Object(l.a)(Object(l.a)({},e),{},{modal:Oe(t.modalType)});case M:return Object(l.a)(Object(l.a)({},e),{},{modal:void 0});case P:return Object(l.a)(Object(l.a)({},e),{},{midiSpeed:t.speed});case k:return Object(l.a)(Object(l.a)({},e),{},{patchEdited:t.edited})}return e}));function we(){return ye.apply(this,arguments)}function ye(){return(ye=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return ge||(ge=navigator.requestMIDIAccess({sysex:!0})),e.abrupt("return",ge);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(f.a)(s.a.mark((function e(){var t,o,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:t=e.sent,o=[],n=Object(u.a)(t.outputs);try{for(n.s();!(a=n.n()).done;)r=a.value,o.push([r[0],r[1].name])}catch(c){n.e(c)}finally{n.f()}return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(f.a)(s.a.mark((function e(){var t,o,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:t=e.sent,o=[],n=Object(u.a)(t.inputs);try{for(n.s();!(a=n.n()).done;)r=a.value,o.push([r[0],r[1].name])}catch(c){n.e(c)}finally{n.f()}return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e,t){return Me.apply(this,arguments)}function Me(){return(Me=Object(f.a)(s.a.mark((function e(t,o){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:n=e.sent,(a=n.outputs.get(t))&&a.send(o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return(Xe=Object(f.a)(s.a.mark((function e(t,o,n,a){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:if(r=e.sent,c=r.outputs.get(t)){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=0,l=setInterval((function(){if(null===a||void 0===a?void 0:a.isCancelled)return clearInterval(l),void e();if(r!==o.length){try{n&&n(r,o.length)}catch(i){}try{c.send(o[r])}catch(s){return clearInterval(l),void t(s)}r++}else{clearInterval(l);try{n&&n(r,o.length)}catch(u){}e()}}),Ce())})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){switch(xe.getState().midiSpeed){case"very-slow":return 200;case"slow":return 100;case"medium":return 50;case"fast":return 20}}var Ie=function(e){var t=e.x0,o=e.y0,n=e.x1,a=e.y1,r=e.colorIndex,c=e.onClick;if(t<n){var l=t;t=n,n=l,l=o,o=a,a=l}var i=G(t,o,n,a),s="M ".concat(t," ").concat(o," q ").concat((n-t)/2," ").concat(Math.min(Math.max(10,200-i/10),100)," ").concat(n-t," ").concat(a-o);return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("path",{className:"cable-bg",d:s,stroke:"var(--color-outline)",fill:"none",strokeWidth:12,strokeLinecap:"round",onClick:c}),Object(Y.jsx)("path",{d:s,stroke:"var(--color-cable-".concat(r%9,")"),fill:"none",strokeWidth:10,strokeLinecap:"round",onClick:c})]})},Ee=2047,Ne=220,De=15;var qe={dispatchUpdateFader:C},Ae=Object(p.b)((function(e,t){var o;return e?Object(l.a)(Object(l.a)({},t),{},{value:null===(o=e.patch[t.module])||void 0===o?void 0:o[t.fader]}):{}}),qe)((function(e){var t=e.color,o=e.left,n=e.top,a=e.label,r=e.value,c=e.module,l=e.fader,i=e.dispatchUpdateFader,s=(1-r/Ee)*Ne;return Object(Y.jsxs)("g",{transform:"translate(".concat(o,", ").concat(n,")"),ref:function(e){if(e&&window.PointerEvent){var t=void 0,o=function(o){t&&cancelAnimationFrame(t),t=requestAnimationFrame((function(){t=void 0,function(t){if(t.buttons){var o=e.getBoundingClientRect(),n=U(e.ownerSVGElement,t.clientX,t.clientY),a=U(e.ownerSVGElement,o.left,o.top);i(c,l,(1-(n.y-a.y)/Ne)*Ee|0)}}(o)}))};e.addEventListener("pointerdown",o),e.addEventListener("pointermove",o)}},onKeyDown:function(e){"ArrowUp"===e.key||"ArrowRight"===e.key||"PageUp"===e.key?(i(c,l,Math.min(r+100,Ee)),e.preventDefault(),e.stopPropagation()):"ArrowDown"===e.key||"ArrowLeft"===e.key||"PageDown"===e.key?(i(c,l,Math.max(r-100,0)),e.preventDefault(),e.stopPropagation()):"End"===e.key?(i(c,l,Ee),e.preventDefault(),e.stopPropagation()):"Home"===e.key&&(i(c,l,0),e.preventDefault(),e.stopPropagation())},tabIndex:0,role:"slider","aria-valuemin":0,"aria-valuemax":Ee,"aria-valuenow":r,"aria-label":fe(c,l),"aria-orientation":"vertical",children:[Object(Y.jsx)("rect",{className:"easel-fader-bg",fill:t,height:Ne,width:5,x:5,y:0,fillOpacity:"0.6",rx:2.5,stroke:"var(--color-outline)"}),Object(Y.jsx)("rect",{className:"easel-fader-bg filled",fill:t,height:Ne-s,width:5,x:5,y:s,rx:2.5,stroke:"var(--color-outline)"}),Object(Y.jsx)("circle",{className:"easel-fader-handle",fill:t,r:12,cx:7.5,cy:s,stroke:"var(--color-outline)"}),Object(Y.jsx)("rect",{width:De,height:Ne,x:"0",y:"0",opacity:"0"}),a&&Object(Y.jsx)(J,{text:a,x:7.5,y:270,anchor:"middle"})]})})),Te=2047,Ve=25;var Le={dispatchUpdateFader:C},Fe=Object(p.b)((function(e,t){var o;return e?Object(l.a)(Object(l.a)({},t),{},{value:null===(o=e.patch[t.module])||void 0===o?void 0:o[t.fader]}):{}}),Le)((function(e){var t=e.color,o=e.x,n=e.y,a=e.value,r=e.module,c=e.fader,l=e.dispatchUpdateFader,i=135*Math.PI/180,s=405*Math.PI/180,u=i+a/Te*(s-i),d=u-i<Math.PI?"0":"1";return Object(Y.jsxs)("g",{className:"easel-knob",transform:"translate(".concat(o,", ").concat(n,")"),ref:function(e){if(e&&window.PointerEvent){var t=void 0,o=function(o){t&&cancelAnimationFrame(t),t=requestAnimationFrame((function(){t=void 0,function(t){if(t.buttons){var o=e.getBoundingClientRect(),n=U(e.ownerSVGElement,t.clientX,t.clientY),a=U(e.ownerSVGElement,o.left+o.width/2,o.top+o.height/2),u=Math.atan2(n.y-a.y,n.x-a.x);u<i?u+=2*Math.PI:u>s&&(u-=2*Math.PI),u<i||u>s||l(r,c,Math.min(Te,0|Math.max(0,(u-i)/(s-i)*Te)))}}(o)}))};e.addEventListener("pointerdown",o),e.addEventListener("pointermove",o)}},tabIndex:0,role:"slider","aria-valuemin":0,"aria-valuemax":Te,"aria-valuenow":a,"aria-label":fe(r,c),onKeyDown:function(e){"ArrowUp"===e.key||"ArrowRight"===e.key||"PageUp"===e.key?(l(r,c,Math.min(a+100,Te)),e.preventDefault(),e.stopPropagation()):"ArrowDown"===e.key||"ArrowLeft"===e.key||"PageDown"===e.key?(l(r,c,Math.max(a-100,0)),e.preventDefault(),e.stopPropagation()):"End"===e.key?(l(r,c,Te),e.preventDefault(),e.stopPropagation()):"Home"===e.key&&(l(r,c,0),e.preventDefault(),e.stopPropagation())},children:[Object(Y.jsx)("path",{className:"knob-bg-outline",d:"M ".concat(Math.cos(i)*Ve," ").concat(Math.sin(i)*Ve," A ").concat(Ve," ").concat(Ve," 0 1 1 ").concat(Math.cos(s)*Ve," ").concat(Math.sin(s)*Ve),stroke:"var(--color-outline)",fill:"none",strokeLinecap:"round",strokeWidth:20}),Object(Y.jsx)("path",{className:"knob-bg",d:"M ".concat(Math.cos(i)*Ve," ").concat(Math.sin(i)*Ve," A ").concat(Ve," ").concat(Ve," 0 1 1 ").concat(Math.cos(s)*Ve," ").concat(Math.sin(s)*Ve),stroke:"var(--color-switch-bg)",fill:"none",strokeLinecap:"round",strokeWidth:18}),Object(Y.jsx)("path",{className:"knob-fg-outline",d:"M ".concat(Math.cos(i)*Ve," ").concat(Math.sin(i)*Ve," A ").concat(Ve," ").concat(Ve," 0 ").concat(d," 1 ").concat(Math.cos(u)*Ve," ").concat(Math.sin(u)*Ve),stroke:"var(--color-outline)",fill:"none",strokeLinecap:"round",strokeWidth:16}),Object(Y.jsx)("path",{className:"knob-fg",d:"M ".concat(Math.cos(i)*Ve," ").concat(Math.sin(i)*Ve," A ").concat(Ve," ").concat(Ve," 0 ").concat(d," 1 ").concat(Math.cos(u)*Ve," ").concat(Math.sin(u)*Ve),stroke:t,fill:"none",strokeLinecap:"round",strokeWidth:14}),Object(Y.jsx)("rect",{width:50,height:50,x:-25,y:-25,opacity:"0"})]})})),Ue=function(e){var t=e.width,o=e.height,n=e.left,a=e.top,r=e.label,c=e.fill,l=e.children;return Object(Y.jsxs)("g",{className:"section",transform:"translate(".concat(n,", ").concat(a,")"),children:[Object(Y.jsx)("rect",{x:0,y:0,width:t,height:o,strokeWidth:1,fill:c||"none",stroke:"var(--color-outline)"}),l,r&&Object(Y.jsx)(J,{x:t/2,y:o-10,text:r,anchor:"middle"})]})},Ge=20;var Re={dispatchUpdateSwitch:I},We=Object(p.b)((function(e,t){var o;return e?Object(l.a)(Object(l.a)({},t),{},{value:null===(o=e.patch[t.module])||void 0===o?void 0:o[t.param]}):{}}),Re)((function(e){var t=e.color,o=e.left,n=e.top,a=e.value,r=e.topOption,c=e.middleOption,l=e.bottomOption,i=e.module,s=e.param,u=e.twoWay,d=(e.onChange,e.dispatchUpdateSwitch),f=10;"middle"===a?f=25:"bottom"===a&&(f=40);var p=function(e){switch(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),a){case"bottom":return d(i,s,"top");case"middle":return d(i,s,"bottom");case"top":return d(i,s,u?"bottom":"middle")}};return Object(Y.jsxs)("g",{className:"easel-toggle",transform:"translate(".concat(o,", ").concat(n,")"),onClick:p,onKeyDown:function(e){var t="number"==typeof e.which?e.which:e.keyCode;13!==t&&32!==t||(e.preventDefault(),p())},tabIndex:0,children:[Object(Y.jsx)("rect",{className:"easel-toggle-bg",fill:"var(--color-switch-bg)",height:50,width:Ge,rx:10,stroke:"var(--color-outline)",x:0,y:0}),Object(Y.jsx)("circle",{cx:10,cy:f,r:7.5,fill:t,stroke:"var(--color-outline)"}),r&&Object(Y.jsx)(J,{x:35,y:10,text:r,alignment:"middle"}),c&&Object(Y.jsx)(J,{x:35,y:25,text:c,alignment:"middle"}),l&&Object(Y.jsx)(J,{x:35,y:40,text:l,alignment:"middle"})]})}));var He,Ke,Be={dispatchUpdateFader:C,dispatchUpdateSwitch:I},ze=Object(p.b)((function(e,t){return e?Object(l.a)({},e.patch.complexOsc):{}}),Be)((function(e){var t=e.pitch,o=e.pitchCV,n=e.polarity,a=e.keyboard,r=e.timbre,c=e.timbreCV,l=e.timbreKnob,i=e.waveshape;return Object(Y.jsxs)(Ue,{left:970,top:120,width:305,height:500,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:305,height:30,label:"COMPLEX OSCILLATOR"}),Object(Y.jsx)(Ue,{left:0,top:30,width:175,height:85,label:"keyboard",children:Object(Y.jsx)(We,{color:"var(--color-complex-oscillator)",top:5,left:32,topOption:"on",bottomOption:"off",value:a,twoWay:!0,module:"complexOsc",param:"keyboard"})}),Object(Y.jsx)(Ue,{left:0,top:115,width:175,height:85,label:"polarity",children:Object(Y.jsx)(We,{color:"var(--color-complex-oscillator)",top:5,left:32,topOption:"-",bottomOption:"+",value:n,twoWay:!0,module:"complexOsc",param:"polarity"})}),Object(Y.jsxs)(Ue,{left:175,top:30,width:130,height:170,label:"timbre",children:[Object(Y.jsx)(Fe,{x:65,y:45,value:l,color:"var(--color-complex-oscillator)",module:"complexOsc",fader:"timbreKnob"}),Object(Y.jsx)(We,{color:"var(--color-complex-oscillator)",top:90,left:20,value:i,module:"complexOsc",param:"waveshape"}),Object(Y.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 95 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10"}),Object(Y.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 110 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10"}),Object(Y.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 125 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10"})]}),Object(Y.jsxs)(Ue,{left:0,top:200,width:305,height:300,children:[Object(Y.jsx)(Ae,{left:30,top:20,value:o,color:"var(--color-complex-oscillator)",module:"complexOsc",fader:"pitchCV"}),Object(Y.jsx)(Ae,{left:105,top:20,value:t,color:"var(--color-complex-oscillator)",label:"pitch",module:"complexOsc",fader:"pitch"}),Object(Y.jsx)(Ae,{left:180,top:20,value:c,color:"var(--color-complex-oscillator)",module:"complexOsc",fader:"timbreCV"}),Object(Y.jsx)(Ae,{left:255,top:20,value:r,color:"var(--color-complex-oscillator)",label:"timbre",module:"complexOsc",fader:"timbre"})]})]})})),Ye=function(e){return Object(Y.jsxs)(Ue,{left:1275,top:120,width:300,height:500,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:300,height:30,label:"DUAL LO PASS GATE"}),Object(Y.jsx)(Ue,{left:0,top:30,width:300,height:85,label:"gate 2 source",children:Object(Y.jsx)(We,{color:"var(--color-dual-lo-pass-gate)",top:5,left:85,topOption:"aux in",middleOption:"mod oscillator",bottomOption:"gate 1",module:"gates",param:"gate2Source"})}),Object(Y.jsxs)(Ue,{left:0,top:115,width:300,height:85,label:"mode select",children:[Object(Y.jsx)(We,{color:"var(--color-dual-lo-pass-gate)",top:5,left:35,label:"gate 1",module:"gates",param:"gate1Mode"}),Object(Y.jsx)(We,{color:"var(--color-dual-lo-pass-gate)",top:5,left:245,label:"gate 2",module:"gates",param:"gate2Mode"}),Object(Y.jsx)(J,{x:150,y:15,text:"lopass filter",anchor:"middle",alignment:"middle"}),Object(Y.jsx)(J,{x:150,y:30,text:"combination",anchor:"middle",alignment:"middle"}),Object(Y.jsx)(J,{x:150,y:45,text:"voltage controlled amp",anchor:"middle",alignment:"middle"})]}),Object(Y.jsxs)(Ue,{left:0,top:200,width:300,height:300,children:[Object(Y.jsx)(Ae,{left:30,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",module:"gates",fader:"level1CV"}),Object(Y.jsx)(Ae,{left:105,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",label:"gate 1",module:"gates",fader:"level1"}),Object(Y.jsx)(Ae,{left:180,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",module:"gates",fader:"level2CV"}),Object(Y.jsx)(Ae,{left:255,top:20,value:0,color:"var(--color-dual-lo-pass-gate)",label:"gate 2",module:"gates",fader:"level2"})]})]})},Je=function(e){return Object(Y.jsxs)(Ue,{left:315,top:120,width:200,height:500,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:200,height:30,label:"ENVELOPE GENERATOR"}),Object(Y.jsx)(Ue,{left:0,top:30,width:200,height:85,label:"trigger select",children:Object(Y.jsx)(We,{color:"var(--color-envelope-generator)",top:5,left:35,topOption:"keyboard",middleOption:"pulser",bottomOption:"sequencer",module:"envelope",param:"triggerSelect"})}),Object(Y.jsx)(Ue,{left:0,top:115,width:200,height:85,label:"mode select",children:Object(Y.jsx)(We,{color:"var(--color-envelope-generator)",top:5,left:35,topOption:"sustained",middleOption:"transient",bottomOption:"self",module:"envelope",param:"modeSelect"})}),Object(Y.jsxs)(Ue,{left:0,top:200,width:200,height:300,children:[Object(Y.jsx)(Ae,{left:25,top:20,value:0,color:"var(--color-envelope-generator)",label:"attack",module:"envelope",fader:"attack"}),Object(Y.jsx)(Ae,{left:90,top:20,value:0,color:"var(--color-envelope-generator)",label:"sustain",module:"envelope",fader:"sustain"}),Object(Y.jsx)(Ae,{left:155,top:20,value:0,color:"var(--color-envelope-generator)",label:"decay",module:"envelope",fader:"decay"})]})]})},Ze=function(e){return Object(Y.jsxs)(Ue,{left:665,top:120,width:305,height:500,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:305,height:30,label:"MODULATION OSCILLATOR"}),Object(Y.jsx)(Ue,{left:0,top:30,width:175,height:85,label:"keyboard",children:Object(Y.jsx)(We,{color:"var(--color-modulation-oscillator)",top:5,left:32,topOption:"on",bottomOption:"off",value:"top",twoWay:!0,module:"modOsc",param:"keyboard"})}),Object(Y.jsxs)(Ue,{left:175,top:30,width:130,height:85,label:"waveshape",children:[Object(Y.jsx)(We,{color:"var(--color-modulation-oscillator)",top:5,left:20,value:"top",module:"modOsc",param:"waveshape"}),Object(Y.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 10 m 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10 l 20 -10 l 0 10"}),Object(Y.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 25 m 0 10 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10 l 10 0 l 0 10 l 10 0 l 0 -10"}),Object(Y.jsx)("path",{className:"wave-path",stroke:"var(--color-outline)",strokeWidth:"1",fill:"none",d:"m 55 40 m 0 10 l 10 -10 l 10 10 l 10 -10 l 10 10 l 10 -10 l 10 10"})]}),Object(Y.jsx)(Ue,{left:0,top:115,width:175,height:85,label:"range",children:Object(Y.jsx)(We,{color:"var(--color-modulation-oscillator)",top:5,left:32,topOption:"high",bottomOption:"low",value:"top",twoWay:!0,module:"modOsc",param:"range"})}),Object(Y.jsx)(Ue,{left:175,top:115,width:130,height:85,label:"modulation",children:Object(Y.jsx)(We,{color:"var(--color-modulation-oscillator)",top:5,left:20,topOption:"bal. ext",middleOption:"a.m. osc.",bottomOption:"f.m. osc.",value:"top",module:"modOsc",param:"modulationType"})}),Object(Y.jsxs)(Ue,{left:0,top:200,width:305,height:300,children:[Object(Y.jsx)(Ae,{left:30,top:20,value:0,color:"var(--color-modulation-oscillator)",module:"modOsc",fader:"frequencyCV"}),Object(Y.jsx)(Ae,{left:105,top:20,value:0,color:"var(--color-modulation-oscillator)",label:"frequency",module:"modOsc",fader:"frequency"}),Object(Y.jsx)(Ae,{left:180,top:20,value:0,color:"var(--color-modulation-oscillator)",module:"modOsc",fader:"modulationCV"}),Object(Y.jsx)(Ae,{left:255,top:20,value:0,color:"var(--color-modulation-oscillator)",label:"modulation",module:"modOsc",fader:"modulation"})]})]})},Qe=function(e){return Object(Y.jsxs)(Ue,{left:0,top:620,width:1575,height:120,children:[Object(Y.jsxs)(Ue,{left:0,top:0,width:180,height:120,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:180,height:30,label:"KEYBOARD OUTPUT"}),Object(Y.jsx)($,{x:30,y:65,color:"var(--color-keyboard-pulse)",connectionPoint:B.PulseOutput,text:"pulse"}),Object(Y.jsx)($,{x:90,y:65,color:"var(--color-keyboard-pressure)",connectionPoint:B.PressureOutput,id:0,text:"pressure"}),Object(Y.jsx)($,{x:150,y:65,color:"var(--color-keyboard-pitch)",connectionPoint:B.PitchOutput,text:"pitch"})]}),Object(Y.jsxs)(Ue,{left:180,top:0,width:135,height:120,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:135,height:30,label:"RANDOM VOLTAGE"}),Object(Y.jsx)(Ue,{left:0,top:30,width:135,height:90,label:"trigger source",children:Object(Y.jsx)(We,{color:"var(--color-random-voltage)",top:5,left:23,topOption:"keyboard",middleOption:"pulser",bottomOption:"sequencer",value:"top",module:"random",param:"triggerSource"})})]}),Object(Y.jsxs)(Ue,{left:315,top:0,width:1260,height:120,children:[Object(Y.jsx)($,{x:32,y:30,color:"var(--color-input)",connectionPoint:B.EnvelopeAttackInput,arrow:"short",id:0}),Object(Y.jsx)($,{x:32,y:90,color:"var(--color-sequencer)",connectionPoint:B.SequentialVoltageOutput,id:0}),Object(Y.jsx)($,{x:97,y:60,color:"var(--color-input)",arrow:"medium",connectionPoint:B.EnvelopeSustainInput,id:0}),Object(Y.jsx)($,{x:163,y:30,color:"var(--color-input)",arrow:"short",connectionPoint:B.EnvelopeDecayInput,id:0}),Object(Y.jsx)($,{x:163,y:90,color:"var(--color-random-voltage)",connectionPoint:B.RandomOutput,id:0}),Object(Y.jsx)($,{x:239,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:B.PulserPeriodInput,id:0}),Object(Y.jsx)($,{x:313,y:30,color:"var(--color-envelope-generator)",connectionPoint:B.EnvelopeGeneratorOutput,id:0}),Object(Y.jsx)($,{x:313,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:B.PressureOutput,id:1}),Object(Y.jsx)($,{x:388,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:B.ModulationOscFrequencyInput}),Object(Y.jsx)($,{x:463,y:30,color:"var(--color-pulser)",connectionPoint:B.PulserOutput,id:1}),Object(Y.jsx)($,{x:463,y:90,color:"var(--color-random-voltage)",connectionPoint:B.RandomOutput,id:1}),Object(Y.jsx)($,{x:538,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:B.ModulationOscModulationInput}),Object(Y.jsx)($,{x:613,y:30,color:"var(--color-sequencer)",connectionPoint:B.SequentialVoltageOutput,id:1}),Object(Y.jsx)($,{x:613,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:B.PressureOutput,id:2}),Object(Y.jsx)($,{x:693,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:B.ComplexOscPitchInput}),Object(Y.jsx)($,{x:768,y:30,color:"var(--color-envelope-generator)",connectionPoint:B.EnvelopeGeneratorOutput,id:1}),Object(Y.jsx)($,{x:768,y:90,color:"var(--color-random-voltage)",connectionPoint:B.RandomOutput,id:2}),Object(Y.jsx)($,{x:843,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:B.ComplexOscTimbreInput}),Object(Y.jsx)($,{x:918,y:30,color:"var(--color-pulser)",connectionPoint:B.PulserOutput,id:2}),Object(Y.jsx)($,{x:918,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:B.PressureOutput,id:3}),Object(Y.jsx)($,{x:998,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:B.LoPassGate1Input}),Object(Y.jsx)($,{x:1073,y:30,color:"var(--color-envelope-generator)",connectionPoint:B.EnvelopeGeneratorOutput,id:2}),Object(Y.jsx)($,{x:1073,y:90,color:"var(--color-random-voltage)",connectionPoint:B.RandomOutput,id:3}),Object(Y.jsx)($,{x:1148,y:60,color:"var(--color-input)",arrow:"long",connectionPoint:B.LoPassGate2Input}),Object(Y.jsx)($,{x:1223,y:30,color:"var(--color-pulser)",connectionPoint:B.PulserOutput,id:3}),Object(Y.jsx)($,{x:1223,y:90,color:"var(--color-keyboard-pressure)",connectionPoint:B.PressureOutput,id:4})]})]})},$e=function(e){return Object(Y.jsxs)(Ue,{left:515,top:120,width:150,height:500,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:150,height:30,label:"PULSER"}),Object(Y.jsx)(Ue,{left:0,top:30,width:150,height:85,label:"trigger select",children:Object(Y.jsx)(We,{color:"var(--color-pulser)",top:5,left:32,topOption:"keyboard",middleOption:"self",bottomOption:"sequencer",value:"top",module:"pulser",param:"triggerSelect"})}),Object(Y.jsx)(Ue,{left:0,top:115,width:150,height:85,label:"mode",children:Object(Y.jsx)(We,{color:"var(--color-pulser)",top:5,left:32,topOption:"triggered",middleOption:"off",bottomOption:"once",value:"top",module:"pulser",param:"modeSelect"})}),Object(Y.jsxs)(Ue,{left:0,top:200,width:150,height:300,children:[Object(Y.jsx)(Ae,{left:30,top:20,value:0,color:"var(--color-pulser)",module:"pulser",fader:"periodCV"}),Object(Y.jsx)(Ae,{left:105,top:20,value:0,color:"var(--color-pulser)",label:"period",module:"pulser",fader:"period"})]})]})},et=function(e){return Object(Y.jsxs)(Ue,{left:0,top:120,width:315,height:500,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:315,height:30,label:"SEQUENTIAL VOLTAGE SOURCE"}),Object(Y.jsx)(Ue,{left:0,top:30,width:175,height:85,label:"trigger select",children:Object(Y.jsx)(We,{color:"var(--color-sequencer)",top:5,left:35,topOption:"keyboard",middleOption:"pulser",bottomOption:"off",value:"top",module:"sequencer",param:"triggerSelect"})}),Object(Y.jsx)(Ue,{left:175,top:30,width:140,height:85,label:"stages",children:Object(Y.jsx)(We,{color:"var(--color-sequencer)",top:5,left:40,topOption:"3",middleOption:"4",bottomOption:"5",value:"top",module:"sequencer",param:"stages"})}),Object(Y.jsxs)(Ue,{left:0,top:115,width:315,height:85,label:"pulse sequence",children:[Object(Y.jsx)(J,{x:25,y:20,text:"1"}),Object(Y.jsx)(J,{x:80,y:20,text:"2"}),Object(Y.jsx)(J,{x:135,y:20,text:"3"}),Object(Y.jsx)(J,{x:190,y:20,text:"4"}),Object(Y.jsx)(J,{x:245,y:20,text:"5"}),Object(Y.jsx)(We,{color:"var(--color-sequencer)",top:5,left:42,value:"top",twoWay:!0,module:"sequencer",param:"pulse1"}),Object(Y.jsx)(We,{color:"var(--color-sequencer)",top:5,left:97,value:"top",twoWay:!0,module:"sequencer",param:"pulse2"}),Object(Y.jsx)(We,{color:"var(--color-sequencer)",top:5,left:152,value:"top",twoWay:!0,module:"sequencer",param:"pulse3"}),Object(Y.jsx)(We,{color:"var(--color-sequencer)",top:5,left:207,value:"top",twoWay:!0,module:"sequencer",param:"pulse4"}),Object(Y.jsx)(We,{color:"var(--color-sequencer)",top:5,left:262,value:"top",twoWay:!0,module:"sequencer",param:"pulse5"})]}),Object(Y.jsxs)(Ue,{left:0,top:200,width:315,height:300,label:"sequencer voltage levels",children:[Object(Y.jsx)(Ae,{left:52,top:20,value:800,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage1"}),Object(Y.jsx)(Ae,{left:107,top:20,value:1500,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage2"}),Object(Y.jsx)(Ae,{left:162,top:20,value:2500,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage3"}),Object(Y.jsx)(Ae,{left:217,top:20,value:0,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage4"}),Object(Y.jsx)(Ae,{left:272,top:20,value:0,color:"var(--color-sequencer)",module:"sequencer",fader:"voltage5"})]})]})},tt="PATCH_DB";function ot(){return nt.apply(this,arguments)}function nt(){return(nt=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!He){e.next=2;break}return e.abrupt("return",He);case 2:return Ke||(Ke=new Promise((function(e,t){var o=indexedDB.open(tt,2);o.onerror=function(e){t()},o.onupgradeneeded=function(e){var t=o.result.createObjectStore("patches",{autoIncrement:!0,keyPath:"id"});t.createIndex("name","name",{unique:!1}),t.createIndex("patch","patch",{unique:!1}),t.createIndex("preview","preview",{unique:!1}),t.createIndex("createdTime","createdTime",{unique:!1}),t.createIndex("lastSavedTime","lastSavedTime",{unique:!1})},o.onsuccess=function(t){He=o.result,e(He)}}))),e.abrupt("return",Ke);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(f.a)(s.a.mark((function e(t){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot();case 2:return o=e.sent,e.abrupt("return",new Promise((function(e,n){var a=o.transaction(["patches"],"readwrite").objectStore("patches").add(t);a.onerror=function(e){n()},a.onsuccess=function(o){e(Object(l.a)(Object(l.a)({},t),{},{id:a.result}))}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(f.a)(s.a.mark((function e(t){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot();case 2:return o=e.sent,e.abrupt("return",new Promise((function(e,n){var a=o.transaction(["patches"],"readwrite").objectStore("patches"),r=Object(l.a)(Object(l.a)({},t),{},{lastSavedTime:Date.now()}),c=a.put(r);c.onerror=function(e){n()},c.onsuccess=function(t){e(Object(l.a)(Object(l.a)({},r),{},{id:c.result}))}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return st.apply(this,arguments)}function st(){return(st=Object(f.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot();case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,o){var n=t.transaction(["patches"],"readwrite").objectStore("patches").openCursor(),a=[];n.onerror=function(e){o()},n.onsuccess=function(t){var o=n.result;o?(a.push(o.value),o.continue()):e(a)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t,o){return dt.apply(this,arguments)}function dt(){return(dt=Object(f.a)(s.a.mark((function e(t,o,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t,patch:V(o),preview:n,createdTime:Date.now(),lastSavedTime:Date.now()},e.next=3,at(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(f.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(){return(mt=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o(33);var vt=function(e){var t=e.children,o=e.left,n=e.top,a=e.title,r=e.onClick;return Object(Y.jsxs)("g",{transform:"translate(".concat(o," ").concat(n,")"),className:"icon-button","aria-label":a,onClick:r,onKeyDown:function(e){"Enter"===e.key&&(r(),e.preventDefault(),e.stopPropagation())},tabIndex:0,role:"button",children:[Object(Y.jsx)("rect",{stroke:"var(--color-outline)",width:60,height:60,fill:"var(--color-background)"}),Object(Y.jsx)("g",{transform:"translate(".concat(5," ",5,")"),children:t})]})},ht=function(){return Object(Y.jsx)("path",{d:"M 20 2.5 h 10 v 25 h 10 l -15 15 l -15 -15 h 10 v -25 z M 2.5 45 h 45 v 2.5 h -45 z",stroke:"var(--color-outline)",fill:"var(--color-background)"})},bt=function(){return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("path",{d:"M 5 7.5 a 2.5 2.5 1 0 0 -2.5 2.5 v 35 a 2.5 2.5 1 0 0 2.5 2.5 h 37.5 a 2.5 2.5 1 0 0 2.5 -2.5 v -30 a 2.5 2.5 1 0 0 -2.5 -2.5 h -20 a 2.5 2.5 1 0 1 -2.5 -2.5 a 2.5 2.5 1 0 0 -2.5 -2.5 z",stroke:"var(--color-outline)",fill:"var(--color-background)"}),Object(Y.jsx)("path",{d:"M 10 10 a 2.5 2.5 1 0 0 -2.5 2.5 l -5 32.5 a 2.5 2.5 1 0 0 2.5 2.5 h 37.5 a 2.5 2.5 1 0 0 2.5 -2.5 l 5 -27.5 a 2.5 2.5 1 0 0 -2.5 -2.5 h -20 a 2.5 2.5 1 0 1 -2.5 -2.5 a 2.5 2.5 1 0 0 -2.5 -2.5 z",stroke:"var(--color-outline)",fill:"var(--color-background)"})]})},jt=function(){return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"25",cy:"25",r:"22.5"}),Object(Y.jsx)("path",{fill:"var(--color-background)",stroke:"var(--color-outline)",d:"M 20 5 a 20.5 20.5 1 1 0 10 0 v 2.5 h -10 z"}),Object(Y.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"37.5",cy:"25",r:"2.5"}),Object(Y.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"33.83",cy:"33.83",r:"2.5"}),Object(Y.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"25",cy:"37.5",r:"2.5"}),Object(Y.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"16.16",cy:"33.83",r:"2.5"}),Object(Y.jsx)("circle",{fill:"var(--color-background)",stroke:"var(--color-outline)",cx:"12.5",cy:"25",r:"2.5"})]})},Ot=function(){return Object(Y.jsx)("path",{d:"M 7.5 2.5 a 5 5 1 0 0 -5 5 v 35 a 5 5 1 0 0 5 5 h 35 a 5 5 1 0 0 5 -5  v -32.5 l -7.5 -7.5 h -32.5 M 10 47.5 v -17.5 a 2.5 2.5 1 0 1 2.5 -2.5 h 25 a 2.5 2.5 1 0 1 2.5 2.5 v 17.5 M 12.5 2.5 v 15 h 25 v -15 M 35 5 v 10 h -7.5 v -10 h 7.75 M 12.5 30 h 25 v 2.5 h -25 v -2.75 M 12.5 35 h 25 v 2.5 h -25 v -2.75 M 12.5 40 h 25 v 2.5 h -25 v -2.75",stroke:"var(--color-outline)",fill:"var(--color-background)"})},gt=(o(34),function(e){var t=e.value,o=e.left,a=e.top,r=e.onChange,c=e.width,l=e.height,i=n.useState(),s=Object(d.a)(i,2),u=s[0],f=s[1];return Object(Y.jsxs)("g",{transform:"translate(".concat(o," ").concat(a,")"),className:"title-input",children:[Object(Y.jsx)("rect",{width:c,height:l,fill:"none",stroke:"var(--color-outline)"}),Object(Y.jsx)("foreignObject",{width:c,height:l,children:Object(Y.jsx)("input",{type:"text",value:void 0==u?t:u,onChange:function(e){f(e.currentTarget.value)},onBlur:function(e){u&&r(u),f(void 0)},onKeyDown:function(e){"Enter"===e.key&&e.currentTarget.blur()}})})]})});var xt={dispatchSetPatchName:function(e){return{type:_,name:e}},dispatchShowModal:function(e){return{modalType:e,type:S}},dispatchOpenSavedPatch:D},wt=Object(p.b)((function(e,t){if(!e)return{};var o=!e.saved;return e.saved&&(o=e.patchEdited||e.saved.name!==e.name),Object(l.a)(Object(l.a)({},t),{},{patchName:e.name,saved:e.saved,patch:e.patch,patchNotSaved:o})}),xt)((function(e){var t,o=e.patchName,n=e.saved,a=e.patch,r=e.patchNotSaved,c=e.dispatchSetPatchName,i=e.dispatchShowModal,u=e.dispatchOpenSavedPatch,d=function(){var e=Object(f.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,ft(Object(l.a)(Object(l.a)({},n),{},{patch:V(a),preview:K(t),name:o}));case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,ut(o,a,K(t));case 8:r=e.sent;case 9:u(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsxs)(Ue,{left:0,top:0,width:1575,height:120,children:[Object(Y.jsx)("g",{ref:function(e){e&&(t=e.ownerSVGElement)}}),Object(Y.jsxs)(Ue,{left:0,top:0,width:840,height:120,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:840,height:30,label:"EASEL PROGRAM MANAGER"}),Object(Y.jsx)(vt,{left:15,top:45,title:"Saved Patches",onClick:function(){return i("file")},children:Object(Y.jsx)(bt,{})}),Object(Y.jsx)(vt,{left:90,top:45,title:"Save Patch",onClick:d,children:Object(Y.jsx)(Ot,{})}),Object(Y.jsx)(vt,{left:165,top:45,title:"Send patch to easel",onClick:function(){return i("download")},children:Object(Y.jsx)(ht,{})}),Object(Y.jsx)(vt,{left:240,top:45,title:"Midi Config",onClick:function(){return i("midi")},children:Object(Y.jsx)(jt,{})}),Object(Y.jsx)(gt,{left:315,top:45,height:60,width:410,onChange:c,value:o}),Object(Y.jsx)($,{x:785,y:65,color:"var(--color-modulation-oscillator)",connectionPoint:B.ModulationCVOutput,text:"mod cv out"})]}),Object(Y.jsxs)(Ue,{left:840,top:0,width:305,height:120,children:["-",Object(Y.jsx)(Ue,{left:0,top:0,width:305,height:30,label:"EXTERNAL CV"}),Object(Y.jsx)($,{x:55,y:65,color:"var(--color-input)",connectionPoint:B.PanelInput,text:"to panel"}),Object(Y.jsx)($,{x:152.5,y:65,color:"var(--color-keyboard-pressure)",connectionPoint:B.Panel1Output,id:0,text:"from panel 1"}),Object(Y.jsx)($,{x:250,y:65,color:"var(--color-keyboard-pressure)",connectionPoint:B.Panel2Output,text:"from panel 2"})]}),Object(Y.jsxs)(Ue,{left:1145,top:0,width:130,height:120,children:["-",Object(Y.jsx)(Ue,{left:0,top:0,width:130,height:30,label:"COMP OSC"}),Object(Y.jsx)($,{x:65,y:65,color:"var(--color-input)",connectionPoint:B.ComplexOscWaveshapeInput,text:"waveshape"})]}),Object(Y.jsxs)(Ue,{left:1275,top:0,width:300,height:120,children:[Object(Y.jsx)(Ue,{left:0,top:0,width:300,height:30,label:"PRE AMP / ENVELOPE DETECTOR"}),r&&Object(Y.jsxs)("g",{transform:"translate(15, 45)",children:[Object(Y.jsx)(J,{className:"big",x:90,y:28,text:"Patch not",anchor:"middle"}),Object(Y.jsx)(J,{className:"big",x:90,y:50,text:"saved!",anchor:"middle"})]}),Object(Y.jsx)($,{x:250,y:65,color:"var(--color-sequencer)",connectionPoint:B.EnvelopeDetectorOutput,text:"env det out"})]})]})}));function yt(){return(yt=Object(f.a)(s.a.mark((function e(t){var o,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e();case 2:o=e.sent,n=Object(u.a)(o);try{for(n.s();!(a=n.n()).done;)-1!==(r=a.value)[1].indexOf("iProgram")&&t(r[0])}catch(c){n.e(c)}finally{n.f()}console.log("INPUTS: ".concat(o.join(",")));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _t={dispatchConnectCV:function(e,t,o,n){return{type:O,startPoint:e,startId:t,endPoint:o,endId:n}},dispatchSetMIDIOutput:E,dispatchDisconnectCV:function(e,t,o,n){return{type:g,startPoint:e,startId:t,endPoint:o,endId:n}}},Pt=Object(p.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{dragPoints:e.dragPoints,connections:e.patch.connections}):{}}),_t)((function(e){var t,o=e.dragPoints,a=e.connections,r=e.dispatchConnectCV,c=e.dispatchDisconnectCV,l=e.dispatchSetMIDIOutput,i=n.useState(),s=Object(d.a)(i,2),f=s[0],p=s[1],m=n.useState(),v=Object(d.a)(m,2),h=v[0],b=v[1];n.useEffect((function(){!function(e){yt.apply(this,arguments)}(l)}),[]);n.useEffect((function(){var e=function(e){var t,n=Object(u.a)(o);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(G(e.x,e.y,a.x,a.y)<=25)return a}}catch(r){n.e(r)}finally{n.f()}},n=function(o){var n=U(t,o.clientX,o.clientY),a=e(n);a&&(p(a),o.preventDefault(),o.stopPropagation())},a=function(o){if(f){var n=U(t,o.clientX,o.clientY),a=e(n);if(a){var c=B[f.connectionPoint],l=B[a.connectionPoint];-1!==c.indexOf("Input")!==(-1!==l.indexOf("Input"))&&r(f.connectionPoint,f.id,a.connectionPoint,a.id)}p(void 0),b(void 0)}},c=function(e){if(f){var o=U(t,e.clientX,e.clientY);b(o),e.preventDefault(),e.stopPropagation()}},l=function(e){p(void 0),b(void 0)};return t.addEventListener("pointerdown",n),t.addEventListener("pointerup",a),t.addEventListener("pointermove",c,!0),t.addEventListener("pointerleave",l),function(){t.removeEventListener("pointerdown",n),t.removeEventListener("pointerup",a),t.removeEventListener("pointermove",c,!0),t.removeEventListener("pointerleave",l)}}),[f,o]);for(var j=[],O=o.length?a.map((function(e,t){var n=o.find((function(t){return e.start.connectionPoint===t.connectionPoint&&e.start.id===t.id})),a=o.find((function(t){return e.end.connectionPoint===t.connectionPoint&&e.end.id===t.id}));if(n&&a)return j[e.color]=!0,Object(Y.jsx)(Ie,{x0:n.x,y0:n.y,x1:a.x,y1:a.y,colorIndex:e.color,onClick:function(){return c(e.start.connectionPoint,e.start.id,e.end.connectionPoint,e.end.id)}},t)})):[],g=j.length,x=0;x<j.length;x++)if(!j[x]){g=x;break}return Object(Y.jsxs)("svg",{viewBox:"0 0 1580 770",xmlns:"http://www.w3.org/2000/svg",ref:function(e){e&&(t=e)},children:[Object(Y.jsx)("defs",{children:Object(Y.jsx)("pattern",{id:"stripes",x:"0",y:"0",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(-45)",children:Object(Y.jsx)("rect",{x:0,y:0,width:1,height:8,fill:"var(--color-outline)"})})}),Object(Y.jsxs)("g",{className:"easel-content",transform:"translate(2, 2)",children:[Object(Y.jsx)(wt,{}),Object(Y.jsx)(et,{}),Object(Y.jsx)(Je,{}),Object(Y.jsx)($e,{}),Object(Y.jsx)(Ze,{}),Object(Y.jsx)(ze,{}),Object(Y.jsx)(Ye,{}),Object(Y.jsx)(Qe,{}),O,f&&Object(Y.jsx)(Ie,{x0:f.x,y0:f.y,x1:h?h.x:f.x,y1:h?h.y:f.y,colorIndex:g})]})]})}));o(35);function kt(e){var t="number"==typeof e.which?e.which:e.keyCode;13!==t&&32!==t||(e.preventDefault(),e.currentTarget.click())}function St(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.filter((function(e){return"string"===typeof e})).reduce((function(e,t){return e.concat(t.split(" "))}),[]).map((function(e){return e.trim()})).filter((function(e){return!!e})).join(" ")}var Mt=function(e){var t=e.id,o=e.className,n=e.style,a=e.ariaLabel,r=e.ariaHidden,c=e.ariaDescribedBy,l=e.ariaControls,i=e.ariaExpanded,s=e.ariaHasPopup,u=e.ariaPosInSet,d=e.ariaSetSize,f=e.ariaSelected,p=e.role,m=e.onClick,v=e.onKeydown,h=e.onBlur,b=e.buttonRef,j=e.title,O=e.label,g=e.leftIcon,x=e.rightIcon,w=e.hardDisabled,y=e.href,_=e.target,P=e.tabIndex,k=e.disabled,S=St("common-button",o,(k=k||w)&&"disabled");return Object(Y.jsx)("button",{id:t,className:S,style:n,title:j,ref:b,onClick:k?void 0:function(e){m&&m(),y&&window.open(y,_||"_blank","noopener,noreferrer"),e.stopPropagation(),e.preventDefault()},onKeyDown:v||kt,onBlur:h,role:p||"button",tabIndex:P||(k?-1:0),disabled:w,"aria-label":a,"aria-hidden":r,"aria-controls":l,"aria-expanded":i,"aria-haspopup":s,"aria-posinset":u,"aria-setsize":d,"aria-describedby":c,"aria-selected":f,children:Object(Y.jsxs)("span",{className:"common-button-flex",children:[g&&Object(Y.jsx)("i",{className:g,"aria-hidden":!0}),Object(Y.jsx)("span",{className:"common-button-label",children:O}),x&&Object(Y.jsx)("i",{className:"right "+x,"aria-hidden":!0})]})})},Xt=function(e){var t,o,n=e.id,a=e.className,r=e.role,c=e.ariaHidden,l=e.ariaLabel,i=e.childTabStopId,s=e.children,d=e.onItemReceivedFocus,f=e.useUpAndDownArrowKeys;return Object(Y.jsx)("div",{id:n,className:a,role:r,tabIndex:i?void 0:0,onKeyDown:function(e){var n;if(null===(n=t)||void 0===n?void 0:n.length){var a=document.activeElement,r=t.indexOf(a),c=function(e){e.focus(),d&&d(e)};-1===r&&a!==o||("Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),a.click?a.click():a.dispatchEvent(new Event("click"))):e.key===(f?"ArrowDown":"ArrowRight")?(r===t.length-1||a===o?c(t[0]):c(t[r+1]),e.preventDefault(),e.stopPropagation()):e.key===(f?"ArrowUp":"ArrowLeft")?(c(0===r||a===o?t[t.length-1]:t[Math.max(r-1,0)]),e.preventDefault(),e.stopPropagation()):"Home"===e.key?(c(t[0]),e.preventDefault(),e.stopPropagation()):"End"===e.key&&(c(t[t.length-1]),e.preventDefault(),e.stopPropagation()))}},ref:function(e){if(e&&!o){o=e;var n=e.querySelectorAll('[tabindex]:not([tabindex="-1"]),[data-isfocusable]');t=[];var a,r=Object(u.a)(n.values());try{for(r.s();!(a=r.n()).done;){var c=a.value;t.push(c),c.setAttribute("tabindex","-1"),c.setAttribute("data-isfocusable","true")}}catch(s){r.e(s)}finally{r.f()}if(i){var l=o.querySelector("#"+i);l&&l.setAttribute("tabindex","0")}}},"aria-hidden":c,"aria-label":l,children:s})},Ct=function(e){var t,o=e.id,a=e.className,r=e.ariaHidden,c=e.ariaLabel,i=e.role,s=e.items,u=e.tabIndex,f=e.selectedId,p=e.onItemSelected,m=n.useState(!1),v=Object(d.a)(m,2),h=v[0],b=v[1],j=St("common-dropdown",a),O=s.find((function(e){return e.id===f}))||s[0];return Object(Y.jsxs)("div",{className:j,ref:function(e){e&&(t=e)},onBlur:function(e){t&&h&&!t.contains(e.relatedTarget)&&b(!1)},children:[Object(Y.jsx)(Mt,Object(l.a)(Object(l.a)({},O),{},{id:o,tabIndex:u,rightIcon:h?"chevron-up":"chevron-down",role:i,className:St("common-dropdown-button",h&&"expanded",O.className),onClick:function(){b(!h)},onKeydown:function(e){var t=s.indexOf(O);"ArrowDown"===e.key?t<s.length-1&&(p(s[t+1].id),e.preventDefault(),e.stopPropagation()):"ArrowUp"===e.key?t>0&&(p(s[t-1].id),e.preventDefault(),e.stopPropagation()):"Enter"===e.key&&(b(!0),e.preventDefault(),e.stopPropagation())},ariaHasPopup:"listbox",ariaExpanded:h,ariaLabel:c,ariaHidden:r})),h&&Object(Y.jsx)(Xt,{role:"listbox",className:"common-menu-dropdown-pane common-dropdown-shadow",childTabStopId:f,"aria-labelledby":o,useUpAndDownArrowKeys:!0,onItemReceivedFocus:function(e){e.id&&s.some((function(t){return t.id===e.id}))&&p(e.id)},children:Object(Y.jsx)("ul",{role:"presentation",children:s.map((function(e){return Object(Y.jsx)("li",{role:"presentation",children:Object(Y.jsx)(Mt,Object(l.a)(Object(l.a)({},e),{},{className:St("common-dropdown-item",e.className),onClick:function(){b(!1),p(e.id)},ariaSelected:e.id===f,role:"option"}))},e.id)}))})})]})};var It={dispatchHideModal:N,dispatchSetMIDIOutput:E},Et=Object(p.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{midiOutput:e.midiOutput}):{}}),It)((function(e){var t=e.dispatchSetMIDIOutput,o=e.midiOutput,n=a.a.useState([]),r=Object(d.a)(n,2),c=r[0],l=r[1];a.a.useEffect((function(){_e().then(l)}),[]);var i,s=[{label:"None",title:"None",id:"None"}],f=Object(u.a)(c);try{for(f.s();!(i=f.n()).done;){var p=i.value;s.push({label:p[1],title:p[1],id:"output-"+p[0]})}}catch(v){f.e(v)}finally{f.f()}var m="None";c.some((function(e){return e[0]===o}))&&(m="output-"+o);return Object(Y.jsxs)("div",{className:"modal-field",children:[Object(Y.jsx)("div",{className:"modal-field-label",children:"Midi output:"}),Object(Y.jsx)(Ct,{id:"midi-output",onItemSelected:function(e){t("None"===e?void 0:e.split("-").slice(1).join("-"))},items:s,selectedId:m})]})})),Nt=(o(36),function(e){var t,o=e.children,a=e.id,r=e.className,c=e.onEscape,l=e.arrowKeyNavigation,i=e.dontStealFocus,s=e.includeOutsideTabOrder,f=n.useState(!1),p=Object(d.a)(f,2),m=p[0],v=p[1],h=function(){return function(e){var t,o=[],n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;o.push(a)}}catch(r){n.e(r)}finally{n.f()}return o}(s?t.querySelectorAll("[tabindex]"):t.querySelectorAll('[tabindex]:not([tabindex="-1"])'))};return Object(Y.jsx)("div",{id:a,className:St("common-focus-trap",r),ref:function(e){e&&(t=e,i||m||e.contains(document.activeElement)||!h().length||(t.focus(),v(!0)))},onKeyDown:function(e){if(t){var o=function(t,o){var n=h();if(n.length){var a=n.indexOf(e.target);t?o?n[n.length-1].focus():a===n.length-1?n[0].focus():n[a+1].focus():o?n[0].focus():0===a?n[n.length-1].focus():n[Math.max(a-1,0)].focus(),e.preventDefault(),e.stopPropagation()}};"Escape"===e.key?(c(),e.preventDefault(),e.stopPropagation()):"Tab"===e.key?e.shiftKey?o(!1,!1):o(!0,!1):l&&("ArrowDown"===e.key?o(!0,!1):"ArrowUp"===e.key?o(!1,!1):"Home"===e.key?o(!1,!0):"End"===e.key&&o(!0,!0))}},tabIndex:-1,children:o})}),Dt=function(e){var t=e.title,o=e.onCloseClick,n=e.actions,a=e.children;return Object(Y.jsxs)("div",{className:"modal-container",children:[Object(Y.jsx)("div",{className:"modal-background",onClick:o}),Object(Y.jsx)("div",{className:"modal",children:Object(Y.jsxs)(Nt,{onEscape:o,children:[Object(Y.jsxs)("div",{className:"modal-title-container",children:[Object(Y.jsx)("div",{className:"modal-title",children:t}),Object(Y.jsx)("button",{title:"Close",onClick:o,tabIndex:0,children:"\u2715"})]}),Object(Y.jsx)("div",{className:"modal-content",children:a}),!!(null===n||void 0===n?void 0:n.length)&&Object(Y.jsx)("div",{className:"modal-actions",children:n.map((function(e){var t=e.label,o=e.onClick,n=e.className;return Object(Y.jsx)(Mt,{title:t,label:t,onClick:o,className:n},e.label)}))})]})})]})};var qt={dispatchHideModal:N,dispatchSetMidiSpeed:function(e){return{speed:e,type:P}}},At=Object(p.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{patch:e.patch,patchName:e.name,midiOutput:e.midiOutput,midiSpeed:e.midiSpeed}):{}}),qt)((function(e){for(var t=e.dispatchHideModal,o=e.patch,a=e.patchName,r=e.midiOutput,c=e.midiSpeed,l=e.dispatchSetMidiSpeed,i=n.useState("None"),s=Object(d.a)(i,2),f=s[0],p=s[1],m=n.useState(!1),v=Object(d.a)(m,2),h=v[0],b=v[1],j=n.useState(0),O=Object(d.a)(j,2),g=O[0],x=O[1],w=n.useState(),y=Object(d.a)(w,2),_=y[0],P=y[1],k=[{label:"None",id:"None",title:"None"}],S=0;S<24;S++)k.push({label:S<9?"0"+(S+1):""+(S+1),title:"Save Slot "+(S+1),id:"slot-"+S});var M=[];(h||r)&&M.push({label:"Cancel",onClick:function(){_&&_.cancel(),t()}}),!h&&r&&M.push({label:"Send",onClick:function(){_&&_.cancel(),b(!0);var e=de(o,!0,a,"None"!==f?parseInt(f.split("-").slice(-1)[0]):void 0);"None"===f&&(e=function(){var e,t=Object.keys(oe).filter((function(e){return-1!==e.indexOf("Output")})).map((function(e){return oe[e]})),o=Object.keys(oe).filter((function(e){return-1!==e.indexOf("Output")})).map((function(e){return oe[e]})),n=[],a=Object(u.a)(t);try{for(a.s();!(e=a.n()).done;){var r,c=e.value,l=Object(u.a)(o);try{for(l.s();!(r=l.n()).done;){var i=r.value;n.push(ue(c,i))}}catch(s){l.e(s)}finally{l.f()}}}catch(s){a.e(s)}finally{a.f()}return n}().concat(e));var n=new T;P(n),function(e,t,o,n){return Xe.apply(this,arguments)}(r,e,(function(e,t){x(Math.round(e/t*100))}),n).then((function(){P(void 0),t()}))}});var X="var(--color-outline)",C="var(--color-background)";return Object(Y.jsxs)(Dt,{title:"Send patch to easel",onCloseClick:t,actions:M,children:[!h&&Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)("div",{className:"modal-field",children:[Object(Y.jsx)("div",{className:"modal-field-label",children:"Save to slot:"}),Object(Y.jsx)(Ct,{id:"download-save-slot",onItemSelected:function(e){p(e)},items:k,selectedId:f})]}),Object(Y.jsx)(Et,{}),Object(Y.jsxs)("div",{className:"modal-field",children:[Object(Y.jsx)("div",{className:"modal-field-label",children:"Message speed:"}),Object(Y.jsx)(Ct,{id:"download-midi-speed",onItemSelected:function(e){l(e)},items:[{label:"Very Slow",title:"Very Slow",id:"very-slow"},{label:"Slow",title:"Slow",id:"slow"},{label:"Medium",title:"Medium",id:"medium"},{label:"Fast",title:"Fast",id:"fast"}],selectedId:c})]})]}),h&&Object(Y.jsxs)("div",{className:"progress-bar-outer",children:[Object(Y.jsx)("div",{children:"Sending patch to easel..."}),Object(Y.jsx)("div",{className:"progress-bar",style:{backgroundImage:"linear-gradient(to right, ".concat(X," 0%, ").concat(X," ").concat(g,"%, ").concat(C," ").concat(g,"%, ").concat(C," 100%)")}})]})]})}));o(37);var Tt={dispatchHideModal:N,dispatchOpenSavedPatch:D},Vt=Object(p.b)((function(e,t){return e?Object(l.a)({},t):{}}),Tt)((function(e){var t=e.dispatchHideModal,o=e.dispatchOpenSavedPatch,a=n.useState([]),r=Object(d.a)(a,2),c=r[0],l=r[1];n.useEffect((function(){(function(){return mt.apply(this,arguments)})().then(l)}),[]);return Object(Y.jsx)(Dt,{title:"Saved patches",onCloseClick:t,children:Object(Y.jsx)("div",{className:"saved-patches-scroller",children:Object(Y.jsx)("div",{className:"saved-patches-list",children:c.map((function(e){return Object(Y.jsxs)("div",{className:"saved-patch-list-item",onClick:function(){return function(e){o(e),t()}(e)},children:[Object(Y.jsxs)("div",{className:"saved-patch-detail",children:[Object(Y.jsx)("div",{className:"saved-patch-name",children:e.name}),Object(Y.jsxs)("div",{className:"saved-patch-time",children:["Last edited ",W(e.lastSavedTime)]})]}),Object(Y.jsx)("div",{className:"saved-patch-preview",children:Object(Y.jsx)("img",{src:e.preview,alt:"Preview of patch"})})]},e.id)}))})})})}));var Lt={dispatchHideModal:N,dispatchSetMIDIInput:function(e){return{type:x,name:e}}},Ft=Object(p.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{midiInput:e.midiInput}):{}}),Lt)((function(e){var t=e.dispatchHideModal,o=e.dispatchSetMIDIInput,a=e.midiInput,r=n.useState([]),c=Object(d.a)(r,2),l=c[0],i=c[1];n.useEffect((function(){(function(){return ke.apply(this,arguments)})().then(i)}),[]);var s,f=[{label:"None",title:"None",id:"None"}],p=Object(u.a)(l);try{for(p.s();!(s=p.n()).done;){var m=s.value;f.push({label:m[1],title:m[1],id:"input-"+m[0]})}}catch(h){p.e(h)}finally{p.f()}var v="None";l.some((function(e){return e[0]===a}))&&(v="input-"+a);return Object(Y.jsxs)(Dt,{title:"Midi config",onCloseClick:t,children:[Object(Y.jsxs)("div",{className:"modal-field",children:[Object(Y.jsx)("div",{className:"modal-field-label",children:"Midi input:"}),Object(Y.jsx)(Ct,{id:"midi-input",onItemSelected:function(e){o("None"===e?void 0:e.split("-").slice(1).join("-"))},items:f,selectedId:v})]}),Object(Y.jsx)(Et,{})]})}));var Ut={dispatchHideModal:N},Gt=Object(p.b)((function(e,t){return e?Object(l.a)({},t):{}}),Ut)((function(e){var t=e.dispatchHideModal;return Object(Y.jsx)(Dt,{title:"Save patch",onCloseClick:t})}));var Rt={dispatchUpdateFader:C},Wt=Object(p.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{modalState:e.modal}):{}}),Rt)((function(e){switch(e.modalState.type){case"download":return Object(Y.jsx)(At,{});case"file":return Object(Y.jsx)(Vt,{});case"midi":return Object(Y.jsx)(Ft,{});case"save":return Object(Y.jsx)(Gt,{})}}));xe.subscribe(function(e,t){var o;return function(){o&&clearTimeout(o),o=setTimeout((function(){e(),o=void 0}),t)}}((function(){var e=xe.getState(),t=V(e.patch);if(window.location.replace("#"+t),e.saved){var o=e.saved.patch!==t;!!e.patchEdited!==o&&xe.dispatch(function(e){return{edited:e,type:k}}(o))}}),500));var Ht={dispatchSetPatch:function(e){return{type:y,patch:e}}},Kt=Object(p.b)((function(e,t){return e?Object(l.a)(Object(l.a)({},t),{},{modal:e.modal}):{}}),Ht)((function(e){var t=e.modal,o=e.dispatchSetPatch;return a.a.useEffect((function(){var e=window.location.hash;if((null===e||void 0===e?void 0:e.length)>2){var t=L(e.slice(1));o(t)}}),[]),Object(Y.jsxs)("div",{className:"App",children:[Object(Y.jsx)(Pt,{}),t&&Object(Y.jsx)(Wt,{})]})})),Bt=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,39)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;o(e),n(e),a(e),r(e),c(e)}))};c.a.render(Object(Y.jsx)(a.a.StrictMode,{children:Object(Y.jsx)(p.a,{store:xe,children:Object(Y.jsx)(Kt,{})})}),document.getElementById("root")),Bt()}},[[38,1,2]]]);
//# sourceMappingURL=main.2aa18b41.chunk.js.map